"use strict";(self.webpackChunkStreamingAppCoreWebApp=self.webpackChunkStreamingAppCoreWebApp||[]).push([[516],{794:(__unused_webpack_module,__unused_webpack___webpack_exports__,__webpack_require__)=>{var angular=__webpack_require__(695),angular_default=__webpack_require__.n(angular),angular_route=__webpack_require__(944),angular_route_default=__webpack_require__.n(angular_route),angular_animate=__webpack_require__(234),angular_animate_default=__webpack_require__.n(angular_animate),angular_ui_bootstrap=__webpack_require__(362),angular_ui_bootstrap_default=__webpack_require__.n(angular_ui_bootstrap),angular_material=__webpack_require__(672),angular_material_default=__webpack_require__.n(angular_material),angular_messages=__webpack_require__(590),angular_messages_default=__webpack_require__.n(angular_messages),angular_aria=__webpack_require__(828),angular_aria_default=__webpack_require__.n(angular_aria);var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};function __extends(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}var __assign=function(){return __assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign.apply(this,arguments)};Object.create;function __values(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar}Object.create;var MDCFoundation=function(){function MDCFoundation(adapter){void 0===adapter&&(adapter={}),this.adapter=adapter}return Object.defineProperty(MDCFoundation,"cssClasses",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(MDCFoundation,"strings",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(MDCFoundation,"numbers",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(MDCFoundation,"defaultAdapter",{get:function(){return{}},enumerable:!1,configurable:!0}),MDCFoundation.prototype.init=function(){},MDCFoundation.prototype.destroy=function(){},MDCFoundation}();var MDCComponent=function(){function MDCComponent(root,foundation){for(var args=[],_i=2;_i<arguments.length;_i++)args[_i-2]=arguments[_i];this.root=root,this.initialize.apply(this,function(to,from,pack){if(pack||2===arguments.length)for(var ar,i=0,l=from.length;i<l;i++)!ar&&i in from||(ar||(ar=Array.prototype.slice.call(from,0,i)),ar[i]=from[i]);return to.concat(ar||Array.prototype.slice.call(from))}([],__read(args))),this.foundation=void 0===foundation?this.getDefaultFoundation():foundation,this.foundation.init(),this.initialSyncWithDOM()}return MDCComponent.attachTo=function(root){return new MDCComponent(root,new MDCFoundation({}))},MDCComponent.prototype.initialize=function(){for(var _args=[],_i=0;_i<arguments.length;_i++)_args[_i]=arguments[_i]},MDCComponent.prototype.getDefaultFoundation=function(){throw new Error("Subclasses must override getDefaultFoundation to return a properly configured foundation class")},MDCComponent.prototype.initialSyncWithDOM=function(){},MDCComponent.prototype.destroy=function(){this.foundation.destroy()},MDCComponent.prototype.listen=function(evtType,handler,options){this.root.addEventListener(evtType,handler,options)},MDCComponent.prototype.unlisten=function(evtType,handler,options){this.root.removeEventListener(evtType,handler,options)},MDCComponent.prototype.emit=function(evtType,evtData,shouldBubble){var evt;void 0===shouldBubble&&(shouldBubble=!1),"function"==typeof CustomEvent?evt=new CustomEvent(evtType,{bubbles:shouldBubble,detail:evtData}):(evt=document.createEvent("CustomEvent")).initCustomEvent(evtType,shouldBubble,!1,evtData),this.root.dispatchEvent(evt)},MDCComponent}();function applyPassive(globalObj){return void 0===globalObj&&(globalObj=window),!!function(globalObj){void 0===globalObj&&(globalObj=window);var passiveSupported=!1;try{var options={get passive(){return passiveSupported=!0,!1}},handler=function(){};globalObj.document.addEventListener("test",handler,options),globalObj.document.removeEventListener("test",handler,options)}catch(err){passiveSupported=!1}return passiveSupported}(globalObj)&&{passive:!0}}function matches(element,selector){return(element.matches||element.webkitMatchesSelector||element.msMatchesSelector).call(element,selector)}var supportsCssVariables_,cssClasses={BG_FOCUSED:"mdc-ripple-upgraded--background-focused",FG_ACTIVATION:"mdc-ripple-upgraded--foreground-activation",FG_DEACTIVATION:"mdc-ripple-upgraded--foreground-deactivation",ROOT:"mdc-ripple-upgraded",UNBOUNDED:"mdc-ripple-upgraded--unbounded"},strings={VAR_FG_SCALE:"--mdc-ripple-fg-scale",VAR_FG_SIZE:"--mdc-ripple-fg-size",VAR_FG_TRANSLATE_END:"--mdc-ripple-fg-translate-end",VAR_FG_TRANSLATE_START:"--mdc-ripple-fg-translate-start",VAR_LEFT:"--mdc-ripple-left",VAR_TOP:"--mdc-ripple-top"},numbers={DEACTIVATION_TIMEOUT_MS:225,FG_DEACTIVATION_MS:150,INITIAL_ORIGIN_SCALE:.6,PADDING:10,TAP_DELAY_MS:300};var ACTIVATION_EVENT_TYPES=["touchstart","pointerdown","mousedown","keydown"],POINTER_DEACTIVATION_EVENT_TYPES=["touchend","pointerup","mouseup","contextmenu"],activatedTargets=[],MDCRippleFoundation=function(_super){function MDCRippleFoundation(adapter){var _this=_super.call(this,__assign(__assign({},MDCRippleFoundation.defaultAdapter),adapter))||this;return _this.activationAnimationHasEnded=!1,_this.activationTimer=0,_this.fgDeactivationRemovalTimer=0,_this.fgScale="0",_this.frame={width:0,height:0},_this.initialSize=0,_this.layoutFrame=0,_this.maxRadius=0,_this.unboundedCoords={left:0,top:0},_this.activationState=_this.defaultActivationState(),_this.activationTimerCallback=function(){_this.activationAnimationHasEnded=!0,_this.runDeactivationUXLogicIfReady()},_this.activateHandler=function(e){_this.activateImpl(e)},_this.deactivateHandler=function(){_this.deactivateImpl()},_this.focusHandler=function(){_this.handleFocus()},_this.blurHandler=function(){_this.handleBlur()},_this.resizeHandler=function(){_this.layout()},_this}return __extends(MDCRippleFoundation,_super),Object.defineProperty(MDCRippleFoundation,"cssClasses",{get:function(){return cssClasses},enumerable:!1,configurable:!0}),Object.defineProperty(MDCRippleFoundation,"strings",{get:function(){return strings},enumerable:!1,configurable:!0}),Object.defineProperty(MDCRippleFoundation,"numbers",{get:function(){return numbers},enumerable:!1,configurable:!0}),Object.defineProperty(MDCRippleFoundation,"defaultAdapter",{get:function(){return{addClass:function(){},browserSupportsCssVars:function(){return!0},computeBoundingRect:function(){return{top:0,right:0,bottom:0,left:0,width:0,height:0}},containsEventTarget:function(){return!0},deregisterDocumentInteractionHandler:function(){},deregisterInteractionHandler:function(){},deregisterResizeHandler:function(){},getWindowPageOffset:function(){return{x:0,y:0}},isSurfaceActive:function(){return!0},isSurfaceDisabled:function(){return!0},isUnbounded:function(){return!0},registerDocumentInteractionHandler:function(){},registerInteractionHandler:function(){},registerResizeHandler:function(){},removeClass:function(){},updateCssVariable:function(){}}},enumerable:!1,configurable:!0}),MDCRippleFoundation.prototype.init=function(){var _this=this,supportsPressRipple=this.supportsPressRipple();if(this.registerRootHandlers(supportsPressRipple),supportsPressRipple){var _a=MDCRippleFoundation.cssClasses,ROOT_1=_a.ROOT,UNBOUNDED_1=_a.UNBOUNDED;requestAnimationFrame((function(){_this.adapter.addClass(ROOT_1),_this.adapter.isUnbounded()&&(_this.adapter.addClass(UNBOUNDED_1),_this.layoutInternal())}))}},MDCRippleFoundation.prototype.destroy=function(){var _this=this;if(this.supportsPressRipple()){this.activationTimer&&(clearTimeout(this.activationTimer),this.activationTimer=0,this.adapter.removeClass(MDCRippleFoundation.cssClasses.FG_ACTIVATION)),this.fgDeactivationRemovalTimer&&(clearTimeout(this.fgDeactivationRemovalTimer),this.fgDeactivationRemovalTimer=0,this.adapter.removeClass(MDCRippleFoundation.cssClasses.FG_DEACTIVATION));var _a=MDCRippleFoundation.cssClasses,ROOT_2=_a.ROOT,UNBOUNDED_2=_a.UNBOUNDED;requestAnimationFrame((function(){_this.adapter.removeClass(ROOT_2),_this.adapter.removeClass(UNBOUNDED_2),_this.removeCssVars()}))}this.deregisterRootHandlers(),this.deregisterDeactivationHandlers()},MDCRippleFoundation.prototype.activate=function(evt){this.activateImpl(evt)},MDCRippleFoundation.prototype.deactivate=function(){this.deactivateImpl()},MDCRippleFoundation.prototype.layout=function(){var _this=this;this.layoutFrame&&cancelAnimationFrame(this.layoutFrame),this.layoutFrame=requestAnimationFrame((function(){_this.layoutInternal(),_this.layoutFrame=0}))},MDCRippleFoundation.prototype.setUnbounded=function(unbounded){var UNBOUNDED=MDCRippleFoundation.cssClasses.UNBOUNDED;unbounded?this.adapter.addClass(UNBOUNDED):this.adapter.removeClass(UNBOUNDED)},MDCRippleFoundation.prototype.handleFocus=function(){var _this=this;requestAnimationFrame((function(){return _this.adapter.addClass(MDCRippleFoundation.cssClasses.BG_FOCUSED)}))},MDCRippleFoundation.prototype.handleBlur=function(){var _this=this;requestAnimationFrame((function(){return _this.adapter.removeClass(MDCRippleFoundation.cssClasses.BG_FOCUSED)}))},MDCRippleFoundation.prototype.supportsPressRipple=function(){return this.adapter.browserSupportsCssVars()},MDCRippleFoundation.prototype.defaultActivationState=function(){return{activationEvent:void 0,hasDeactivationUXRun:!1,isActivated:!1,isProgrammatic:!1,wasActivatedByPointer:!1,wasElementMadeActive:!1}},MDCRippleFoundation.prototype.registerRootHandlers=function(supportsPressRipple){var e_1,_a;if(supportsPressRipple){try{for(var ACTIVATION_EVENT_TYPES_1=__values(ACTIVATION_EVENT_TYPES),ACTIVATION_EVENT_TYPES_1_1=ACTIVATION_EVENT_TYPES_1.next();!ACTIVATION_EVENT_TYPES_1_1.done;ACTIVATION_EVENT_TYPES_1_1=ACTIVATION_EVENT_TYPES_1.next()){var evtType=ACTIVATION_EVENT_TYPES_1_1.value;this.adapter.registerInteractionHandler(evtType,this.activateHandler)}}catch(e_1_1){e_1={error:e_1_1}}finally{try{ACTIVATION_EVENT_TYPES_1_1&&!ACTIVATION_EVENT_TYPES_1_1.done&&(_a=ACTIVATION_EVENT_TYPES_1.return)&&_a.call(ACTIVATION_EVENT_TYPES_1)}finally{if(e_1)throw e_1.error}}this.adapter.isUnbounded()&&this.adapter.registerResizeHandler(this.resizeHandler)}this.adapter.registerInteractionHandler("focus",this.focusHandler),this.adapter.registerInteractionHandler("blur",this.blurHandler)},MDCRippleFoundation.prototype.registerDeactivationHandlers=function(evt){var e_2,_a;if("keydown"===evt.type)this.adapter.registerInteractionHandler("keyup",this.deactivateHandler);else try{for(var POINTER_DEACTIVATION_EVENT_TYPES_1=__values(POINTER_DEACTIVATION_EVENT_TYPES),POINTER_DEACTIVATION_EVENT_TYPES_1_1=POINTER_DEACTIVATION_EVENT_TYPES_1.next();!POINTER_DEACTIVATION_EVENT_TYPES_1_1.done;POINTER_DEACTIVATION_EVENT_TYPES_1_1=POINTER_DEACTIVATION_EVENT_TYPES_1.next()){var evtType=POINTER_DEACTIVATION_EVENT_TYPES_1_1.value;this.adapter.registerDocumentInteractionHandler(evtType,this.deactivateHandler)}}catch(e_2_1){e_2={error:e_2_1}}finally{try{POINTER_DEACTIVATION_EVENT_TYPES_1_1&&!POINTER_DEACTIVATION_EVENT_TYPES_1_1.done&&(_a=POINTER_DEACTIVATION_EVENT_TYPES_1.return)&&_a.call(POINTER_DEACTIVATION_EVENT_TYPES_1)}finally{if(e_2)throw e_2.error}}},MDCRippleFoundation.prototype.deregisterRootHandlers=function(){var e_3,_a;try{for(var ACTIVATION_EVENT_TYPES_2=__values(ACTIVATION_EVENT_TYPES),ACTIVATION_EVENT_TYPES_2_1=ACTIVATION_EVENT_TYPES_2.next();!ACTIVATION_EVENT_TYPES_2_1.done;ACTIVATION_EVENT_TYPES_2_1=ACTIVATION_EVENT_TYPES_2.next()){var evtType=ACTIVATION_EVENT_TYPES_2_1.value;this.adapter.deregisterInteractionHandler(evtType,this.activateHandler)}}catch(e_3_1){e_3={error:e_3_1}}finally{try{ACTIVATION_EVENT_TYPES_2_1&&!ACTIVATION_EVENT_TYPES_2_1.done&&(_a=ACTIVATION_EVENT_TYPES_2.return)&&_a.call(ACTIVATION_EVENT_TYPES_2)}finally{if(e_3)throw e_3.error}}this.adapter.deregisterInteractionHandler("focus",this.focusHandler),this.adapter.deregisterInteractionHandler("blur",this.blurHandler),this.adapter.isUnbounded()&&this.adapter.deregisterResizeHandler(this.resizeHandler)},MDCRippleFoundation.prototype.deregisterDeactivationHandlers=function(){var e_4,_a;this.adapter.deregisterInteractionHandler("keyup",this.deactivateHandler);try{for(var POINTER_DEACTIVATION_EVENT_TYPES_2=__values(POINTER_DEACTIVATION_EVENT_TYPES),POINTER_DEACTIVATION_EVENT_TYPES_2_1=POINTER_DEACTIVATION_EVENT_TYPES_2.next();!POINTER_DEACTIVATION_EVENT_TYPES_2_1.done;POINTER_DEACTIVATION_EVENT_TYPES_2_1=POINTER_DEACTIVATION_EVENT_TYPES_2.next()){var evtType=POINTER_DEACTIVATION_EVENT_TYPES_2_1.value;this.adapter.deregisterDocumentInteractionHandler(evtType,this.deactivateHandler)}}catch(e_4_1){e_4={error:e_4_1}}finally{try{POINTER_DEACTIVATION_EVENT_TYPES_2_1&&!POINTER_DEACTIVATION_EVENT_TYPES_2_1.done&&(_a=POINTER_DEACTIVATION_EVENT_TYPES_2.return)&&_a.call(POINTER_DEACTIVATION_EVENT_TYPES_2)}finally{if(e_4)throw e_4.error}}},MDCRippleFoundation.prototype.removeCssVars=function(){var _this=this,rippleStrings=MDCRippleFoundation.strings;Object.keys(rippleStrings).forEach((function(key){0===key.indexOf("VAR_")&&_this.adapter.updateCssVariable(rippleStrings[key],null)}))},MDCRippleFoundation.prototype.activateImpl=function(evt){var _this=this;if(!this.adapter.isSurfaceDisabled()){var activationState=this.activationState;if(!activationState.isActivated){var previousActivationEvent=this.previousActivationEvent;if(!(previousActivationEvent&&void 0!==evt&&previousActivationEvent.type!==evt.type))activationState.isActivated=!0,activationState.isProgrammatic=void 0===evt,activationState.activationEvent=evt,activationState.wasActivatedByPointer=!activationState.isProgrammatic&&(void 0!==evt&&("mousedown"===evt.type||"touchstart"===evt.type||"pointerdown"===evt.type)),void 0!==evt&&activatedTargets.length>0&&activatedTargets.some((function(target){return _this.adapter.containsEventTarget(target)}))?this.resetActivationState():(void 0!==evt&&(activatedTargets.push(evt.target),this.registerDeactivationHandlers(evt)),activationState.wasElementMadeActive=this.checkElementMadeActive(evt),activationState.wasElementMadeActive&&this.animateActivation(),requestAnimationFrame((function(){activatedTargets=[],activationState.wasElementMadeActive||void 0===evt||" "!==evt.key&&32!==evt.keyCode||(activationState.wasElementMadeActive=_this.checkElementMadeActive(evt),activationState.wasElementMadeActive&&_this.animateActivation()),activationState.wasElementMadeActive||(_this.activationState=_this.defaultActivationState())})))}}},MDCRippleFoundation.prototype.checkElementMadeActive=function(evt){return void 0===evt||"keydown"!==evt.type||this.adapter.isSurfaceActive()},MDCRippleFoundation.prototype.animateActivation=function(){var _this=this,_a=MDCRippleFoundation.strings,VAR_FG_TRANSLATE_START=_a.VAR_FG_TRANSLATE_START,VAR_FG_TRANSLATE_END=_a.VAR_FG_TRANSLATE_END,_b=MDCRippleFoundation.cssClasses,FG_DEACTIVATION=_b.FG_DEACTIVATION,FG_ACTIVATION=_b.FG_ACTIVATION,DEACTIVATION_TIMEOUT_MS=MDCRippleFoundation.numbers.DEACTIVATION_TIMEOUT_MS;this.layoutInternal();var translateStart="",translateEnd="";if(!this.adapter.isUnbounded()){var _c=this.getFgTranslationCoordinates(),startPoint=_c.startPoint,endPoint=_c.endPoint;translateStart=startPoint.x+"px, "+startPoint.y+"px",translateEnd=endPoint.x+"px, "+endPoint.y+"px"}this.adapter.updateCssVariable(VAR_FG_TRANSLATE_START,translateStart),this.adapter.updateCssVariable(VAR_FG_TRANSLATE_END,translateEnd),clearTimeout(this.activationTimer),clearTimeout(this.fgDeactivationRemovalTimer),this.rmBoundedActivationClasses(),this.adapter.removeClass(FG_DEACTIVATION),this.adapter.computeBoundingRect(),this.adapter.addClass(FG_ACTIVATION),this.activationTimer=setTimeout((function(){_this.activationTimerCallback()}),DEACTIVATION_TIMEOUT_MS)},MDCRippleFoundation.prototype.getFgTranslationCoordinates=function(){var startPoint,_a=this.activationState,activationEvent=_a.activationEvent;return{startPoint:startPoint={x:(startPoint=_a.wasActivatedByPointer?function(evt,pageOffset,clientRect){if(!evt)return{x:0,y:0};var normalizedX,normalizedY,x=pageOffset.x,y=pageOffset.y,documentX=x+clientRect.left,documentY=y+clientRect.top;if("touchstart"===evt.type){var touchEvent=evt;normalizedX=touchEvent.changedTouches[0].pageX-documentX,normalizedY=touchEvent.changedTouches[0].pageY-documentY}else{var mouseEvent=evt;normalizedX=mouseEvent.pageX-documentX,normalizedY=mouseEvent.pageY-documentY}return{x:normalizedX,y:normalizedY}}(activationEvent,this.adapter.getWindowPageOffset(),this.adapter.computeBoundingRect()):{x:this.frame.width/2,y:this.frame.height/2}).x-this.initialSize/2,y:startPoint.y-this.initialSize/2},endPoint:{x:this.frame.width/2-this.initialSize/2,y:this.frame.height/2-this.initialSize/2}}},MDCRippleFoundation.prototype.runDeactivationUXLogicIfReady=function(){var _this=this,FG_DEACTIVATION=MDCRippleFoundation.cssClasses.FG_DEACTIVATION,_a=this.activationState,hasDeactivationUXRun=_a.hasDeactivationUXRun,isActivated=_a.isActivated;(hasDeactivationUXRun||!isActivated)&&this.activationAnimationHasEnded&&(this.rmBoundedActivationClasses(),this.adapter.addClass(FG_DEACTIVATION),this.fgDeactivationRemovalTimer=setTimeout((function(){_this.adapter.removeClass(FG_DEACTIVATION)}),numbers.FG_DEACTIVATION_MS))},MDCRippleFoundation.prototype.rmBoundedActivationClasses=function(){var FG_ACTIVATION=MDCRippleFoundation.cssClasses.FG_ACTIVATION;this.adapter.removeClass(FG_ACTIVATION),this.activationAnimationHasEnded=!1,this.adapter.computeBoundingRect()},MDCRippleFoundation.prototype.resetActivationState=function(){var _this=this;this.previousActivationEvent=this.activationState.activationEvent,this.activationState=this.defaultActivationState(),setTimeout((function(){return _this.previousActivationEvent=void 0}),MDCRippleFoundation.numbers.TAP_DELAY_MS)},MDCRippleFoundation.prototype.deactivateImpl=function(){var _this=this,activationState=this.activationState;if(activationState.isActivated){var state=__assign({},activationState);activationState.isProgrammatic?(requestAnimationFrame((function(){_this.animateDeactivation(state)})),this.resetActivationState()):(this.deregisterDeactivationHandlers(),requestAnimationFrame((function(){_this.activationState.hasDeactivationUXRun=!0,_this.animateDeactivation(state),_this.resetActivationState()})))}},MDCRippleFoundation.prototype.animateDeactivation=function(_a){var wasActivatedByPointer=_a.wasActivatedByPointer,wasElementMadeActive=_a.wasElementMadeActive;(wasActivatedByPointer||wasElementMadeActive)&&this.runDeactivationUXLogicIfReady()},MDCRippleFoundation.prototype.layoutInternal=function(){var _this=this;this.frame=this.adapter.computeBoundingRect();var maxDim=Math.max(this.frame.height,this.frame.width);this.maxRadius=this.adapter.isUnbounded()?maxDim:Math.sqrt(Math.pow(_this.frame.width,2)+Math.pow(_this.frame.height,2))+MDCRippleFoundation.numbers.PADDING;var initialSize=Math.floor(maxDim*MDCRippleFoundation.numbers.INITIAL_ORIGIN_SCALE);this.adapter.isUnbounded()&&initialSize%2!=0?this.initialSize=initialSize-1:this.initialSize=initialSize,this.fgScale=""+this.maxRadius/this.initialSize,this.updateLayoutCssVars()},MDCRippleFoundation.prototype.updateLayoutCssVars=function(){var _a=MDCRippleFoundation.strings,VAR_FG_SIZE=_a.VAR_FG_SIZE,VAR_LEFT=_a.VAR_LEFT,VAR_TOP=_a.VAR_TOP,VAR_FG_SCALE=_a.VAR_FG_SCALE;this.adapter.updateCssVariable(VAR_FG_SIZE,this.initialSize+"px"),this.adapter.updateCssVariable(VAR_FG_SCALE,this.fgScale),this.adapter.isUnbounded()&&(this.unboundedCoords={left:Math.round(this.frame.width/2-this.initialSize/2),top:Math.round(this.frame.height/2-this.initialSize/2)},this.adapter.updateCssVariable(VAR_LEFT,this.unboundedCoords.left+"px"),this.adapter.updateCssVariable(VAR_TOP,this.unboundedCoords.top+"px"))},MDCRippleFoundation}(MDCFoundation);var MDCRipple=function(_super){function MDCRipple(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.disabled=!1,_this}return __extends(MDCRipple,_super),MDCRipple.attachTo=function(root,opts){void 0===opts&&(opts={isUnbounded:void 0});var ripple=new MDCRipple(root);return void 0!==opts.isUnbounded&&(ripple.unbounded=opts.isUnbounded),ripple},MDCRipple.createAdapter=function(instance){return{addClass:function(className){return instance.root.classList.add(className)},browserSupportsCssVars:function(){return function(windowObj,forceRefresh){void 0===forceRefresh&&(forceRefresh=!1);var supportsCssVars,CSS=windowObj.CSS;if("boolean"==typeof supportsCssVariables_&&!forceRefresh)return supportsCssVariables_;if(!CSS||"function"!=typeof CSS.supports)return!1;var explicitlySupportsCssVars=CSS.supports("--css-vars","yes"),weAreFeatureDetectingSafari10plus=CSS.supports("(--css-vars: yes)")&&CSS.supports("color","#00000000");return supportsCssVars=explicitlySupportsCssVars||weAreFeatureDetectingSafari10plus,forceRefresh||(supportsCssVariables_=supportsCssVars),supportsCssVars}(window)},computeBoundingRect:function(){return instance.root.getBoundingClientRect()},containsEventTarget:function(target){return instance.root.contains(target)},deregisterDocumentInteractionHandler:function(evtType,handler){return document.documentElement.removeEventListener(evtType,handler,applyPassive())},deregisterInteractionHandler:function(evtType,handler){return instance.root.removeEventListener(evtType,handler,applyPassive())},deregisterResizeHandler:function(handler){return window.removeEventListener("resize",handler)},getWindowPageOffset:function(){return{x:window.pageXOffset,y:window.pageYOffset}},isSurfaceActive:function(){return matches(instance.root,":active")},isSurfaceDisabled:function(){return Boolean(instance.disabled)},isUnbounded:function(){return Boolean(instance.unbounded)},registerDocumentInteractionHandler:function(evtType,handler){return document.documentElement.addEventListener(evtType,handler,applyPassive())},registerInteractionHandler:function(evtType,handler){return instance.root.addEventListener(evtType,handler,applyPassive())},registerResizeHandler:function(handler){return window.addEventListener("resize",handler)},removeClass:function(className){return instance.root.classList.remove(className)},updateCssVariable:function(varName,value){return instance.root.style.setProperty(varName,value)}}},Object.defineProperty(MDCRipple.prototype,"unbounded",{get:function(){return Boolean(this.isUnbounded)},set:function(unbounded){this.isUnbounded=Boolean(unbounded),this.setUnbounded()},enumerable:!1,configurable:!0}),MDCRipple.prototype.activate=function(){this.foundation.activate()},MDCRipple.prototype.deactivate=function(){this.foundation.deactivate()},MDCRipple.prototype.layout=function(){this.foundation.layout()},MDCRipple.prototype.getDefaultFoundation=function(){return new MDCRippleFoundation(MDCRipple.createAdapter(this))},MDCRipple.prototype.initialSyncWithDOM=function(){var root=this.root;this.isUnbounded="mdcRippleIsUnbounded"in root.dataset},MDCRipple.prototype.setUnbounded=function(){this.foundation.setUnbounded(Boolean(this.isUnbounded))},MDCRipple}(MDCComponent);function _toConsumableArray(arr){return function(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||_unsupportedIterableToArray(arr)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function(){};return{s:F,n:function(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function(){it=it.call(o)},n:function(){var step=it.next();return normalCompletion=step.done,step},e:function(_e2){didErr=!0,err=_e2},f:function(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var globalScrollbarWidthForThisTypeOfBrowser;const advancedTable_directive=function($compile,$document){return{restrict:"A",scope:{},link:function($scope,$element,$attrs){var table,$parentScope=$scope.$parent;if($scope.tableContainer=$element.parent(),$scope.colsData=new Map,globalScrollbarWidthForThisTypeOfBrowser||(globalScrollbarWidthForThisTypeOfBrowser=function(){var outer=document.createElement("div");outer.style.visibility="hidden",outer.style.overflow="scroll",document.body.appendChild(outer);var inner=document.createElement("div");outer.appendChild(inner);var scrollbarWidth=outer.offsetWidth-inner.offsetWidth;return outer.parentNode.removeChild(outer),scrollbarWidth}()+1),table=$element[0],window.TableKeyDownMDriven&&window.TableKeyDownMDriven(table,$scope),$attrs.$attr.hasOwnProperty("colName")&&($scope.vcolName=$attrs.colName),$attrs.$attr.hasOwnProperty("className")&&($scope.vclassName=$attrs.className),$scope.thElements=$element.find("th[colname]").toArray(),$scope.colElements=$element.find("col[colname]").toArray(),$scope.thHeight=$scope.thElements[0].offsetHeight,0==$scope.thHeight&&($scope.thHeight=36),$scope.thElements.length!==$scope.colElements.length)return console.warn("[AdvancedTableDirective]: Something went wrong. <th> count shoould be equal to <col> count.");if(!$attrs.$attr.hasOwnProperty("cols"))return console.warn("AdvancedTableDirective: Total columns count is not found!");if($scope.totalColCount=parseInt($attrs.cols),$attrs.$attr.hasOwnProperty("multiselect")){$scope.isMultiselectTable=!0;var userMultiSelectColSize=parseInt(window.getComputedStyle($element.find("col.tk-data-table__column--multiselect")[0]).width);$scope.multiSelectColSize=userMultiSelectColSize||60,userMultiSelectColSize||$element.find("col.tk-data-table__column--multiselect").css("width",60)}$document.find(".CSSGridRendering").length>0&&($scope.isCSSGrid=!0);var cache,cachedData=$parentScope.ViewData.GetAdvancedTableMetadata($scope.vclassName);cachedData?($scope.resizedByUser=!0,cache=cachedData,$scope.colElements.map((function(col){var name=col.getAttribute("colname"),savedSize=cache.get(name);savedSize&&col.setAttribute("style","width:".concat(savedSize,"px;")),$scope.colsData.set(name,savedSize)}))):calculateColumnSize();var tableContainerSizeObserver=new ResizeObserver((function(entries){var _step,_iterator=_createForOfIteratorHelper(entries);try{for(_iterator.s();!(_step=_iterator.n()).done;){var entry=_step.value,thetable=entry.target,newTableWidth=entry.contentBoxSize[0].inlineSize;thetable.scrollHeight<thetable.clientHeight&&(newTableWidth-=globalScrollbarWidthForThisTypeOfBrowser),$scope.tableWidth=newTableWidth,$scope.$$phase||$scope.$digest()}}catch(err){_iterator.e(err)}finally{_iterator.f()}})),tableHeightObserver=new ResizeObserver((function(entries){var _step2,_iterator2=_createForOfIteratorHelper(entries);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var entry=_step2.value;$scope.tableHeight=entry.contentBoxSize[0].blockSize,$scope.$$phase||$scope.$digest()}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}}));function calculateColumnSize(){var oneColumnSize,totalColsCount,visibleColumns=$scope.colElements.filter((function(col){return!col.classList.contains("ng-hide")})),tableWidth=$scope.isMultiselectTable?$scope.tableWidth-$scope.multiSelectColSize:$scope.tableWidth;function calclulateOneColumnSize(totalColsCount){return tableWidth/totalColsCount-.48/totalColsCount}visibleColumns.length!==$scope.colElements.length?(totalColsCount=visibleColumns.reduce((function(count,col){return count+parseInt(col.getAttribute("colspan"))}),0),oneColumnSize=calclulateOneColumnSize(totalColsCount),visibleColumns.map((function(col){return setColumnSize(col,oneColumnSize)}))):(totalColsCount=$scope.colElements.reduce((function(count,col){return count+parseInt(col.getAttribute("colspan"))}),0),oneColumnSize=calclulateOneColumnSize(totalColsCount),$scope.colElements.map((function(col){return setColumnSize(col,oneColumnSize)})))}function setColumnSize(col,oneColumnSize){var name=col.getAttribute("colname"),size=oneColumnSize*parseInt(col.getAttribute("colspan"));!size||size<0||(col.setAttribute("style","width:".concat(size,"px;")),$scope.colsData.set(name,size))}tableContainerSizeObserver.observe($scope.tableContainer[0]),tableHeightObserver.observe($element[0]),$scope.watcherTableWidth=$scope.$watch("tableWidth",(function(newVal){newVal>0&&($scope.resizedByUser||calculateColumnSize())})),$scope.colElements.map((function(col){var name=col.getAttribute("colName");$parentScope.$watch("ViewModelRoot.VM_Status.".concat($scope.vclassName,"_").concat(name,"_Visible"),(function(newVal){void 0===newVal||$scope.resizedByUser||calculateColumnSize()}))})),$scope.thElements.map((function(th,index){!function(col,index){var resizer=document.createElement("div");resizer.classList.add("resizer"),resizer.setAttribute("style","height:{{thHeight}}px"),function(resizer,index){var newSize,x=0,name=$scope.colElements[index].getAttribute("colname"),mouseDownHandler=function(event){event.stopPropagation(),x=event.clientX,document.addEventListener("mousemove",mouseMoveHandler),document.addEventListener("mouseup",mouseUpHandler)},mouseMoveHandler=function(event){event.stopPropagation();var deltaX=event.clientX-x;$scope.resizedByUser=!0,resizer.classList.add("resizing"),newSize=$scope.colsData.get(name)+deltaX,$scope.colElements[index].setAttribute("style","width: ".concat(newSize<30?30:newSize,"px;")),$scope.$$phase||$scope.$digest()},mouseUpHandler=function mouseUpHandler(event){event.stopPropagation(),resizer.classList.remove("resizing"),document.removeEventListener("mousemove",mouseMoveHandler),document.removeEventListener("mouseup",mouseUpHandler),newSize&&($scope.colsData.set(name,newSize<30?30:newSize),$scope.$$phase||$scope.$digest())};resizer.addEventListener("mousedown",mouseDownHandler)}(resizer,index),function(resizer,index){var header=$scope.thElements[index],col=$scope.colElements[index],colName=col.getAttribute("colname"),getInlinePadding=function(element){return parseInt(window.getComputedStyle(element).paddingRight)+parseInt(window.getComputedStyle(element).paddingLeft)},getContenWidthOfChildElement=function(parent){var childPosition=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return parent.children[childPosition].scrollWidth};resizer.addEventListener("dblclick",(function(e){e.stopPropagation(),e.preventDefault();var columnCells=$element.find("td[colname='".concat(colName,"']")).toArray(),columnCellsWidths=columnCells.length>0?columnCells.map((function(cell){return getContenWidthOfChildElement(cell)})):null,cellInlinePadding=getInlinePadding(columnCells[0]),headerInlinePadding=getInlinePadding(header),maxCellContentWidth=Math.max.apply(Math,_toConsumableArray(columnCellsWidths)),colSizeToSet=getContenWidthOfChildElement(header)+headerInlinePadding+3;0!==maxCellContentWidth&&maxCellContentWidth>colSizeToSet&&(colSizeToSet=maxCellContentWidth+cellInlinePadding+3),col.setAttribute("style","width:".concat(colSizeToSet,"px;")),$scope.colsData.set(colName,colSizeToSet),$scope.$$phase||$scope.$digest()}))}(resizer,index),$compile(resizer)($scope),col.append(resizer)}(th,index)})),$parentScope.$on("$locationChangeStart",(function(){$parentScope.ViewData.SaveAdvancedTableMetadata($scope.vclassName,$scope.colsData)})),$scope.$on("$destroy",(function(){$scope.watcherTableWidth(),$scope.watcherMinHeight&&$scope.watcherMinHeight()}))}}};var DirectivesModule=angular_default().module("turnkey.ui.directives",[]).directive("autofocus",(function($timeout){return function($timeout){return{restrict:"A",link:function($scope,$element){var row=null;for(var key in $scope)if(key.startsWith("row")){row=$scope[key];break}var clickit=!1,focusit=!1;"INPUT"==$element[0].tagName&&(clickit=!0,focusit=!0),"BUTTON"==$element[0].tagName&&(focusit=!0),null!==row&&row.VMClassId.VMObjectId.includes("$new$")&&(clickit=!0,focusit=!0),$element.is(":visible")&&$element.is(":enabled")&&$timeout((function(){clickit&&$element[0].click(),focusit&&$element[0].focus(),$element[0].focus(),$element[0].addEventListener("blur",(function(event){console.log("The autofocus lost focus")}))}),310)}}}($timeout)})).directive("fileUpload",(function(){return{restrict:"A",link:function($scope,$element,$attrs){$element.bind("change",(function(event){var id=$attrs.id,vmclassId=$scope.ViewModelRoot["Curr_"+$attrs.vmclass]().VMClassId,maxFileSize=$attrs.maxfilesize;void 0!==maxFileSize?$scope.controller.onFileSelect(id,vmclassId,maxFileSize):$scope.controller.onFileSelect(id,vmclassId)}))}}})).directive("ngRightClick",(function($parse){return function($parse){return{restrict:"A",link:function($scope,$element,$attrs){var fn=$parse($attrs.ngRightClick);$element.bind("contextmenu",(function(event){$scope.$apply((function(){event.preventDefault(),fn($scope,{$event:event})}))}))}}}($parse)})).directive("tkDataTableRow",(function($timeout){return function($timeout){return{restrict:"A",link:function($scope,$element,$attrs){var timer,contextMenuButton=$element.find(".context-actions"),row=null;for(var key in $scope)if(key.startsWith("row")){row=$scope[key];break}$attrs.showactions,$element.on("click",(function($event){if(!$event.target.closest("td").classList.contains("multiselectcol")&&!$event.target.classList.contains("tk-checkbox__interactive")){var selectrow=!0;"INPUT"===$event.target.nodeName&&row.vCurrent&&(selectrow=!1),selectrow&&row.SetCurrentOnRowClick($event,$scope.$index,!1)}})),$element.on("dblclick",(function($event){"INPUT"!==$event.target.nodeName&&($event.preventDefault(),row.DblClickDispatcher($event),window.getSelection()&&window.getSelection().removeAllRanges())})),$element.on("contextmenu",(function($event){$event.preventDefault(),row.RightClickDispatcher($event)})),$element.on("touchstart",(function($event){timer=$timeout((function(){row.RightClickDispatcher($event),window.getSelection().removeAllRanges()}),500)})),$element.on("touchend",(function(evt){$timeout.cancel(timer)})),$element.on("touchcancel",(function(evt){$timeout.cancel(timer)})),contextMenuButton.on("click",(function($event){row.RightClickDispatcher($event)})),$scope.$on("$destroy",(function(e){$element.off()}))}}}($timeout)})).directive("customScripts",(function($routeParams){return function($routeParams){return{restrict:"A",link:function($scope,$element,$attrs){var scriptElement=document.createElement("script");scriptElement.src="View_Assets/".concat($routeParams.name,"/").concat($routeParams.name,".js"),scriptElement.id="custom.vm.scripts",document.body.appendChild(scriptElement),$scope.$on("$destroy",(function(){document.getElementById(scriptElement.id)&&document.body.removeChild(scriptElement)}))}}}($routeParams)})).directive("customStyles",(function($routeParams){return function($routeParams){return{restrict:"A",link:function($scope,$element,$attrs){var linkElement=document.createElement("link");linkElement.rel="stylesheet",linkElement.href="View_Assets/".concat($routeParams.name,"/").concat($routeParams.name,".css"),linkElement.id="custom.vm.styles",document.head.appendChild(linkElement),$scope.$on("$destroy",(function(){document.getElementById(linkElement.id)&&document.head.removeChild(linkElement)}))}}}($routeParams)})).directive("savebarActive",(function($animate,$compile){return function($animate,$compile){return{restrict:"A",link:function($scope,$element,$attrs){console.log($scope);var savebarComponent=angular.element("<tk-savebar>");$compile(savebarComponent)($scope),$animate.enter(savebarComponent,angular.element(document.body)),$scope.$on("$destroy",(function(){$animate.leave(savebarComponent)}))}}}($animate,$compile)})).directive("ripple",(function(){return{restrict:"A",link:function($scope,$element){$element.addClass("mdc-ripple-surface"),$element.attr("style","--mdc-ripple-color:".concat(getComputedStyle($element[0]).color));var ripple=MDCRipple.attachTo($element[0]);$scope.$on("$destroy",(function(){ripple.destroy()}))}}})).directive("pc",(function(){return{restrict:"A",link:function($scope,$element,$attrs){var row=null;for(var key in $scope)if(key.startsWith("row")){row=$scope[key];break}$element.on("click",(function($event){row.vCurrent=!0})),$element.on("contextmenu",(function($event){$event.preventDefault(),row.RightClickDispatcher($event)}))}}})).directive("tkAdvancedTable",(function($compile,$document){return advancedTable_directive($compile,$document)})).name;const directives=DirectivesModule;function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return function(self,call){if(call&&("object"===_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}(this,result)}}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,key=function(input,hint){if("object"!==_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"),"symbol"===_typeof(key)?key:String(key)),descriptor)}var arg,key}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var ServerUpdateCommand=_createClass((function ServerUpdateCommand(){_classCallCheck(this,ServerUpdateCommand)})),ServerUpdateCommand_AppInfo=function(_ServerUpdateCommand){_inherits(ServerUpdateCommand_AppInfo,_ServerUpdateCommand);var _super=_createSuper(ServerUpdateCommand_AppInfo);function ServerUpdateCommand_AppInfo(){return _classCallCheck(this,ServerUpdateCommand_AppInfo),_super.apply(this,arguments)}return _createClass(ServerUpdateCommand_AppInfo)}(ServerUpdateCommand),ServerUpdateCommand_Action=function(_ServerUpdateCommand2){_inherits(ServerUpdateCommand_Action,_ServerUpdateCommand2);var _super2=_createSuper(ServerUpdateCommand_Action);function ServerUpdateCommand_Action(){return _classCallCheck(this,ServerUpdateCommand_Action),_super2.apply(this,arguments)}return _createClass(ServerUpdateCommand_Action)}(ServerUpdateCommand),ServerUpdateCommand_Navigate=function(_ServerUpdateCommand3){_inherits(ServerUpdateCommand_Navigate,_ServerUpdateCommand3);var _super3=_createSuper(ServerUpdateCommand_Navigate);function ServerUpdateCommand_Navigate(){return _classCallCheck(this,ServerUpdateCommand_Navigate),_super3.apply(this,arguments)}return _createClass(ServerUpdateCommand_Navigate)}(ServerUpdateCommand),ServerUpdateCommand_ShowActionMenuForNesting=function(_ServerUpdateCommand4){_inherits(ServerUpdateCommand_ShowActionMenuForNesting,_ServerUpdateCommand4);var _super4=_createSuper(ServerUpdateCommand_ShowActionMenuForNesting);function ServerUpdateCommand_ShowActionMenuForNesting(){return _classCallCheck(this,ServerUpdateCommand_ShowActionMenuForNesting),_super4.apply(this,arguments)}return _createClass(ServerUpdateCommand_ShowActionMenuForNesting)}(ServerUpdateCommand),ServerUpdateCommand_DataError=function(_ServerUpdateCommand5){_inherits(ServerUpdateCommand_DataError,_ServerUpdateCommand5);var _super5=_createSuper(ServerUpdateCommand_DataError);function ServerUpdateCommand_DataError(){return _classCallCheck(this,ServerUpdateCommand_DataError),_super5.apply(this,arguments)}return _createClass(ServerUpdateCommand_DataError)}(ServerUpdateCommand),ServerUpdateCommand_ActionRemove=function(_ServerUpdateCommand6){_inherits(ServerUpdateCommand_ActionRemove,_ServerUpdateCommand6);var _super6=_createSuper(ServerUpdateCommand_ActionRemove);function ServerUpdateCommand_ActionRemove(){return _classCallCheck(this,ServerUpdateCommand_ActionRemove),_super6.apply(this,arguments)}return _createClass(ServerUpdateCommand_ActionRemove)}(ServerUpdateCommand),ServerUpdateCommand_IdChange=function(_ServerUpdateCommand7){_inherits(ServerUpdateCommand_IdChange,_ServerUpdateCommand7);var _super7=_createSuper(ServerUpdateCommand_IdChange);function ServerUpdateCommand_IdChange(){return _classCallCheck(this,ServerUpdateCommand_IdChange),_super7.apply(this,arguments)}return _createClass(ServerUpdateCommand_IdChange)}(ServerUpdateCommand),ServerUpdateCommand_UpdateAttribute=function(_ServerUpdateCommand8){_inherits(ServerUpdateCommand_UpdateAttribute,_ServerUpdateCommand8);var _super8=_createSuper(ServerUpdateCommand_UpdateAttribute);function ServerUpdateCommand_UpdateAttribute(){return _classCallCheck(this,ServerUpdateCommand_UpdateAttribute),_super8.apply(this,arguments)}return _createClass(ServerUpdateCommand_UpdateAttribute)}(ServerUpdateCommand),ServerUpdateCommand_Roundtrip=function(_ServerUpdateCommand9){_inherits(ServerUpdateCommand_Roundtrip,_ServerUpdateCommand9);var _super9=_createSuper(ServerUpdateCommand_Roundtrip);function ServerUpdateCommand_Roundtrip(){return _classCallCheck(this,ServerUpdateCommand_Roundtrip),_super9.apply(this,arguments)}return _createClass(ServerUpdateCommand_Roundtrip)}(ServerUpdateCommand),ServerUpdateCommand_UpdateCollection=function(_ServerUpdateCommand10){_inherits(ServerUpdateCommand_UpdateCollection,_ServerUpdateCommand10);var _super10=_createSuper(ServerUpdateCommand_UpdateCollection);function ServerUpdateCommand_UpdateCollection(){return _classCallCheck(this,ServerUpdateCommand_UpdateCollection),_super10.apply(this,arguments)}return _createClass(ServerUpdateCommand_UpdateCollection)}(ServerUpdateCommand),ServerUpdateCommand_ModalCodeClose=function(_ServerUpdateCommand11){_inherits(ServerUpdateCommand_ModalCodeClose,_ServerUpdateCommand11);var _super11=_createSuper(ServerUpdateCommand_ModalCodeClose);function ServerUpdateCommand_ModalCodeClose(){return _classCallCheck(this,ServerUpdateCommand_ModalCodeClose),_super11.apply(this,arguments)}return _createClass(ServerUpdateCommand_ModalCodeClose)}(ServerUpdateCommand),ServerUpdateCommand_ReportReadyForDownload=function(_ServerUpdateCommand12){_inherits(ServerUpdateCommand_ReportReadyForDownload,_ServerUpdateCommand12);var _super12=_createSuper(ServerUpdateCommand_ReportReadyForDownload);function ServerUpdateCommand_ReportReadyForDownload(){return _classCallCheck(this,ServerUpdateCommand_ReportReadyForDownload),_super12.apply(this,arguments)}return _createClass(ServerUpdateCommand_ReportReadyForDownload)}(ServerUpdateCommand),RoundtripAction=_createClass((function RoundtripAction(){_classCallCheck(this,RoundtripAction)})),ClientCommand=_createClass((function ClientCommand(){_classCallCheck(this,ClientCommand)})),ClientCommand_Update=function(_ClientCommand){_inherits(ClientCommand_Update,_ClientCommand);var _super13=_createSuper(ClientCommand_Update);function ClientCommand_Update(){return _classCallCheck(this,ClientCommand_Update),_super13.apply(this,arguments)}return _createClass(ClientCommand_Update)}(ClientCommand),ClientCommand_ActionExecute=function(_ClientCommand2){_inherits(ClientCommand_ActionExecute,_ClientCommand2);var _super14=_createSuper(ClientCommand_ActionExecute);function ClientCommand_ActionExecute(){return _classCallCheck(this,ClientCommand_ActionExecute),_super14.apply(this,arguments)}return _createClass(ClientCommand_ActionExecute)}(ClientCommand),ClientCommand_ActionRowClickExecute=function(_ClientCommand3){_inherits(ClientCommand_ActionRowClickExecute,_ClientCommand3);var _super15=_createSuper(ClientCommand_ActionRowClickExecute);function ClientCommand_ActionRowClickExecute(){return _classCallCheck(this,ClientCommand_ActionRowClickExecute),_super15.apply(this,arguments)}return _createClass(ClientCommand_ActionRowClickExecute)}(ClientCommand);function isMobileDevice(){return a=navigator.userAgent||navigator.vendor,/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4));var a}function getRootUrl(url){var rawUrl=/^.*\App#/i.exec(url);return rawUrl[0].substring(0,rawUrl[0].length-5)}function timeout_dialog_controller_typeof(obj){return timeout_dialog_controller_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},timeout_dialog_controller_typeof(obj)}function timeout_dialog_controller_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,timeout_dialog_controller_toPropertyKey(descriptor.key),descriptor)}}function timeout_dialog_controller_toPropertyKey(arg){var key=function(input,hint){if("object"!==timeout_dialog_controller_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==timeout_dialog_controller_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===timeout_dialog_controller_typeof(key)?key:String(key)}var obj,key,value,MDrivenTurnkeyTimeoutDialogController=function(){function MDrivenTurnkeyTimeoutDialogController($mdDialog,$timeout,$interval){var _this=this;!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,MDrivenTurnkeyTimeoutDialogController),this.$mdDialog=$mdDialog,this.$timeout=$timeout,this.$interval=$interval,this.timeLeft=30,this.$timeout((function(){_this.$interval.cancel(_this.timerBeforeTimeout),_this.okDialog()}),3e4),this.timerBeforeTimeout=this.$interval((function(){_this.timeLeft--}),1e3,30)}var Constructor,protoProps,staticProps;return Constructor=MDrivenTurnkeyTimeoutDialogController,(protoProps=[{key:"cancelDialog",value:function(){this.$mdDialog.cancel()}},{key:"okDialog",value:function(){this.$mdDialog.hide()}}])&&timeout_dialog_controller_defineProperties(Constructor.prototype,protoProps),staticProps&&timeout_dialog_controller_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),MDrivenTurnkeyTimeoutDialogController}();function app_client_service_typeof(obj){return app_client_service_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},app_client_service_typeof(obj)}function app_client_service_createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=function(o,minLen){if(!o)return;if("string"==typeof o)return app_client_service_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return app_client_service_arrayLikeToArray(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function(){};return{s:F,n:function(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function(){it=it.call(o)},n:function(){var step=it.next();return normalCompletion=step.done,step},e:function(_e2){didErr=!0,err=_e2},f:function(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function app_client_service_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function app_client_service_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function app_client_service_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,app_client_service_toPropertyKey(descriptor.key),descriptor)}}function app_client_service_createClass(Constructor,protoProps,staticProps){return protoProps&&app_client_service_defineProperties(Constructor.prototype,protoProps),staticProps&&app_client_service_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}function app_client_service_defineProperty(obj,key,value){return(key=app_client_service_toPropertyKey(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function app_client_service_toPropertyKey(arg){var key=function(input,hint){if("object"!==app_client_service_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==app_client_service_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===app_client_service_typeof(key)?key:String(key)}obj=MDrivenTurnkeyTimeoutDialogController,value=["$mdDialog","$timeout","$interval"],(key=timeout_dialog_controller_toPropertyKey(key="$inject"))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value;var AngularEventConstants={$ProcessingServerMessagesComplete:"ProcessingServerMessagesComplete",$NavigateWithinApp:"NavigateWithinApp",$OpenModalWindow:"OpenModalWindow",$WindowHeaderName:"WindowHeaderName",$GlobalMenuEnableVisible:"GlobalMenuEnableVisible",$ShowActionMenu:"ShowActionMenu",$StateActionExecute:"StateActionExecute",$ActionExecute:"ActionExecute",$OpenModalWindowFromPopup:"OpenModalWindowFromPopup"},StreamingAppClient=function(){function StreamingAppClient($http,$timeout,$location,$q,$ViewDataService,$mdDialog){app_client_service_classCallCheck(this,StreamingAppClient),app_client_service_defineProperty(this,"MyClientId",void 0),app_client_service_defineProperty(this,"SignalRClientId",""),app_client_service_defineProperty(this,"RenderAsUserControl",!1),app_client_service_defineProperty(this,"RenderAsUserControlParentId",""),app_client_service_defineProperty(this,"delayBeforeTimeout",-1),app_client_service_defineProperty(this,"_ClientShuttingDown",!1),app_client_service_defineProperty(this,"_ticketNumber",0),app_client_service_defineProperty(this,"_loadingTicket",0),app_client_service_defineProperty(this,"_loadingErrorCount",0),app_client_service_defineProperty(this,"_loadingSuccessCount",0),app_client_service_defineProperty(this,"_lastCommunicationEnded",0),app_client_service_defineProperty(this,"_lastCommunicationStarted",0),app_client_service_defineProperty(this,"_LoadingTimeoutPromise",void 0),app_client_service_defineProperty(this,"ShowLoading",!1),app_client_service_defineProperty(this,"LastClickWasCtrlClick",!1),app_client_service_defineProperty(this,"LastActionElement",null),app_client_service_defineProperty(this,"LastClickEvent",null),app_client_service_defineProperty(this,"_PostUpdateTimeoutPromise",void 0),app_client_service_defineProperty(this,"updateCommandBatch",[]),app_client_service_defineProperty(this,"ActionCommandQueue",[]),app_client_service_defineProperty(this,"_roundtripActions",{}),app_client_service_defineProperty(this,"_PollServerTimeoutPromise",void 0),app_client_service_defineProperty(this,"_ActivePollServerDelay",void 0),app_client_service_defineProperty(this,"cMinutesBetweenLocationUpdate",3),this.$ViewDataService=$ViewDataService,this.$http=$http,this.$timeout=$timeout,this.$location=$location,this.$q=$q,this.$mdDialog=$mdDialog,this.ServerApiPath="./api/",this._DeferredToAfterServerPoll=[],this.ServerPollCompleteSubject=new Rx.Subject,console.log("StreamingViewModelClient created"),this.InitSignalRClientPushHub()}return app_client_service_createClass(StreamingAppClient,[{key:"GetMyClientId",value:function(){return void 0===this.MyClientId&&(this.MyClientId=(9999*Math.random()).toString()),this.MyClientId}},{key:"InitSignalRClientPushHub",value:function(){var _this=this,conn=$.connection;if(null!=conn){console.log("InitSignalRClientPushHub, connected to Framework server"),conn.clientPushHub.client.pullNowWeGotNews=function(){_this.PollServerAsSoonAsPossible(),console.log("SignalR Callback GotNews => PollServerAsSoonAsPossible")},conn.hub.start().done((function(){_this.SetClientIdFromSignalR(conn.hub.id),console.log("SignalR id set:"+conn.hub.id)})),conn.hub.error((function(error){console.log("SignalR Error "+error.message+", polling server again in 8s, reconnecting SignalR in 5s"),_this.SignalRClientId="",_this.PollServerWithDelay(8e3),_this.$timeout((function(){return _this.InitSignalRClientPushHub()}),5e3)})),conn.hub.disconnected((function(){console.log("SignalR Disconnected, polling server again in 8s, reconnecting SignalR in 5s"),_this.SignalRClientId="",_this.PollServerWithDelay(8e3),_this.$timeout((function(){return _this.InitSignalRClientPushHub()}),5e3)})),window.addEventListener("beforeunload",(function(){conn.hub.stop()}))}else{var connection=(new signalR.HubConnectionBuilder).withUrl("./ClientPushHub").build();console.log(".Net Core InitSignalRClientPushHub, connected to .Net Core server"),connection.on("pullNowWeGotNews",(function(){_this.PollServerAsSoonAsPossible(),console.log(".Net Core SignalR Callback GotNews => PollServerAsSoonAsPossible")})),connection.start().then((function(){_this.SetClientIdFromSignalR(connection.connectionId),console.log("SignalR id set:"+connection.connectionId)})).catch((function(err){return console.error(".Net Core SignalR Error "+err.toString())})),connection.onclose((function(){console.log(".Net Core SignalR Disconnected, polling server again in 8s, reconnecting SignalR in 5s"),_this.SignalRClientId="",_this.PollServerWithDelay(8e3),_this.$timeout((function(){_this.InitSignalRClientPushHub(),""!=_this.SignalRClientId&&_this.PollServerAsSoonAsPossible()}),5e3)})),window.addEventListener("beforeunload",(function(){connection.stop()}))}}},{key:"SetClientIdFromSignalR",value:function(id){console.log("SignalRClientPushHub SignalRClientId "+id),this.SignalRClientId=id,this.MyClientId=id}},{key:"OpenView",value:function(viewData,resetServerApp){var _this2=this,ticket=this.CommunicationStarted(),userControl="";this.RenderAsUserControl&&(userControl="&ucparentid="+this.RenderAsUserControlParentId),this.$http.get(this.ServerApiPath+"Open?VMClassId="+viewData.VMClassIdMultiView.asString+"&ResetServerApp="+resetServerApp.toString()+userControl).then((function(successResponse){viewData.VMId=successResponse.data.toString(),_this2.CommunicationEnded(!0,ticket),viewData.Clear(),_this2.PollServerAsSoonAsPossible()}),(function(errorResponse){_this2.CommunicationEnded(!1,ticket)}))}},{key:"HandleMainMenuAction",value:function(nameofGlobalAction){var _this3=this,ticket=this.CommunicationStarted();this.$http.get(this.ServerApiPath+"Open?VMClassId=MAINMENU;"+nameofGlobalAction+"&ResetServerApp=false").then((function(successResponse){var responce=successResponse.data.toString(),parts=responce.split("");responce=parts[0];var newid=new VMClassId;newid.asString=parts[1],_this3.CommunicationEnded(!0,ticket),_this3.$location.path("/".concat(newid.VMClassName,"/").concat(newid.VMObjectId))}),(function(errorResponse){_this3.CommunicationEnded(!1,ticket)}))}},{key:"SendResetToServer",value:function(viewData){this.OpenView(viewData,!0),this.Shutdown(),window.location.reload()}},{key:"UpdateVarsForScreenWidth",value:function(){var _step,_iterator=app_client_service_createForOfIteratorHelper(this.$ViewDataService.GetActiveViews());try{var _loop=function(){var viewData=_step.value;viewData.$scope.$apply((function(){var v=viewData.RootVMClassObject.VM_Variables;null!=v&&(v.vClientScreenWidth=window.innerWidth,v.vClientScreenHeight=window.innerHeight)}))};for(_iterator.s();!(_step=_iterator.n()).done;)_loop()}catch(err){_iterator.e(err)}finally{_iterator.f()}}},{key:"UpdateVarForMobileDevice",value:function(){var _step2,_iterator2=app_client_service_createForOfIteratorHelper(this.$ViewDataService.GetActiveViews());try{var _loop2=function(){var viewData=_step2.value;viewData.$scope.$apply((function(){var v=viewData.RootVMClassObject.VM_Variables;null!=v&&(v.vIsMobileDevice=isMobileDevice())}))};for(_iterator2.s();!(_step2=_iterator2.n()).done;)_loop2()}catch(err){_iterator2.e(err)}finally{_iterator2.f()}}},{key:"Shutdown",value:function(){this._ClientShuttingDown||(console.log("Shutdown of SteamingAppClient"),this._ClientShuttingDown=!0,this.CancelTimerForSending(),this.CancelTimerForServerPolling())}},{key:"CommunicationStarted",value:function(){var _this4=this,showLoadingAfterMs=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;return this._lastCommunicationStarted=Date.now(),this._ticketNumber++,this._loadingTicket=this._ticketNumber,void 0===this._LoadingTimeoutPromise&&(this._LoadingTimeoutPromise=this.$timeout((function(){return _this4.StartShowingLoading()}),showLoadingAfterMs)),this._ticketNumber}},{key:"StartShowingLoading",value:function(){this.ShowLoading=!0,this._LoadingTimeoutPromise=void 0}},{key:"OutstandingTicket",value:function(){return this._ticketNumber!==this._loadingSuccessCount+this._loadingErrorCount}},{key:"CommunicationEnded",value:function(success,ticket){this._lastCommunicationEnded=Date.now(),success?this._loadingSuccessCount++:this._loadingErrorCount++,this._ticketNumber==this._loadingSuccessCount+this._loadingErrorCount&&(void 0!==this._LoadingTimeoutPromise&&this.$timeout.cancel(this._LoadingTimeoutPromise),this._LoadingTimeoutPromise=void 0,this.ShowLoading=!1)}},{key:"ErrorCount",value:function(){return this._loadingErrorCount}},{key:"ScheduleTimerForSending",value:function(lag){var _this5=this;void 0===this._PostUpdateTimeoutPromise&&(this._PostUpdateTimeoutPromise=this.$timeout((function(){return _this5.SendMessagesDelegate()}),lag))}},{key:"CancelTimerForSending",value:function(){void 0!==this._PostUpdateTimeoutPromise&&this.$timeout.cancel(this._PostUpdateTimeoutPromise),this._PostUpdateTimeoutPromise=void 0}},{key:"SendMessagesDelegate",value:function(){this._PostUpdateTimeoutPromise=void 0,this.PostUpdatesAndProcessServerMessages()}},{key:"PostUpdatesAndProcessServerMessages",value:function(){var _this6=this;if(this.UpdateTimeoutTimer(),!0===this.httpPostInProgress)return this.ScheduleTimerForSending(500),!1;if(this.CancelTimerForSending(),0===this.updateCommandBatch.length){var _step3,_iterator3=app_client_service_createForOfIteratorHelper(this.$ViewDataService.GetAllViews());try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){_step3.value.AddUpdatedForServer(this.updateCommandBatch)}}catch(err){_iterator3.e(err)}finally{_iterator3.f()}}if(this.updateCommandBatch.length>0){var ticket=this.CommunicationStarted();this.httpPostInProgress=!0,this.$http.post(this.ServerApiPath+"UpdateMany",JSON.stringify(this.updateCommandBatch)).then((function(successResponse){_this6.CommunicationEnded(!0,ticket),_this6.httpPostInProgress=!1,_this6.updateCommandBatch.splice(0),!0===_this6.hasBeenErrorInSending&&(_this6.hasBeenErrorInSending=!1,_this6.ScheduleTimerForSending(500)),_this6.HandlePendingServerActions(),_this6.PollServerAsSoonAsPossible()}),(function(errorResponse){_this6.CommunicationEnded(!1,ticket),_this6.httpPostInProgress=!1,_this6.hasBeenErrorInSending=!0,_this6.ActionCommandQueue.splice(0),_this6.ScheduleTimerForSending(5e3)}))}else this.HandlePendingServerActions();return!0}},{key:"ExcelPluginDataSend",value:function(vmid,data){var fd=new FormData;fd.append("vmid",vmid),fd.append("pastedata",data);var config={method:"POST",url:this.ServerApiPath+"ExcelPlugin",headers:{"Content-Type":void 0,enctype:"multipart/form-data"}};this.$http.post(this.ServerApiPath+"ExcelPlugin",fd,config)}},{key:"ExportAsTabSep",value:function(vmid){this.$http.get(this.ServerApiPath+"ExportTabSep?VMId="+vmid+"&allOrJustPage=true")}},{key:"UpdateTimeoutTimer",value:function(delay){delay&&angular.isNumber(delay)&&(this.delayBeforeTimeout=delay),this.SetupTimeoutTimer(this.delayBeforeTimeout)}},{key:"SetupTimeoutTimer",value:function(delay){var _this7=this;this.ResetTimeout(),delay<=0||(window.Worker&&(this.timeoutWorker=new Worker("js/worker.js"),this.timeoutWorker.postMessage([delay]),this.timeoutWorker.onmessage=function(e){_this7.timeoutWorker.terminate(),_this7.Shutdown(),window.location.href=getRootUrl(window.location.href)+"/Turnkey/Timedout"}),this.timerForTimeout=this.$timeout((function(){var timeoutDialogConfig={clickOutsideToClose:!1,controller:"MDrivenTimeoutDialogController",controllerAs:"$ctrl",templateUrl:"./Content/tmpl/panels/timeout-dialog.tmpl.html"},rootUrl=getRootUrl(window.location.href);_this7.$mdDialog.show(timeoutDialogConfig).then((function(){_this7.Shutdown(),window.location.href=rootUrl+"/Turnkey/Timedout"}),(function(){_this7.$timeout.cancel(_this7.timerForTimeout),_this7.UpdateTimeoutTimer()}))}),6e4*delay))}},{key:"ResetTimeout",value:function(){this.timeoutWorker&&this.timeoutWorker.terminate(),this.timerForTimeout&&this.$timeout.cancel(this.timerForTimeout)}},{key:"CallServerActionRowClick",value:function(VMId,vmClassId,actionName){var cc=new ClientCommand_ActionRowClickExecute;cc.Action=actionName,cc.VMClassId=vmClassId.asString,cc.VMId=VMId,this.LastClickWasCtrlClick=!1,cc.ClientIdForNavigationVerification=this.GetMyClientId(),this.ActionCommandQueue.length<2&&this.ActionCommandQueue.push(cc),this.PostUpdatesAndProcessServerMessages()}},{key:"CallServerAction",value:function(VmId,vmClassName,actionName,$event){var cc=new ClientCommand_ActionExecute;cc.Action=actionName,cc.VMClassName=vmClassName,cc.VMId=VmId,this.LastClickWasCtrlClick=!1,$event&&(this.LastClickEvent=$event,$event.ctrlKey&&(this.LastClickWasCtrlClick=!0)),cc.ClientIdForNavigationVerification=this.GetMyClientId(),this.ActionCommandQueue.length<5&&this.ActionCommandQueue.push(cc),this.PostUpdatesAndProcessServerMessages()}},{key:"HandlePendingServerActions",value:function(){this.ActionCommandQueue.length>0&&(!0===this.InternalCallServerAction(this.ActionCommandQueue[0])&&this.ActionCommandQueue.splice(0,1),this.ActionCommandQueue.length>0&&this.ScheduleTimerForSending(1e3))}},{key:"InternalCallServerAction",value:function(cc){var _this8=this;if(!0===this.httpPostInProgress)return this.ScheduleTimerForSending(500),!1;this.httpPostInProgress=!0;var ticket=this.CommunicationStarted(),actionType="Action";cc instanceof ClientCommand_ActionRowClickExecute&&(actionType="ActionRowClick");var self=this;return this.$http.post(this.ServerApiPath+actionType,JSON.stringify(cc)).then((function(successResult){_this8.httpPostInProgress=!1,self.CommunicationEnded(!0,ticket),_this8.PollServerAsSoonAsPossible()}),(function(errorResult){_this8.httpPostInProgress=!1,self.CommunicationEnded(!1,ticket)})),!0}},{key:"ExecuteAfterFullRoundtrip",value:function(VMId,key,data,callback){var rt=new RoundtripAction;rt.Key=key,rt.Data=data,rt.Callback=callback,this._roundtripActions[key]=rt,this.CallServerAction(VMId,"***ROUNDTRIPTHIS",key)}},{key:"DeferToServerPoll",value:function(){var deferred=this.$q.defer();return this._DeferredToAfterServerPoll.push(deferred),deferred.promise}},{key:"FulfillServerPoll",value:function(){for(;this._DeferredToAfterServerPoll.length>0;){this._DeferredToAfterServerPoll.pop().resolve()}}},{key:"ScheduleToPollServer",value:function(suggestedPollingIntervalInSecs){var thewait;this._ClientShuttingDown?this.CancelTimerForServerPolling():this._lastCommunicationStarted>this._lastCommunicationEnded||(0!==suggestedPollingIntervalInSecs?(thewait=1===suggestedPollingIntervalInSecs?100:1e3*suggestedPollingIntervalInSecs,this.PollServerWithDelay(thewait),thewait>3e3&&this.$ViewDataService.CleanOutOldViewData()):this.PollServerAsSoonAsPossible())}},{key:"PollServerAsSoonAsPossible",value:function(){this.PollServerWithDelay(20)}},{key:"PollServerWithDelay",value:function(aDelay){var _this9=this;if(!this._ClientShuttingDown&&(void 0===this._ActivePollServerDelay||aDelay<this._ActivePollServerDelay)&&(this.CancelTimerForServerPolling(),this._ActivePollServerDelay=aDelay,void 0===this._PollServerTimeoutPromise)){this._PollServerTimeoutPromise=this.$timeout((function(){return _this9.ServerPollDelegate()}),this._ActivePollServerDelay);this._PollServerTimeoutPromise.$$timeoutId}}},{key:"CancelTimerForServerPolling",value:function(){void 0!==this._PollServerTimeoutPromise&&this.$timeout.cancel(this._PollServerTimeoutPromise),this._PollServerTimeoutPromise=void 0,this._ActivePollServerDelay=void 0}},{key:"ServerPollDelegate",value:function(){this._PollServerTimeoutPromise=void 0;var showLoadingAfterMs=1e3;this._ActivePollServerDelay>3e3&&(showLoadingAfterMs=5e3),this._ActivePollServerDelay=void 0,this.OutstandingTicket()?this.PollServerAsSoonAsPossible():this.ProcessServerMessagesAsync(showLoadingAfterMs)}},{key:"ProcessServerMessagesAsync",value:function(showLoadingAfterMs){var _step4,_this10=this,_iterator4=app_client_service_createForOfIteratorHelper(this.$ViewDataService.GetActiveViews());try{var _loop3=function(){var viewDataRef=_step4.value,ticket=_this10.CommunicationStarted(showLoadingAfterMs),self=_this10,VmId=viewDataRef.VMId;_this10.$http.get(_this10.ServerApiPath+"ServerStream?cursor="+viewDataRef.ServerMessageCursor.toString()+"&VMId="+VmId+"&ClientId="+_this10.SignalRClientId).then((function(successResponse){self.CommunicationEnded(!0,ticket),self.processServerResponse(successResponse,viewDataRef),_this10.ScheduleToPollServer(viewDataRef.appInfo.SuggestedPollingIntervalInSecs)}),(function(errorResponse){self.CommunicationEnded(!1,ticket),_this10.ScheduleToPollServer(20)}))};for(_iterator4.s();!(_step4=_iterator4.n()).done;)_loop3()}catch(err){_iterator4.e(err)}finally{_iterator4.f()}}},{key:"typeSafeServerResponse",value:function(successResponse,viewDataRef){var _step5,commands=new Array,_iterator5=app_client_service_createForOfIteratorHelper(successResponse.data);try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var cs=_step5.value;if(cs.CType)if("ServerUpdateCommand_Action"===cs.CType){var actionUpdate=new ServerUpdateCommand_Action;actionUpdate.ViewDataReference=viewDataRef,actionUpdate.Action=cs.Action,actionUpdate.Enable=cs.Enable,actionUpdate.MNo=cs.MNo,actionUpdate.Presentation=cs.Presentation,actionUpdate.PresentationOfTarget=cs.PresentationOfTarget,actionUpdate.VMClassName=cs.VMClassName,actionUpdate.SortKey=cs.SortKey,actionUpdate.IsModal=cs.IsModal,actionUpdate.IsPopUp=cs.IsPopUp,actionUpdate.NewTab=cs.NewTab,actionUpdate.View=cs.View,actionUpdate.AreYouSureQuestion=cs.AreYouSureQuestion,actionUpdate.AreYouSureExecuteVerb=cs.AreYouSureExecuteVerb,actionUpdate.AreYouSureCancelVerb=cs.AreYouSureCancelVerb,actionUpdate.Class=cs.Class,actionUpdate.Icon=cs.Icon,actionUpdate.GroupHeader=cs.GroupHeader,actionUpdate.SubMenuGroup=cs.SubMenuGroup,actionUpdate.SubMenuGroupSortKey=cs.SubMenuGroupSortKey,actionUpdate.HintWhenDisabled=cs.HintWhenDisabled,actionUpdate.HintWhenEnabled=cs.HintWhenEnabled,actionUpdate.ActionRenderPosition=cs.ActionRenderPosition,commands.push(actionUpdate)}else if("ServerUpdateCommand_ActionRemove"===cs.CType){var actionRemove=new ServerUpdateCommand_ActionRemove;actionRemove.ViewDataReference=viewDataRef,actionRemove.Action=cs.Action,actionRemove.ActionRenderPosition=cs.ActionRenderPosition,actionRemove.MNo=cs.MNo,actionRemove.VMClassName=cs.VMClassName,commands.push(actionRemove)}else if("ServerUpdateCommand_IdChange"===cs.CType){var idChange=new ServerUpdateCommand_IdChange;idChange.ViewDataReference=viewDataRef,idChange.NewVMClassId=cs.NewVMClassId,idChange.OldVMClassId=cs.OldVMClassId,idChange.MNo=cs.MNo,commands.unshift(idChange)}else if("ServerUpdateCommand_UpdateAttribute"===cs.CType){var updateAttribute=new ServerUpdateCommand_UpdateAttribute;updateAttribute.ViewDataReference=viewDataRef,updateAttribute.AttributeName=cs.Attribute,updateAttribute.DataType=cs.DataType,updateAttribute.Value=cs.Value,updateAttribute.VMClassId=cs.VMClassId,updateAttribute.MNo=cs.MNo,commands.push(updateAttribute)}else if("ServerUpdateCommand_UpdateCollection"===cs.CType){var updateCollection=new ServerUpdateCommand_UpdateCollection;if(updateCollection.ViewDataReference=viewDataRef,updateCollection.Attribute=cs.Attribute,updateCollection.NewValuesStartIndex=cs.NewValuesStartIndex,updateCollection.OldValuesStartIndex=cs.OldValuesStartIndex,updateCollection.UpdateType=cs.UpdateType,updateCollection.VMClassId=cs.VMClassId,updateCollection.MNo=cs.MNo,updateCollection.NewValues=[],cs.NewValues)for(var one in cs.NewValues)updateCollection.NewValues.push(cs.NewValues[one]);if(updateCollection.OldValues=[],cs.OldValues)for(var _one in cs.OldValues)updateCollection.OldValues.push(cs.OldValues[_one]);commands.push(updateCollection)}else if("ServerUpdateCommand_Navigate"===cs.CType){var navigate=new ServerUpdateCommand_Navigate;navigate.ViewDataReference=viewDataRef,navigate.Url=cs.Url,navigate.MNo=cs.MNo,navigate.TargetIsInAppAndAngular=cs.TargetIsInAppAndAngular,navigate.View=cs.View,navigate.Id=cs.Id,navigate.ClientIdForNavigationVerification=cs.ClientIdForNavigationVerification,navigate.IsModal=cs.IsModal,navigate.IsPopUp=cs.IsPopUp,navigate.ActionName=cs.ActionName,navigate.NewTab=cs.NewTab,commands.push(navigate)}else if("ServerUpdateCommand_ShowActionMenuForNesting"===cs.CType){var showactionmenu=new ServerUpdateCommand_ShowActionMenuForNesting;showactionmenu.ViewDataReference=viewDataRef,showactionmenu.VMClassId=cs.VMClassId,showactionmenu.MNo=cs.MNo,showactionmenu.ClientIdForNavigationVerification=cs.ClientIdForNavigationVerification,commands.push(showactionmenu)}else if("ServerUpdateCommand_DataError"===cs.CType){var dataError=new ServerUpdateCommand_DataError;dataError.ViewDataReference=viewDataRef,dataError.Target=cs.Target,dataError.Message=cs.Message,dataError.MNo=cs.MNo,commands.push(dataError)}else if("ServerUpdateCommand_ModalCodeClose"===cs.CType){var modalclose=new ServerUpdateCommand_ModalCodeClose;modalclose.ViewDataReference=viewDataRef,modalclose.MNo=cs.MNo,modalclose.IsCloseWithOk=cs.IsCloseWithOk,modalclose.IsClosePopup=cs.IsClosePopup,commands.push(modalclose)}else if("ServerUpdateCommand_ReportReadyForDownload"===cs.CType){var download=new ServerUpdateCommand_ReportReadyForDownload;download.ViewDataReference=viewDataRef,download.ReportId=cs.ReportId,download.DownloadUrl=cs.DownloadUrl,download.MNo=cs.MNo,commands.push(download)}else if("ServerUpdateCommand_Roundtrip"===cs.CType){var roundTrip=new ServerUpdateCommand_Roundtrip;roundTrip.ViewDataReference=viewDataRef,roundTrip.ClientIdForNavigationVerification=cs.ClientIdForNavigationVerification,roundTrip.Key=cs.Key,roundTrip.MNo=cs.MNo,commands.push(roundTrip)}else if("ServerUpdateCommand_AppInfo"===cs.CType){var appInfo=new ServerUpdateCommand_AppInfo;if(appInfo.ViewDataReference=viewDataRef,appInfo.MNo=cs.MNo,appInfo.IsDirty=cs.IsDirty,appInfo.ServerQueueLength=cs.ServerQueueLength,appInfo.MessagesReceivedFromClient=cs.MessagesReceivedFromClient,appInfo.SuggestCallbackInSecs=cs.SuggestCallbackInSecs,appInfo.NumVmsInApp=cs.NumVmsInApp,appInfo.InstanceId=cs.InstanceId,appInfo.ServersHighestMNo=cs.ServersHighestMNo,appInfo.ServerStatus=cs.ServerStatus,appInfo.RootObjectStatus=cs.RootObjectStatus,appInfo.WindowHeader=cs.WindowHeader,appInfo.AsyncQueueCount=cs.AsyncQueueCount,appInfo.MarkersForActionsRunning=cs.MarkersForActionsRunning,appInfo.ServerInfoText=cs.ServerInfoText,appInfo.Debugmode=cs.Debugmode,appInfo.Error=cs.Error,appInfo.LostContext=cs.LostContext,appInfo.ServerAliveAt=cs.ServerAliveAt,appInfo.GlobalActionEorVName=[],appInfo.GlobalActionEorVEnable=[],appInfo.GlobalActionEorVVisible=[],cs.GlobalActionEorVName){for(var _one2 in cs.GlobalActionEorVName)appInfo.GlobalActionEorVName.push(cs.GlobalActionEorVName[_one2]);for(var _one3 in cs.GlobalActionEorVEnable)appInfo.GlobalActionEorVEnable.push(1==cs.GlobalActionEorVEnable[_one3]);for(var _one4 in cs.GlobalActionEorVVisible)appInfo.GlobalActionEorVVisible.push(1==cs.GlobalActionEorVVisible[_one4])}if(commands.push(appInfo),!0===appInfo.LostContext)break}}}catch(err){_iterator5.e(err)}finally{_iterator5.f()}return commands}},{key:"processServerResponse",value:function(successResponse,viewDataRef){try{viewDataRef.InDataImport(!0);var _step6,_iterator6=app_client_service_createForOfIteratorHelper(this.typeSafeServerResponse(successResponse,viewDataRef));try{for(_iterator6.s();!(_step6=_iterator6.n()).done;){var updateCommand=_step6.value;this.ProcessMessageFromServer(updateCommand)}}catch(err){_iterator6.e(err)}finally{_iterator6.f()}}finally{viewDataRef.InDataImport(!1)}this.GeoLocationUpdateWanted&&this.ConsiderUpdateGeoLocation(),viewDataRef.BroadCastClipbookDataChangedWhenDone&&(viewDataRef.BroadCastClipbookDataChangedWhenDone=!1,viewDataRef.$scope.$broadcast("__vClipbookDataChanged")),viewDataRef.BroadCastClientScriptExecuteDataChangedWhenDone&&(viewDataRef.BroadCastClientScriptExecuteDataChangedWhenDone=!1,viewDataRef.$scope.$broadcast("__vClientScriptExecuteDataChanged")),viewDataRef.BroadCastUserSidebarShowMemoryServerChange&&(viewDataRef.BroadCastUserSidebarShowMemoryServerChange=!1,viewDataRef.$scope.$broadcast("__UserSidebarShowMemoryServerChange")),viewDataRef.DataErrors.CheckCustomValidity(),viewDataRef.DoAfterServerMessages(),this.FulfillServerPoll(),this.ServerPollCompleteSubject.onNext(this),void 0!==viewDataRef.$scope&&viewDataRef.$scope.$broadcast(AngularEventConstants.$ProcessingServerMessagesComplete)}},{key:"ProcessMessageFromServer",value:function(serverUpdateCommand){var viewDataRef=serverUpdateCommand.ViewDataReference;if(void 0!==serverUpdateCommand.MNo?viewDataRef.ServerMessageCursor=serverUpdateCommand.MNo:console.warn("Recieved undefined ServerMessageCursor in command"),serverUpdateCommand instanceof ServerUpdateCommand_IdChange){viewDataRef.ServerUpdateCommand_IdChange(serverUpdateCommand);var idChange=serverUpdateCommand,oldPath="/"+idChange.OldVMClassId.substring(idChange.OldVMClassId.lastIndexOf(";")+1,100)+"/"+idChange.OldVMClassId.substring(0,idChange.OldVMClassId.lastIndexOf(";"));if(this.$location.path()===oldPath){var newPath="/"+idChange.NewVMClassId.substring(idChange.NewVMClassId.lastIndexOf(";")+1,100)+"/"+idChange.NewVMClassId.substring(0,idChange.NewVMClassId.lastIndexOf(";"));this.$location.replace(),this.$location.path(newPath)}}else if(serverUpdateCommand instanceof ServerUpdateCommand_UpdateAttribute)viewDataRef.ServerUpdateCommand_UpdateAttribute(serverUpdateCommand);else if(serverUpdateCommand instanceof ServerUpdateCommand_UpdateCollection)viewDataRef.ServerUpdateCommand_UpdateCollection(serverUpdateCommand);else if(serverUpdateCommand instanceof ServerUpdateCommand_ModalCodeClose)null!==viewDataRef.$scope.controller&&(serverUpdateCommand.IsClosePopup?viewDataRef.$scope.controller.closePopup():serverUpdateCommand.IsCloseWithOk?viewDataRef.$scope.controller.okModal():viewDataRef.$scope.controller.cancelModal());else if(serverUpdateCommand instanceof ServerUpdateCommand_Action)"GLOBAL"!==serverUpdateCommand.VMClassName?viewDataRef.CreateOrUpdateAction(serverUpdateCommand):(viewDataRef._stateActionsList.CreateOrUpdateAction(serverUpdateCommand,this,viewDataRef),viewDataRef.ActionsExist=void 0);else if(serverUpdateCommand instanceof ServerUpdateCommand_ActionRemove){var actionRemove=serverUpdateCommand;"GLOBAL"!==actionRemove.VMClassName?viewDataRef.DeleteAction(actionRemove):(viewDataRef._stateActionsList.DeleteAction(actionRemove),viewDataRef.ActionsExist=void 0)}else{if(serverUpdateCommand instanceof ServerUpdateCommand_Roundtrip){var roundTrip=serverUpdateCommand;return void 0===this.MyClientId||roundTrip.ClientIdForNavigationVerification===this.MyClientId||"AccessDenied"==roundTrip.ClientIdForNavigationVerification?void(this._roundtripActions[roundTrip.Key]&&(this.$timeout(this._roundtripActions[roundTrip.Key].Callback(this._roundtripActions[roundTrip.Key].Data),0),delete this._roundtripActions[roundTrip.Key])):void 0}if(serverUpdateCommand instanceof ServerUpdateCommand_Navigate){var navigate=serverUpdateCommand;if(void 0===this.MyClientId||null===navigate.ClientIdForNavigationVerification||navigate.ClientIdForNavigationVerification===this.MyClientId||"AccessDenied"===navigate.ClientIdForNavigationVerification){var lastClickWasCtrlClick=viewDataRef.StreamingAppClient.LastClickWasCtrlClick;return!lastClickWasCtrlClick&&navigate.NewTab&&(lastClickWasCtrlClick=!0),viewDataRef.StreamingAppClient.LastClickWasCtrlClick=!1,(navigate.IsModal||navigate.IsPopUp)&&lastClickWasCtrlClick&&(lastClickWasCtrlClick=!1),navigate.TargetIsInAppAndAngular&&!lastClickWasCtrlClick?void(navigate.IsModal||navigate.IsPopUp?viewDataRef.TryToHandleModalNavigationFromButtonAction(navigate):void 0!==viewDataRef.$scope?viewDataRef.$scope.$broadcast(AngularEventConstants.$NavigateWithinApp,viewDataRef.RootVMClassObject.VMClassId,navigate.View,navigate.Id,navigate.IsModal):console.warn("viewDataRef.$scope is undefined. wierd...")):"***BackwardsNav"===navigate.View?void window.history.back():void(lastClickWasCtrlClick||navigate.NewTab?window.open(navigate.Url,"_blank"):(viewDataRef.StreamingAppClient.Shutdown(),window.location.href=navigate.Url))}return}if(serverUpdateCommand instanceof ServerUpdateCommand_ShowActionMenuForNesting){var showActionMenu=serverUpdateCommand;if(void 0===this.MyClientId||null===showActionMenu.ClientIdForNavigationVerification||showActionMenu.ClientIdForNavigationVerification===this.MyClientId){var listitem=viewDataRef.GetObjectForVMClassId(showActionMenu.VMClassId);listitem&&viewDataRef.$scope.$broadcast(AngularEventConstants.$ShowActionMenu,listitem,viewDataRef.StreamingAppClient.LastClickEvent)}}else if(serverUpdateCommand instanceof ServerUpdateCommand_DataError)viewDataRef.DataErrors.ServerUpdateCommand_DataError(serverUpdateCommand);else if(serverUpdateCommand instanceof ServerUpdateCommand_ReportReadyForDownload){var reportReady=serverUpdateCommand;window.open(reportReady.DownloadUrl,"_blank")}else if(serverUpdateCommand instanceof ServerUpdateCommand_AppInfo){var appInfo=serverUpdateCommand;viewDataRef.appInfo.ServerUpdateCommand_AppInfo(appInfo),!0===appInfo.LostContext&&(console.warn("Server said LOSTCONTEXT. Reloading client."),this.Shutdown(),window.location.reload())}}}},{key:"DropObject",value:function(VMId,target,vmclassid,source){var _this11=this;console.log("DropObject: target: ",target,"| vmclassid: ",vmclassid,"| source: ",source.asString);var ticket=this.CommunicationStarted(),self=this;this.$http.get(this.ServerApiPath+"DragDropAction?VMId="+VMId+"&target="+target+"&source="+source.asString).then((function(successResult){self.CommunicationEnded(!0,ticket),_this11.PollServerAsSoonAsPossible()}),(function(errorResult){self.CommunicationEnded(!1,ticket)}))}},{key:"UploadFile",value:function(viewDataRef,target,vmclassid,data,filename){var _this12=this,fd=new FormData;fd.append("file",new Blob([data],{type:"blob"})),fd.append("vmid",viewDataRef.VMId),fd.append("target",target),fd.append("vmclassid",vmclassid),fd.append("filename",filename);var config={method:"POST",url:this.ServerApiPath+"UploadFileMultiPart",headers:{"Content-Type":void 0,enctype:"multipart/form-data"}};config.uploadEventHandlers={progress:function(e){e.lengthComputable?(viewDataRef["FileUploadPercent__"+target]=e.loaded/e.total*100,viewDataRef.$scope.$broadcast("".concat(target,"__uploadProgress"),e.loaded/e.total*100)):viewDataRef["FileUploadPercent__"+target]=0}};var ticket=this.CommunicationStarted();this.$http.post(this.ServerApiPath+"UploadFileMultiPart",fd,config).then((function(successResult){_this12.CommunicationEnded(!0,ticket),_this12.PollServerAsSoonAsPossible(),viewDataRef["FileUploadName__"+target]=filename,viewDataRef.$scope.$broadcast("".concat(target,"__uploadIsDone"))}),(function(errorResult){_this12.CommunicationEnded(!1,ticket)}))}},{key:"ConsiderUpdateGeoLocation",value:function(){var curdate=new Date,runUpdate=!1;this._lastTimeGeoLocationWasUpdated?+curdate>+new Date(this._lastTimeGeoLocationWasUpdated.getTime()+6e4*this.cMinutesBetweenLocationUpdate)&&(runUpdate=!0):runUpdate=!0;runUpdate&&(this.UpdateGeoLocation(),this._lastTimeGeoLocationWasUpdated=new Date)}},{key:"UpdateGeoLocation",value:function(){var _this13=this;navigator.geolocation?this._doGeoLocationPending||(this._doGeoLocationPending=!0,navigator.geolocation.getCurrentPosition((function(position){_this13.PositionRetrieved(position)}),(function(error){_this13.PositionError(error)}))):this.GeoLocationUpdateWanted=!1}},{key:"PositionRetrieved",value:function(position){var _step7,_iterator7=app_client_service_createForOfIteratorHelper(this.$ViewDataService.GetActiveViews());try{var _loop4=function(){var viewData=_step7.value;viewData.$scope.$apply((function(){viewData.RootVMClassObject.VM_Variables.vClientLongitude=position.coords.longitude,viewData.RootVMClassObject.VM_Variables.vClientLatitude=position.coords.latitude}))};for(_iterator7.s();!(_step7=_iterator7.n()).done;)_loop4()}catch(err){_iterator7.e(err)}finally{_iterator7.f()}this._doGeoLocationPending=!1}},{key:"PositionError",value:function(error){switch(error.code){case error.PERMISSION_DENIED:case error.POSITION_UNAVAILABLE:case error.TIMEOUT:this.GeoLocationUpdateWanted=!1}}},{key:"OpenModal",value:function(modalStartParams){""==modalStartParams.StartingActionObjectId&&(modalStartParams.StartingActionObjectId=modalStartParams.StartingAction.ViewData.GetCurrentForVMClass_ExternalId(modalStartParams.StartingAction.VMClassName)),this.$http.get(this.ServerApiPath+"OpenModal?SourceVMClassId="+modalStartParams.StartingAction.ViewData.VMClassIdMultiView.asString+"&ContextId="+modalStartParams.StartingActionObjectId+"&VMClassName="+modalStartParams.StartingAction.VMClassName+"&Action="+modalStartParams.StartingAction.ActionName).then((function(successResponse){modalStartParams.ModalVMObjectId=successResponse.data.toString(),modalStartParams.StartingAction.ViewData.$scope.$broadcast(AngularEventConstants.$OpenModalWindow,modalStartParams)}),(function(errorResponse){console.warn("Failed to get modal root ID")}))}},{key:"ModalHasClosed",value:function(modalStartParams,closedWithOk){var _this14=this;if(void 0!==modalStartParams.StartingAction){var ticket=this.CommunicationStarted(),self=this;this.$http.get(this.ServerApiPath+"ClosingModal?VMId="+modalStartParams.StartingAction.ViewData.VMId+"&ClosedWithOk="+String(closedWithOk)+"&Action="+modalStartParams.StartingAction.ActionName+"&VMIdForModal="+modalStartParams.ModalVMId+"&ActionContextId="+modalStartParams.StartingActionObjectId).then((function(successResult){self.CommunicationEnded(!0,ticket),_this14.PollServerAsSoonAsPossible()}),(function(errorResult){self.CommunicationEnded(!1,ticket)}))}}}]),StreamingAppClient}();app_client_service_defineProperty(StreamingAppClient,"$inject",["$http","$timeout","$location","$q","ViewDataService","$mdDialog"]);var ModalStartParams=app_client_service_createClass((function ModalStartParams(startingAction){var forVMClassObject=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,isPopUp=arguments.length>2&&void 0!==arguments[2]&&arguments[2],startingActionObjectId=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";app_client_service_classCallCheck(this,ModalStartParams),this.StartingAction=startingAction,this.ForVMClassObject=forVMClassObject,this.IsPopUp=isPopUp,this.StartingActionObjectId=startingActionObjectId}));function actions_typeof(obj){return actions_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},actions_typeof(obj)}function actions_toConsumableArray(arr){return function(arr){if(Array.isArray(arr))return actions_arrayLikeToArray(arr)}(arr)||function(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||actions_unsupportedIterableToArray(arr)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function actions_createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=actions_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function(){};return{s:F,n:function(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function(){it=it.call(o)},n:function(){var step=it.next();return normalCompletion=step.done,step},e:function(_e2){didErr=!0,err=_e2},f:function(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function actions_unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return actions_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?actions_arrayLikeToArray(o,minLen):void 0}}function actions_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function actions_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function actions_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,actions_toPropertyKey(descriptor.key),descriptor)}}function actions_createClass(Constructor,protoProps,staticProps){return protoProps&&actions_defineProperties(Constructor.prototype,protoProps),staticProps&&actions_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}function actions_toPropertyKey(arg){var key=function(input,hint){if("object"!==actions_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==actions_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===actions_typeof(key)?key:String(key)}var Action=function(){function Action(appClient,viewData){actions_classCallCheck(this,Action),this.StreamingAppClient=appClient,this.ViewData=viewData}return actions_createClass(Action,[{key:"UpdateFromActionCommand",value:function(actionCommand){this.VMClassName=actionCommand.VMClassName,this.ActionName=actionCommand.Action,this.Enable=actionCommand.Enable,this.Presentation=actionCommand.Presentation,this.PresentationOfTarget=actionCommand.PresentationOfTarget,this.ServerSortKey=actionCommand.SortKey,this.ActionSortKey=actionCommand.SortKey,this.IsModal=actionCommand.IsModal,this.IsPopUp=actionCommand.IsPopUp,this.View=actionCommand.View,this.AreYouSureQuestion=actionCommand.AreYouSureQuestion,this.AreYouSureExecuteVerb=actionCommand.AreYouSureExecuteVerb||"Ok",this.AreYouSureCancelVerb=actionCommand.AreYouSureCancelVerb||"Cancel",this.Class=actionCommand.Class,this.Icon=actionCommand.Icon,this.GroupHeader=actionCommand.GroupHeader,this.SubMenuGroup=actionCommand.SubMenuGroup,this.SubMenuGroupSortKey=actionCommand.SubMenuGroupSortKey,this.HintWhenEnabled=actionCommand.HintWhenEnabled||null,this.ActionRenderPosition=actionCommand.ActionRenderPosition,this.ContextIdIfKnown="",this.IsOptedOutButUsedInButtons=actionCommand.IsOptedOutButUsedInButtons,null!=this.ViewData&&this.ViewData.GetUsesTheToolbarInit(this.ActionRenderPosition)}},{key:"Execute",value:function(){var $event=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;this.ExecuteInternal(void 0,$event)}},{key:"ExecuteAfterModal",value:function(forVMClassObject,$event){this.ExecuteInternal(forVMClassObject,$event)}},{key:"ExecuteInternal",value:function(){var _this=this,forVMClassObject=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,$event=arguments.length>1?arguments[1]:void 0;if($event&&(this.StreamingAppClient.LastClickEvent=$event,this.StreamingAppClient.LastClickWasCtrlClick=$event.ctrlKey),this.AreYouSureQuestion){var confirm=this.StreamingAppClient.$mdDialog.confirm().textContent(this.AreYouSureQuestion).ok(this.AreYouSureExecuteVerb).cancel(this.AreYouSureCancelVerb).multiple(!0);this.StreamingAppClient.$mdDialog.show(confirm).then((function(value){_this.ExecuteInternalHelper(forVMClassObject,$event)}),(function(){}))}else this.ExecuteInternalHelper(forVMClassObject,$event)}},{key:"ExecuteInternalHelper",value:function(forVMClassObject,$event){var _this2=this;if(this.IsModal||this.IsPopUp)this.StreamingAppClient.OpenModal(new ModalStartParams(this,forVMClassObject,this.IsPopUp,this.ContextIdIfKnown));else if(this.IsPurelyLocalAction)if("SpecialAction__SeekerGridMore_ImportClipbook"==this.ActionName){navigator.clipboard.readText().then((function(text){_this2.StreamingAppClient.ExcelPluginDataSend(_this2.ViewData.VMId,text)}));this.ViewData.$scope.$broadcast(AngularEventConstants.$StateActionExecute,this.ActionName)}else"SpecialAction__SeekerGridMore_ExportAsFile"==this.ActionName&&(this.StreamingAppClient.ExportAsTabSep(this.ViewData.VMId),this.ViewData.$scope.$broadcast(AngularEventConstants.$StateActionExecute,this.ActionName));else this.StreamingAppClient.CallServerAction(this.ViewData.VMId,this.VMClassName,this.ActionName,$event),this.ViewData.$scope.$broadcast(AngularEventConstants.$StateActionExecute,this.ActionName)}},{key:"ActionDisableAndDesignedClass",value:function(){return this.Enable?this.Class:"disabled"}}]),Action}(),ActionList=function(){function ActionList(){actions_classCallCheck(this,ActionList),this.Actions=[]}return actions_createClass(ActionList,[{key:"NotEmpty",value:function(){return 0!==this.Actions.length}},{key:"FindAction",value:function(actionName){var foundActions=this.Actions.filter((function(a){return a.ActionName===actionName}));return foundActions.length>0?foundActions[0]:void 0}},{key:"CreateOrUpdateAction",value:function(actionCommand,appClient,viewData){var foundAction=this.FindAction(actionCommand.Action);if(void 0!==foundAction)foundAction.UpdateFromActionCommand(actionCommand);else{var newAction=new Action(appClient,viewData);newAction.UpdateFromActionCommand(actionCommand),this.Actions.push(newAction),this.Actions.sort((function(a,b){return a.ActionSortKey.localeCompare(b.ActionSortKey)}))}}},{key:"DeleteAction",value:function(removeCommand){var foundAction=this.FindAction(removeCommand.Action);void 0!==foundAction&&this.Actions.splice(this.Actions.indexOf(foundAction),1)}}]),ActionList}(),ActionGroup=function(){function ActionGroup(actionGroupName,actionGroupPresentation,actionGroupSortKey,actionRenderPosition){actions_classCallCheck(this,ActionGroup),this.ActionGroupName=actionGroupName,this.ActionGroupPresentation=actionGroupPresentation,this.ActionGroupSortKey=actionGroupSortKey,this.ActionRenderPosition=actionRenderPosition,this.SubMenuGroups=[]}return actions_createClass(ActionGroup,[{key:"NotEmpty",value:function(){var _step,_iterator=actions_createForOfIteratorHelper(this.SubMenuGroups);try{for(_iterator.s();!(_step=_iterator.n()).done;){if(_step.value.ActionList.NotEmpty())return!0}}catch(err){_iterator.e(err)}finally{_iterator.f()}return!1}},{key:"EnsureSubMenuGroupByName",value:function(subMenuGroupName,subMenuGroupSortKey){var actionSubMenuGroup=this.SubMenuGroups.filter((function(smg){return smg.SubMenuGroupName===subMenuGroupName}));if(actionSubMenuGroup.length>0)return actionSubMenuGroup[0];var smg=new ActionSubMenuGroup(subMenuGroupName,subMenuGroupSortKey);return this.SubMenuGroups.push(smg),smg}},{key:"AllActions",value:function(){var allActions=[];return this.SubMenuGroups.forEach((function(smg){return allActions.push.apply(allActions,actions_toConsumableArray(smg.ActionList.Actions))})),allActions}},{key:"FindActionByName",value:function(actionName){var actions=this.AllActions().filter((function(act){return act.ActionName===actionName}));return actions.length>0?actions[0]:void 0}},{key:"Clear",value:function(){this.SubMenuGroups.forEach((function(smg){return smg.Clear()})),this.SubMenuGroups.length=0}}]),ActionGroup}(),ActionGroups=function(){function ActionGroups(){actions_classCallCheck(this,ActionGroups),this.ActionGroups=[]}return actions_createClass(ActionGroups,[{key:"NotEmpty",value:function(){var _step2,_iterator2=actions_createForOfIteratorHelper(this.ActionGroups);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){if(_step2.value.NotEmpty())return!0}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}return!1}},{key:"FindGroupByName",value:function(actionGroupName,actionRenderPosition){var actionGroups=this.ActionGroups.filter((function(ag){return ag.ActionGroupName===actionGroupName&&ag.ActionRenderPosition==actionRenderPosition}));return actionGroups.length>0?actionGroups[0]:void 0}},{key:"FindGroupByNameAnyRenderPosition",value:function(actionGroupName){var actionGroups=this.ActionGroups.filter((function(ag){return ag.ActionGroupName===actionGroupName}));return actionGroups.length>0?actionGroups[0]:void 0}},{key:"EnsureGroupByName",value:function(actionGroupName,actionGroupPresentation,actionGroupSortKey,actionRenderPosition){var foundActionGroup=this.FindGroupByName(actionGroupName,actionRenderPosition);if(void 0!==foundActionGroup)return foundActionGroup;var g=new ActionGroup(actionGroupName,actionGroupPresentation,actionGroupSortKey,actionRenderPosition);return this.ActionGroups.push(g),g}},{key:"Clear",value:function(){this.ActionGroups.forEach((function(ag){return ag.Clear()})),this.ActionGroups.length=0}}]),ActionGroups}(),ActionSubMenuGroup=function(){function ActionSubMenuGroup(subMenuGroupName,subMenuGroupSortKey){actions_classCallCheck(this,ActionSubMenuGroup),this.SubMenuGroupName=subMenuGroupName,this.SubMenuGroupSortKey=subMenuGroupSortKey,this.ActionList=new ActionList}return actions_createClass(ActionSubMenuGroup,[{key:"Clear",value:function(){this.ActionList.Actions.length=0}}]),ActionSubMenuGroup}();function view_meta_service_typeof(obj){return view_meta_service_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},view_meta_service_typeof(obj)}function _regeneratorRuntime(){_regeneratorRuntime=function(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==view_meta_service_typeof(value)&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName,nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function view_meta_service_createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=function(o,minLen){if(!o)return;if("string"==typeof o)return view_meta_service_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return view_meta_service_arrayLikeToArray(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function(){};return{s:F,n:function(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function(){it=it.call(o)},n:function(){var step=it.next();return normalCompletion=step.done,step},e:function(_e2){didErr=!0,err=_e2},f:function(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function view_meta_service_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function view_meta_service_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function view_meta_service_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,view_meta_service_toPropertyKey(descriptor.key),descriptor)}}function view_meta_service_createClass(Constructor,protoProps,staticProps){return protoProps&&view_meta_service_defineProperties(Constructor.prototype,protoProps),staticProps&&view_meta_service_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}function view_meta_service_toPropertyKey(arg){var key=function(input,hint){if("object"!==view_meta_service_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==view_meta_service_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===view_meta_service_typeof(key)?key:String(key)}var ViewMeta=function(){function ViewMeta(){view_meta_service_classCallCheck(this,ViewMeta)}return view_meta_service_createClass(ViewMeta,[{key:"addTaggedValue",value:function(tv){void 0===this.VMTaggedValues&&(this.VMTaggedValues=[]),this.VMTaggedValues.push(tv)}},{key:"addControl",value:function(control){void 0===this.Controls&&(this.Controls=[]),this.Controls.push(control)}},{key:"addGlobalSetting",value:function(setting){void 0===this.GlobalSettings&&(this.GlobalSettings=[]),this.GlobalSettings.push(setting)}},{key:"getTaggedValues",value:function(){return this.VMTaggedValues}},{key:"getControls",value:function(){return this.Controls}},{key:"getValueForTaggedValueName",value:function(name){if(this.VMTaggedValues){var matches=this.VMTaggedValues.filter((function(tv){return tv.name===name}));if(matches.length>0)return matches[0].thevalue}return""}},{key:"getValueForTaggedValueNameAsNumber",value:function(name){return Number(this.getValueForTaggedValueName(name))}},{key:"getValueForTaggedValueNameAsBool",value:function(name){return"true"==this.getValueForTaggedValueName(name).toLowerCase()}},{key:"getValueForGlobalSettingName",value:function(name){if(this.GlobalSettings){var matches=this.GlobalSettings.filter((function(gs){return gs.name===name}));return matches.length>0?matches[0].thevalue:""}}}]),ViewMeta}(),Control=function(){function Control(attributes){view_meta_service_classCallCheck(this,Control);var _step,_iterator=view_meta_service_createForOfIteratorHelper(attributes);try{for(_iterator.s();!(_step=_iterator.n()).done;){var attr=_step.value;Object.defineProperty(this,attr.name,{value:attr.value,enumerable:!0,writable:!1})}}catch(err){_iterator.e(err)}finally{_iterator.f()}}return view_meta_service_createClass(Control,[{key:"addTaggedValue",value:function(tv){void 0===this.taggedValues&&(this.taggedValues=[]),this.taggedValues.push(tv)}},{key:"addChildControl",value:function(control){void 0===this.children&&(this.children=[]),this.children.push(control)}},{key:"getChildControls",value:function(){return this.children}},{key:"getTaggedValues",value:function(){return this.taggedValues}},{key:"getTaggedValueByNameAsBool",value:function(name){void 0===this.taggedValues&&(this.taggedValues=[]);var tv=this.taggedValues.filter((function(tv){return tv.name===name}))[0];return!(!tv||!tv.thevalue)&&"true"==tv.thevalue.toLowerCase()}}]),Control}(),TaggedValue=view_meta_service_createClass((function TaggedValue(inputName,inputValue){view_meta_service_classCallCheck(this,TaggedValue),this.name=inputName,this.thevalue=inputValue})),GlobalSetting=view_meta_service_createClass((function GlobalSetting(inputName,inputValue){view_meta_service_classCallCheck(this,GlobalSetting),this.name=inputName,this.thevalue=inputValue})),ViewMetaService=function(){function ViewMetaService($http,$route,$location){view_meta_service_classCallCheck(this,ViewMetaService),this.$http=$http,this.$route=$route,this.$location=$location}var _GetXMLFromServer,_GetViewMetaForCurrentView;return view_meta_service_createClass(ViewMetaService,[{key:"GetViewMetaForCurrentView",value:(_GetViewMetaForCurrentView=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(){var doc,viewMeta,rootTaggedValues,rootControls,globalSettings,_iterator2,_step2,tv,_iterator3,_step3,control,_iterator4,_step4,gs;return _regeneratorRuntime().wrap((function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,this.GetXMLFromServer();case 2:if(doc=_context.sent,viewMeta=new ViewMeta,rootTaggedValues=doc.querySelectorAll("root > tv"),rootControls=doc.querySelectorAll("root > control"),globalSettings=doc.querySelectorAll("root > gs"),rootTaggedValues.length>0){_iterator2=view_meta_service_createForOfIteratorHelper(rootTaggedValues);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;)tv=_step2.value,viewMeta.addTaggedValue(this.createTaggedValue(tv))}catch(err){_iterator2.e(err)}finally{_iterator2.f()}}if(rootControls.length>0){_iterator3=view_meta_service_createForOfIteratorHelper(rootControls);try{for(_iterator3.s();!(_step3=_iterator3.n()).done;)control=_step3.value,viewMeta.addControl(this.createControl(control))}catch(err){_iterator3.e(err)}finally{_iterator3.f()}}if(globalSettings.length>0){_iterator4=view_meta_service_createForOfIteratorHelper(globalSettings);try{for(_iterator4.s();!(_step4=_iterator4.n()).done;)gs=_step4.value,viewMeta.addGlobalSetting(this.createGlobalSetting(gs))}catch(err){_iterator4.e(err)}finally{_iterator4.f()}}return _context.abrupt("return",viewMeta);case 11:case"end":return _context.stop()}}),_callee,this)}))),function(){return _GetViewMetaForCurrentView.apply(this,arguments)})},{key:"GetXMLFromServer",value:(_GetXMLFromServer=_asyncToGenerator(_regeneratorRuntime().mark((function _callee2(){var _this$$route$current,xmlUri,viewModelName,response,xmlParser,xmlDoc;return _regeneratorRuntime().wrap((function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return xmlUri=getRootUrl(window.location.href)+"/Turnkey/ViewMeta?view=",viewModelName=(null===(_this$$route$current=this.$route.current)||void 0===_this$$route$current||null===(_this$$route$current=_this$$route$current.params)||void 0===_this$$route$current?void 0:_this$$route$current.name)||"",_context2.next=4,this.$http.get(xmlUri+viewModelName);case 4:return response=_context2.sent,xmlParser=new DOMParser,xmlDoc=xmlParser.parseFromString(response.data,"text/xml"),console.log(xmlDoc),_context2.abrupt("return",xmlDoc);case 9:case"end":return _context2.stop()}}),_callee2,this)}))),function(){return _GetXMLFromServer.apply(this,arguments)})},{key:"createControl",value:function(control){var newControl=new Control(control.attributes),taggedValues=control.querySelectorAll(":scope > tv"),childControls=control.querySelectorAll("control");if(taggedValues.length>0){var _step5,_iterator5=view_meta_service_createForOfIteratorHelper(taggedValues);try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var tv=_step5.value;newControl.addTaggedValue(this.createTaggedValue(tv))}}catch(err){_iterator5.e(err)}finally{_iterator5.f()}}if(childControls.length>0){var _step6,_iterator6=view_meta_service_createForOfIteratorHelper(childControls);try{for(_iterator6.s();!(_step6=_iterator6.n()).done;){var childControl=_step6.value;newControl.addChildControl(this.createControl(childControl))}}catch(err){_iterator6.e(err)}finally{_iterator6.f()}}return newControl}},{key:"createTaggedValue",value:function(tv){var name=tv.getAttribute("tag"),value=tv.getAttribute("value");return new TaggedValue(name,value)}},{key:"createGlobalSetting",value:function(gs){var name=gs.getAttribute("name"),value=gs.getAttribute("value");return new GlobalSetting(name,value)}}]),ViewMetaService}();!function(obj,key,value){(key=view_meta_service_toPropertyKey(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}(ViewMetaService,"$inject",["$http","$route","$location"]);var SystemEvents={$ViewMetaReady:"ViewMetaReady",$ViewDataReady:"ViewDataReady",$Error:"Error"};function view_data_service_typeof(obj){return view_data_service_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},view_data_service_typeof(obj)}function view_data_service_toConsumableArray(arr){return function(arr){if(Array.isArray(arr))return view_data_service_arrayLikeToArray(arr)}(arr)||function(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||view_data_service_unsupportedIterableToArray(arr)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _get(){return _get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(target,property,receiver){var base=function(object,property){for(;!Object.prototype.hasOwnProperty.call(object,property)&&null!==(object=view_data_service_getPrototypeOf(object)););return object}(target,property);if(base){var desc=Object.getOwnPropertyDescriptor(base,property);return desc.get?desc.get.call(arguments.length<3?target:receiver):desc.value}},_get.apply(this,arguments)}function view_data_service_setPrototypeOf(o,p){return view_data_service_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o},view_data_service_setPrototypeOf(o,p)}function view_data_service_createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=view_data_service_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=view_data_service_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return function(self,call){if(call&&("object"===view_data_service_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return view_data_service_assertThisInitialized(self)}(this,result)}}function view_data_service_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function view_data_service_getPrototypeOf(o){return view_data_service_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},view_data_service_getPrototypeOf(o)}function view_data_service_createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=view_data_service_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function(){};return{s:F,n:function(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function(){it=it.call(o)},n:function(){var step=it.next();return normalCompletion=step.done,step},e:function(_e2){didErr=!0,err=_e2},f:function(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function view_data_service_unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return view_data_service_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?view_data_service_arrayLikeToArray(o,minLen):void 0}}function view_data_service_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function view_data_service_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function view_data_service_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,view_data_service_toPropertyKey(descriptor.key),descriptor)}}function view_data_service_createClass(Constructor,protoProps,staticProps){return protoProps&&view_data_service_defineProperties(Constructor.prototype,protoProps),staticProps&&view_data_service_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}function view_data_service_defineProperty(obj,key,value){return(key=view_data_service_toPropertyKey(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function view_data_service_toPropertyKey(arg){var key=function(input,hint){if("object"!==view_data_service_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==view_data_service_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===view_data_service_typeof(key)?key:String(key)}var ViewModelDataStore,TableEventConstants={$ClickedRow:"ClickedRow",$DblClickedRow:"DblClickedRow",$RightClickedRow:"RightClickedRow"},VMClassId=function(){function VMClassId(){var VMObjectId=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,VMClassName=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;view_data_service_classCallCheck(this,VMClassId),view_data_service_defineProperty(this,"_VMClassId",void 0),view_data_service_defineProperty(this,"_VMObjectId",ExternalIdNullString),view_data_service_defineProperty(this,"_VMClassName",void 0),void 0!==VMObjectId&&void 0!==VMClassName&&(this.asString=VMObjectId+";"+VMClassName)}return view_data_service_createClass(VMClassId,[{key:"setVMObjectId",value:function(value){void 0!==value&&""!==value||(value=ExternalIdNullString),this._VMObjectId=value}},{key:"setVMClassId",value:function(VMObjectId,VMClassName){this._VMClassId=VMObjectId+";"+VMClassName}},{key:"VMClassName",get:function(){return this._VMClassName}},{key:"VMObjectId",get:function(){return this._VMObjectId}},{key:"asString",get:function(){return this._VMClassId},set:function(value){void 0!==value&&(this.setVMObjectId(value.split(";")[0]),this._VMClassName=value.split(";")[1],this.setVMClassId(this._VMObjectId,this._VMClassName))}},{key:"asPrettyString",value:function(){return"Viewmodel "+this.VMClassName+", object id "+this.VMObjectId}}]),VMClassId}(),VMClassObject=function(){function VMClassObject(viewdata){view_data_service_classCallCheck(this,VMClassObject),this.VMClassId=new VMClassId,this.ViewData=viewdata}return view_data_service_createClass(VMClassObject,[{key:"VM",value:function(){return this.ViewData.StreamingAppClient}},{key:"Execute",value:function(actionName,$event){this.ViewData.Execute(this.VMClassId.VMClassName,actionName,$event)}},{key:"ExecuteOnObject",value:function(actionName){var $event=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.ViewData.CallServerActionRowClick(this.VMClassId,actionName),null!==$event&&($event.stopPropagation(),$event.preventDefault())}},{key:"EnsureSubject",value:function(){return void 0===this.changeSubject&&(this.changeSubject=new Rx.Subject),this.changeSubject}},{key:"SubscribeToChanges",value:function(callback){this.EnsureSubject().subscribe(callback)}},{key:"EnsureHookedAttributeProperty",value:function(attributeName){var backerName="___"+attributeName;Object.prototype.hasOwnProperty.call(this,backerName)||(this[backerName]=void 0,Object.defineProperty(this,attributeName,{get:function(){return this[backerName]},set:function(newValue){this.setterFunction(attributeName,newValue)},enumerable:!0,configurable:!1}))}},{key:"setterFunction",value:function(attributeName,newValue){if("VMClassId"!==attributeName){var backerName="___"+attributeName;this.SetProp(attributeName,backerName,newValue)}}},{key:"SetProp",value:function(attributeName,backer,value){this[backer]=value;var lag=100;"vSelected"===attributeName&&(lag=30),this.QueueUpdateToServer(attributeName,lag)}},{key:"EnsureCurr_FunctionOnRoot",value:function(){if(!this.ViewData.RootVMClassObject.hasOwnProperty("Curr_"+this.VMClassId.VMClassName)){var targetthis=this.ViewData.RootVMClassObject,theVMClassName=this.VMClassId.VMClassName;this.ViewData.RootVMClassObject["Curr_"+theVMClassName]=function(){return targetthis.ViewData.GetCurrentForVMClass(theVMClassName)}}}},{key:"ValueAsString",value:function(value){if(null==value)return ExternalIdNullString;if(value.constructor===Object)return value.VMClassAsExternalId();if(value instanceof Date){var d=value;return this.ZeroPad(d.getFullYear(),4)+"-"+this.ZeroPad(d.getMonth()+1,2)+"-"+this.ZeroPad(d.getDate(),2)+"T"+this.ZeroPad(d.getHours(),2)+":"+this.ZeroPad(d.getMinutes(),2)+":"+this.ZeroPad(d.getSeconds(),2)+"."+this.ZeroPad(d.getMilliseconds(),3)+"Z"}return value.toString()}},{key:"ZeroPad",value:function(value,len){return("0"+value.toString()).slice(-len)}},{key:"IsADateButNotValid",value:function(value){return"[object Date]"===Object.prototype.toString.call(value)&&!!isNaN(value.getTime())}},{key:"ServerSetAttribute",value:function(attributeName,value,dataType){if(this.EnsureHookedAttributeProperty(attributeName),!this.ViewData.HasThisAttributeBouncedBack(this.VMClassId.asString,attributeName,value)){var backerName="___"+attributeName;this[backerName]=this.ConvertString(value,dataType),!attributeName.endsWith("_AsExternalId")||""!==this[backerName]&&null!==this[backerName]||(this[backerName]=ExternalIdNullString),"VM_Variables"===this.VMClassId.VMClassName&&("vClientLongitude"===attributeName?this.ViewData.StreamingAppClient.GeoLocationUpdateWanted=!0:"vClipbookData"===attributeName&&""!=value?this.ViewData.BroadCastClipbookDataChangedWhenDone=!0:"vClientScriptExecute"===attributeName&&""!=value?this.ViewData.BroadCastClientScriptExecuteDataChangedWhenDone=!0:"__UserSidebarShowMemory"===attributeName&&(this.ViewData.BroadCastUserSidebarShowMemoryServerChange=!0)),void 0!==this.changeSubject&&this.changeSubject.onNext(this)}}},{key:"QueueUpdateToServer",value:function(attributeName,delay){var membervalue=this[attributeName];if((null==membervalue||!membervalue.isArray)&&(null==membervalue||membervalue.constructor!==Object||membervalue.hasOwnProperty("VMClassAsExternalId"))&&!this.IsADateButNotValid(membervalue)){var value=this.ValueAsString(this[attributeName]);this.ViewData.QueueUpdateToServer(this.VMClassId.asString,attributeName,value,delay)}}},{key:"ConvertString",value:function(value,dataType){if("Nullable<System.String>"===dataType||"System.String"===dataType||"String"===dataType)return value===ExternalIdNullString?value=null:value;if("Nullable<System.Byte>"===dataType||"System.Byte"===dataType||"Byte"===dataType)return value===ExternalIdNullString?value=null:parseInt(value);if("Nullable<System.Int16>"===dataType||"System.Int16"===dataType||"Int16"===dataType)return value===ExternalIdNullString?value=null:parseInt(value);if("Nullable<System.Int32>"===dataType||"System.Int32"===dataType||"Int32"===dataType)return value===ExternalIdNullString?value=null:parseInt(value);if("Nullable<System.Int64>"===dataType||"System.Int64"===dataType||"Int64"===dataType)return value===ExternalIdNullString?value=null:parseInt(value);if("Nullable<System.Decimal>"===dataType||"System.Decimal"===dataType||"Decimal"===dataType)return value===ExternalIdNullString?value=null:parseFloat(value);if("Nullable<System.Double>"===dataType||"System.Double"===dataType||"Double"===dataType)return value===ExternalIdNullString?value=null:parseFloat(value);if("Nullable<System.DateTime>"===dataType||"System.DateTime"===dataType||"DateTime"===dataType){if(value===ExternalIdNullString)return value=null;var newDate=new Date(value.substr(0,value.length-1));return newDate.getFullYear()<=1&&(newDate=null),newDate}return"Nullable<System.TimeSpan>"===dataType||"System.TimeSpan"===dataType||"TimeSpan"===dataType?value===ExternalIdNullString?value=null:new Date(value.substr(0,value.length-1)):"Nullable<System.Boolean>"===dataType||"System.Boolean"===dataType||"Boolean"===dataType?value===ExternalIdNullString?value=null:"true"===value:value}},{key:"ClearChildObjects",value:function(){for(var _key in this){var _value=this[_key];if(_value instanceof Array){var _step,theArrayAttributeValue=_value,_iterator=view_data_service_createForOfIteratorHelper(theArrayAttributeValue);try{for(_iterator.s();!(_step=_iterator.n()).done;){var child=_step.value;child instanceof VMClassObject&&child.ClearChildObjects()}}catch(err){_iterator.e(err)}finally{_iterator.f()}theArrayAttributeValue.splice(0)}else _value instanceof Object&&_value!==this&&(_value=null)}}},{key:"ServerInsertIntoCollection",value:function(listAttributeName,listItemObject,position){this[listAttributeName]||(this[listAttributeName]=new Array),-1==this[listAttributeName].indexOf(listItemObject)&&this[listAttributeName].splice(position,0,listItemObject),listItemObject.VMClassParent=this,listItemObject.VMClassParentListAttribute=listAttributeName}},{key:"ServerRemoveFromCollection",value:function(listAttributeName,listItemObject){if(this[listAttributeName]){var pos=this[listAttributeName].indexOf(listItemObject);pos>-1&&this[listAttributeName].splice(pos,1),listItemObject.VMClassParent=null,listItemObject.VMClassParentListAttribute=null}}},{key:"ServerSetSingleAssociation",value:function(listAttributeName,associatedObject){this.EnsureHookedAttributeProperty(listAttributeName),this[listAttributeName]=associatedObject,associatedObject.VMClassParent=this}},{key:"RefreshAndReturnSorted",value:function(classname,listAttributeName){if(this[listAttributeName]){var ordercolumnname=this.ViewData.$scope[classname+"_OrderColumnName"],reverse=this.ViewData.$scope[classname+"_OrderColumnReverseState"];if(null==ordercolumnname||""==ordercolumnname)return this[listAttributeName];var sortedbackername=listAttributeName+"_SortedMem",sorted=Array.from(this[listAttributeName]);return this[sortedbackername]=sorted,sorted.sort((function(a,b){var _a$ordercolumnname,_b$ordercolumnname,valueA=null!==(_a$ordercolumnname=a[ordercolumnname])&&void 0!==_a$ordercolumnname?_a$ordercolumnname:"",valueB=null!==(_b$ordercolumnname=b[ordercolumnname])&&void 0!==_b$ordercolumnname?_b$ordercolumnname:"";return valueA<valueB?reverse?1:-1:valueA>valueB?reverse?-1:1:0})),sorted}return this[listAttributeName]}}]),VMClassObject}(),VMClassListItem=function(_VMClassObject){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&view_data_service_setPrototypeOf(subClass,superClass)}(VMClassListItem,_VMClassObject);var _super=view_data_service_createSuper(VMClassListItem);function VMClassListItem(viewData){var _this;return view_data_service_classCallCheck(this,VMClassListItem),view_data_service_defineProperty(view_data_service_assertThisInitialized(_this=_super.call(this,viewData)),"vCurrentChanging",!1),_this}return view_data_service_createClass(VMClassListItem,[{key:"ServerSetAttribute",value:function(attributeName,value,dataType){_get(view_data_service_getPrototypeOf(VMClassListItem.prototype),"ServerSetAttribute",this).call(this,attributeName,value,dataType),this.vCurrentChanging&&"vCurrent"===attributeName&&(this.vCurrentChanging=!1),"vSelected"===attributeName&&this.UpdateSelectedStateForTable(null)}},{key:"setterFunction",value:function(attributeName,newValue){if("vCurrent"===attributeName)!0!==this.___vCurrent&&!0===newValue&&this.SetVCurrentTrue();else if("VMClassId"!==attributeName){var backerName="___"+attributeName;_get(view_data_service_getPrototypeOf(VMClassListItem.prototype),"SetProp",this).call(this,attributeName,backerName,newValue)}}},{key:"SetVCurrentTrue",value:function(){var thelistToReset=this.VMClassParent[this.VMClassParentListAttribute];if(thelistToReset){var _step2,_iterator2=view_data_service_createForOfIteratorHelper(thelistToReset);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){_step2.value.___vCurrent=!1}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}}this.___vCurrent=!0,this.vCurrentChanging=!0,this.QueueUpdateToServer("vCurrent",30)}},{key:"GetActiveActions",value:function(){return[].concat(view_data_service_toConsumableArray(this.ViewData.ActionsByGroup(this.VMClassId.VMClassName,"LeftSide").filter((function(a){return a.Enable}))),view_data_service_toConsumableArray(this.ViewData.ActionsByGroup(this.VMClassId.VMClassName,"ContextMenu").filter((function(a){return a.Enable}))),view_data_service_toConsumableArray(this.ViewData.ActionsByGroup(this.VMClassId.VMClassName,"ToolBarLeft").filter((function(a){return a.Enable}))))}},{key:"SetCurrentOnRowClick",value:function($event,index){(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])&&window.getSelection().removeAllRanges();var tableElement=$event.target.closest("table"),hasMultiselect=tableElement&&tableElement.hasAttribute("multiselect");$event.shiftKey?this.selectWithShift(index,$event,hasMultiselect):$event.ctrlKey||$event.metaKey?this.ToggleRowSelection($event,hasMultiselect):(this.vCurrent=!0,void 0!==this.VMClassParent[this.VMClassParentListAttribute+"_isAllSelected"]&&(console.log("Selecting row and reset"),this.SelectRowAndReset(tableElement)))}},{key:"handleMultiRowSelect",value:function($event,rowIndex){var tableElement=$event.target.closest("table"),hasMultiselect=tableElement&&tableElement.hasAttribute("multiselect");$event.shiftKey?this.selectWithShift(rowIndex,$event,hasMultiselect):($event.ctrlKey||$event.metaKey||(this.vCurrent=!0),this.ToggleRowSelection($event,hasMultiselect)),this.UpdateSelectedStateForTable(tableElement)}},{key:"ToggleRowSelection",value:function($event,hasMultiselect){var tableelement=$event.target.closest("table");hasMultiselect?3===$event.which||2===$event.button||(this.vSelected=!this.vSelected):(this.vCurrent=!0,void 0!==this.VMClassParent[this.VMClassParentListAttribute+"_isAllSelected"]&&(console.log("Selecting row and reset"),this.SelectRowAndReset(tableelement))),this.UpdateSelectedStateForTable(tableelement)}},{key:"SelectRowAndReset",value:function(tableElement){var _this2=this;console.log("selectRowAndReset call"),this.vSelected=!0,this.VMClassParent[this.VMClassParentListAttribute].filter((function(row){return row.VMClassId!==_this2.VMClassId})).map((function(row){row.vSelected&&(row.vSelected=!1)})),this.UpdateSelectedStateForTable(tableElement)}},{key:"selectWithShift",value:function(index,$event,hasMultiselect){var table=this.VMClassParent[this.VMClassParentListAttribute+"_SortedMem"];table||(table=this.VMClassParent[this.VMClassParentListAttribute]);var indexOfLastSelected=table.indexOf(table.filter((function(row){return row.vCurrent}))[0]),selectFormIndex=Math.min(index,indexOfLastSelected),selectToIndex=Math.max(index,indexOfLastSelected);if($event.stopPropagation(),!0===this.vSelected&&$event.preventDefault(),this.resetSelection(table),hasMultiselect)for(var rowIndex=selectFormIndex;rowIndex<=selectToIndex;rowIndex++)table[rowIndex].vSelected=!0;else table[selectToIndex].vSelected=!0,table[selectToIndex].vCurrent=!0}},{key:"resetSelection",value:function(tableToReset){angular.forEach(tableToReset,(function(row){row.vSelected=!1}))}},{key:"UpdateSelectedStateForTable",value:function(tableElement){if(null!==this.VMClassParent&&void 0!==this.VMClassParent){var table=this.VMClassParent[this.VMClassParentListAttribute],selcountnow=table.filter((function(row){return row.vSelected})).length;this.VMClassParent[this.VMClassParentListAttribute+"_isAllSelected"]=table.length===selcountnow,this.VMClassParent[this.VMClassParentListAttribute+"_isIndeterminate"]=selcountnow>0&&!this.VMClassParent[this.VMClassParentListAttribute+"_isAllSelected"],selcountnow>1&&tableElement&&window.MDrivenCellSelectClear&&window.MDrivenCellSelectClear(tableElement)}}},{key:"Execute",value:function(actionName,$event){var _this3=this;if($event&&(this.ViewData.StreamingAppClient.LastClickEvent=$event,this.ViewData.StreamingAppClient.LastClickWasCtrlClick=$event.ctrlKey),this.vCurrent=!0,this.vCurrentChanging)var subscription=this.ViewData.StreamingAppClient.ServerPollCompleteSubject.subscribe((function(){_this3.vCurrentChanging||(subscription.dispose(),_get(view_data_service_getPrototypeOf(VMClassListItem.prototype),"Execute",_this3).call(_this3,actionName,$event))}));else _get(view_data_service_getPrototypeOf(VMClassListItem.prototype),"Execute",this).call(this,actionName,$event);$event&&($event.stopPropagation(),$event.preventDefault())}},{key:"ClickDispatcher",value:function(){var $event=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,index=arguments.length>1?arguments[1]:void 0,isOldMenuPrefered=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.ViewData.StreamingAppClient.LastClickWasCtrlClick=null!=$event&&$event.ctrlKey,this.ViewData.$scope.$broadcast(TableEventConstants.$ClickedRow,this,$event,index,isOldMenuPrefered),null!==$event&&(this.ViewData.StreamingAppClient.LastClickEvent=$event,$event.stopPropagation())}},{key:"RightClickDispatcher",value:function(){var $event=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,isOldMenuPrefered=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.ViewData.StreamingAppClient.LastClickWasCtrlClick=null!=$event&&$event.ctrlKey,this.ViewData.$scope.$broadcast(TableEventConstants.$RightClickedRow,this,$event,isOldMenuPrefered),null!==$event&&(this.ViewData.StreamingAppClient.LastClickEvent=$event,$event.stopPropagation())}},{key:"DblClickDispatcher",value:function(){var $event=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,isOldMenuPrefered=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.ViewData.StreamingAppClient.LastClickWasCtrlClick=null!=$event&&$event.ctrlKey,this.ViewData.$scope.$broadcast(TableEventConstants.$DblClickedRow,this,$event,isOldMenuPrefered),null!==$event&&(this.ViewData.StreamingAppClient.LastClickEvent=$event),$event.stopPropagation()}}]),VMClassListItem}(VMClassObject),AppInfo=function(){function AppInfo(viewData){view_data_service_classCallCheck(this,AppInfo),view_data_service_defineProperty(this,"SuggestedPollingIntervalInSecs",1),view_data_service_defineProperty(this,"InstanceId",-1),view_data_service_defineProperty(this,"ServersHighestMNo",-1),view_data_service_defineProperty(this,"ServerStatus",""),view_data_service_defineProperty(this,"WindowHeader",""),view_data_service_defineProperty(this,"RootObjectStatus",""),view_data_service_defineProperty(this,"AsyncQueueCount",-1),view_data_service_defineProperty(this,"MarkersForActionsRunning",-1),this.ViewData=viewData}return view_data_service_createClass(AppInfo,[{key:"ServerUpdateCommand_AppInfo",value:function(_ServerUpdateCommand_AppInfo){function ServerUpdateCommand_AppInfo(_x){return _ServerUpdateCommand_AppInfo.apply(this,arguments)}return ServerUpdateCommand_AppInfo.toString=function(){return _ServerUpdateCommand_AppInfo.toString()},ServerUpdateCommand_AppInfo}((function(appInfo){this.isDirty=appInfo.IsDirty,this.ServerQueueLength=appInfo.ServerQueueLength,this.MessagesReceivedFromClient=appInfo.MessagesReceivedFromClient,this.SuggestedPollingIntervalInSecs=appInfo.SuggestCallbackInSecs,this.NumVmsInApp=appInfo.NumVmsInApp,this.InstanceId=appInfo.InstanceId,this.ServersHighestMNo=appInfo.ServersHighestMNo,this.ServerStatus=appInfo.ServerStatus,this.WindowHeader=appInfo.WindowHeader,void 0!==this.ViewData.$scope&&this.ViewData.$scope.$broadcast(AngularEventConstants.$WindowHeaderName,this.WindowHeader),this.RootObjectStatus=appInfo.RootObjectStatus,this.AsyncQueueCount=appInfo.AsyncQueueCount,this.MarkersForActionsRunning=appInfo.MarkersForActionsRunning,this.ServerInfoText=appInfo.ServerInfoText,this.Debugmode=appInfo.Debugmode,this.Error=appInfo.Error,appInfo.Error&&this.ViewData.$scope.$broadcast("errorOccured"),this.LostContext=appInfo.LostContext,this.ServerAliveAt=appInfo.ServerAliveAt,appInfo.GlobalActionEorVName.length>0&&void 0!==this.ViewData.$scope&&this.ViewData.$scope.$broadcast(AngularEventConstants.$GlobalMenuEnableVisible,appInfo.GlobalActionEorVName,appInfo.GlobalActionEorVEnable,appInfo.GlobalActionEorVVisible)}))}]),AppInfo}(),ViewData=function(){function ViewData(appClient,rootVMClassID){view_data_service_classCallCheck(this,ViewData),view_data_service_defineProperty(this,"ServerMessageCursor",0),view_data_service_defineProperty(this,"LastUsedByScope",0),view_data_service_defineProperty(this,"VMClassIdMap",{}),view_data_service_defineProperty(this,"appInfo",new AppInfo(this)),view_data_service_defineProperty(this,"DataErrors",new DataErrors(this)),view_data_service_defineProperty(this,"_thisViewUsesTheToolbar",!1),view_data_service_defineProperty(this,"_inDataImport",!1),view_data_service_defineProperty(this,"_actionsRoot",new ActionGroups),view_data_service_defineProperty(this,"ActionsExist",void 0),view_data_service_defineProperty(this,"_stateActionsList",new ActionList),view_data_service_defineProperty(this,"_MessagesForServer",[]),view_data_service_defineProperty(this,"_MessageForServerDict",{}),view_data_service_defineProperty(this,"_bouncebackfilter",[]),this.StreamingAppClient=appClient,this.VMClassIdMultiView=new VMClassId(rootVMClassID.VMObjectId,rootVMClassID.VMClassName),rootVMClassID.VMObjectId.startsWith("$null$")&&"$null$"!=rootVMClassID.VMObjectId&&(rootVMClassID=new VMClassId("$null$",rootVMClassID.VMClassName)),this.RootVMClassObject=new VMClassObject(this),this.RootVMClassObject.VMClassId=rootVMClassID,this.VMClassIdMap[this.RootVMClassObject.VMClassId.asString]=this.RootVMClassObject,this.RootVMClassObject.EnsureCurr_FunctionOnRoot(),this.scrollPosition={windowScrollY:0,vmSectionScrollY:0}}return view_data_service_createClass(ViewData,[{key:"RootId",get:function(){return this.VMClassIdMultiView.VMObjectId}},{key:"ViewModelName",get:function(){return this.RootVMClassObject.VMClassId.VMClassName}},{key:"InDataImport",value:function(yesno){this._inDataImport=yesno}},{key:"IsInDataImport",value:function(){return this._inDataImport}},{key:"SaveAdvancedTableMetadata",value:function(name,tableData){this.AdvancedTablesMetadata||(this.AdvancedTablesMetadata=new Map),this.AdvancedTablesMetadata.set(name,tableData)}},{key:"GetAdvancedTableMetadata",value:function(name){if(this.AdvancedTablesMetadata)return this.AdvancedTablesMetadata.get(name)}},{key:"PublishOnScope",value:function($scope){this.$scope=$scope,$scope.ViewData=this,$scope.ViewModelRoot=this.GetRootObject(),$scope.root=this.GetRootObject(),this.LastUsedByScope=Date.now(),setTimeout((function(){$scope.$broadcast(SystemEvents.$ViewDataReady)}),0)}},{key:"ReleaseFromScope",value:function(){this.$scope.ViewData=null,this.$scope.ViewModelRoot=void 0,this.LastUsedByScope=Date.now(),this.$scope=void 0}},{key:"ExecuteAfterFullRoundtrip",value:function(key,data,callback){this.StreamingAppClient.ExecuteAfterFullRoundtrip(this.VMId,key,data,callback)}},{key:"GetRootObject",value:function(){return this.RootVMClassObject}},{key:"GetCurrentForVMClass_ExternalId",value:function(nameOfVMClass){if(this.RootVMClassObject&&this.RootVMClassObject.VM_Variables){var VMObjectIdforcurrent=this.RootVMClassObject.VM_Variables["vCurrent_"+nameOfVMClass];if(null!==VMObjectIdforcurrent)return VMObjectIdforcurrent}return ExternalIdNullString}},{key:"GetCurrentForVMClass",value:function(nameOfVMClass){var VMObjectIdforcurrent=this.GetCurrentForVMClass_ExternalId(nameOfVMClass);return this.VMClassIdMap[new VMClassId(VMObjectIdforcurrent,nameOfVMClass).asString]}},{key:"GetObjectForVMClassId",value:function(VMClassId){return this.VMClassIdMap[VMClassId]?this.VMClassIdMap[VMClassId]:null}},{key:"EnsureExistanceAndIndexing",value:function(VMClassId){var CreateNewFunction=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,vmObject=void 0;return this.VMClassIdMap[VMClassId]?vmObject=this.VMClassIdMap[VMClassId]:((vmObject=void 0!==CreateNewFunction?CreateNewFunction(this):new VMClassObject(this)).VMClassId.asString=VMClassId,this.VMClassIdMap[vmObject.VMClassId.asString]=vmObject,vmObject.EnsureCurr_FunctionOnRoot()),vmObject}},{key:"ServerUpdateCommand_UpdateAttribute",value:function(_ServerUpdateCommand_UpdateAttribute){function ServerUpdateCommand_UpdateAttribute(_x2){return _ServerUpdateCommand_UpdateAttribute.apply(this,arguments)}return ServerUpdateCommand_UpdateAttribute.toString=function(){return _ServerUpdateCommand_UpdateAttribute.toString()},ServerUpdateCommand_UpdateAttribute}((function(updateAttribute){if("SingleAssociation"===updateAttribute.DataType){var associatedObject=this.VMClassIdMap[updateAttribute.Value];associatedObject||((associatedObject=new VMClassObject(this)).VMClassId.asString=updateAttribute.Value,this.VMClassIdMap[associatedObject.VMClassId.asString]=associatedObject,associatedObject.EnsureCurr_FunctionOnRoot()),this.EnsureExistanceAndIndexing(updateAttribute.VMClassId).ServerSetSingleAssociation(updateAttribute.AttributeName,associatedObject)}else{this.EnsureExistanceAndIndexing(updateAttribute.VMClassId).ServerSetAttribute(updateAttribute.AttributeName,updateAttribute.Value,updateAttribute.DataType)}}))},{key:"ServerUpdateCommand_UpdateCollection",value:function(_ServerUpdateCommand_UpdateCollection){function ServerUpdateCommand_UpdateCollection(_x3){return _ServerUpdateCommand_UpdateCollection.apply(this,arguments)}return ServerUpdateCommand_UpdateCollection.toString=function(){return _ServerUpdateCommand_UpdateCollection.toString()},ServerUpdateCommand_UpdateCollection}((function(updateCollection){var collectionowner=this.VMClassIdMap[updateCollection.VMClassId];if(null!=updateCollection.OldValues){var _step3,_iterator3=view_data_service_createForOfIteratorHelper(updateCollection.OldValues);try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var oldval=_step3.value;this.VMClassIdMap[oldval]&&collectionowner&&collectionowner.ServerRemoveFromCollection(updateCollection.Attribute,this.VMClassIdMap[oldval])}}catch(err){_iterator3.e(err)}finally{_iterator3.f()}}if("Reset"===updateCollection.UpdateType&&collectionowner&&collectionowner.hasOwnProperty(updateCollection.Attribute)){var thelistToReset=collectionowner[updateCollection.Attribute];if(thelistToReset){var _step4,_iterator4=view_data_service_createForOfIteratorHelper(thelistToReset);try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){_step4.value.VMClassParent=null}}catch(err){_iterator4.e(err)}finally{_iterator4.f()}thelistToReset.splice(0)}}var i=0;if(null!=updateCollection.NewValues){var _step5,_iterator5=view_data_service_createForOfIteratorHelper(updateCollection.NewValues);try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var newvalue=_step5.value,listItem=this.EnsureExistanceAndIndexing(newvalue,(function(viewData){return new VMClassListItem(viewData)}));collectionowner&&collectionowner.ServerInsertIntoCollection(updateCollection.Attribute,listItem,updateCollection.NewValuesStartIndex+i),i++}}catch(err){_iterator5.e(err)}finally{_iterator5.f()}}}))},{key:"ServerUpdateCommand_IdChange",value:function(_ServerUpdateCommand_IdChange){function ServerUpdateCommand_IdChange(_x4){return _ServerUpdateCommand_IdChange.apply(this,arguments)}return ServerUpdateCommand_IdChange.toString=function(){return _ServerUpdateCommand_IdChange.toString()},ServerUpdateCommand_IdChange}((function(serverUpdateCommand){if(this.VMClassIdMap[serverUpdateCommand.OldVMClassId]){var vmco=this.VMClassIdMap[serverUpdateCommand.OldVMClassId];console.log("Viewmodel "+this.ViewModelName+", changing ID for object "+vmco.VMClassId.asPrettyString()+" to "+serverUpdateCommand.NewVMClassId),this.VMClassIdMap[serverUpdateCommand.NewVMClassId]&&(this.VMClassIdMap[serverUpdateCommand.NewVMClassId].ClearChildObjects(),delete this.VMClassIdMap[serverUpdateCommand.NewVMClassId],console.warn("Viewmodel "+this.ViewModelName+", duplicate object when changing ID, deleted old object "+serverUpdateCommand.NewVMClassId)),vmco.VMClassId.asString=serverUpdateCommand.NewVMClassId,this.VMClassIdMap[serverUpdateCommand.NewVMClassId]=vmco}}))},{key:"CreateOrUpdateAction",value:function(actionUpdate){var groupdiscriminator=actionUpdate.VMClassName,renderpos=actionUpdate.ActionRenderPosition;"ButtonOnly"==renderpos?this._actionsRoot.EnsureGroupByName("BUTTONONLYGROUP","","",renderpos).EnsureSubMenuGroupByName("","").ActionList.CreateOrUpdateAction(actionUpdate,this.StreamingAppClient,this):"LeftSide"==actionUpdate.ActionRenderPosition&&this._actionsRoot.EnsureGroupByName(groupdiscriminator,actionUpdate.GroupHeader,actionUpdate.SortKey.substring(0,6),actionUpdate.ActionRenderPosition).EnsureSubMenuGroupByName(actionUpdate.SubMenuGroup,actionUpdate.SubMenuGroupSortKey).ActionList.CreateOrUpdateAction(actionUpdate,this.StreamingAppClient,this),"ToolBarLeft"!=actionUpdate.ActionRenderPosition&&"LeftSide"!=actionUpdate.ActionRenderPosition||(groupdiscriminator="TheCollectionForToolBarLeft",renderpos="ToolBarLeft"),this._actionsRoot.EnsureGroupByName(groupdiscriminator,actionUpdate.GroupHeader,actionUpdate.SortKey.substring(0,6),renderpos).EnsureSubMenuGroupByName(actionUpdate.SubMenuGroup,actionUpdate.SubMenuGroupSortKey).ActionList.CreateOrUpdateAction(actionUpdate,this.StreamingAppClient,this),this.ActionsExist=void 0}},{key:"DeleteAction",value:function(actionRemove){var groupdiscriminator=actionRemove.VMClassName,renderpos=actionRemove.ActionRenderPosition;if("LeftSide"==actionRemove.ActionRenderPosition){var _group=this._actionsRoot.FindGroupByName(groupdiscriminator,actionRemove.ActionRenderPosition);if(void 0!==_group){var _step6,_iterator6=view_data_service_createForOfIteratorHelper(_group.SubMenuGroups);try{for(_iterator6.s();!(_step6=_iterator6.n()).done;){_step6.value.ActionList.DeleteAction(actionRemove)}}catch(err){_iterator6.e(err)}finally{_iterator6.f()}}}"ToolBarLeft"==actionRemove.ActionRenderPosition||"LeftSide"==actionRemove.ActionRenderPosition?(groupdiscriminator="TheCollectionForToolBarLeft",renderpos="ToolBarLeft"):"ButtonOnly"==actionRemove.ActionRenderPosition&&(groupdiscriminator="BUTTONONLYGROUP",renderpos=actionRemove.ActionRenderPosition);var group=this._actionsRoot.FindGroupByName(groupdiscriminator,renderpos);if(void 0!==group){var _step7,_iterator7=view_data_service_createForOfIteratorHelper(group.SubMenuGroups);try{for(_iterator7.s();!(_step7=_iterator7.n()).done;){_step7.value.ActionList.DeleteAction(actionRemove),this.ActionsExist=void 0}}catch(err){_iterator7.e(err)}finally{_iterator7.f()}}this.ActionsExist=void 0}},{key:"ActionsByGroup",value:function(group,actionRenderPosition){var actionGroup=this._actionsRoot.FindGroupByName(group,actionRenderPosition);return void 0!==actionGroup?actionGroup.AllActions():[]}},{key:"ActionsByGroupAnyRenderPosition",value:function(group){var actionGroup=this._actionsRoot.FindGroupByNameAnyRenderPosition(group);return void 0!==actionGroup?actionGroup.AllActions():[]}},{key:"ActionGroups",value:function(){return this._actionsRoot.ActionGroups.filter((function(ag){return"LeftSide"===ag.ActionRenderPosition}))}},{key:"GetUsesTheToolbarInit",value:function(actionRenderPosition){"ToolBarLeft"!=actionRenderPosition&&"ToolBarRight"!=actionRenderPosition||(this._thisViewUsesTheToolbar=!0)}},{key:"GetUsesTheToolbar",value:function(){return this._thisViewUsesTheToolbar}},{key:"ActionSubMenuGroupsToolbar",value:function(){var _step8,res=[],_iterator8=view_data_service_createForOfIteratorHelper(this._actionsRoot.ActionGroups);try{for(_iterator8.s();!(_step8=_iterator8.n()).done;){var actionGroup=_step8.value;"ToolBarLeft"===actionGroup.ActionRenderPosition&&res.push.apply(res,view_data_service_toConsumableArray(actionGroup.SubMenuGroups))}}catch(err){_iterator8.e(err)}finally{_iterator8.f()}return res}},{key:"ActionListTopLevelToolbar",value:function(){var _step9,res=[],_iterator9=view_data_service_createForOfIteratorHelper(this._actionsRoot.ActionGroups);try{for(_iterator9.s();!(_step9=_iterator9.n()).done;){var actionGroup=_step9.value;if("ToolBarLeft"===actionGroup.ActionRenderPosition){var _step10,_iterator10=view_data_service_createForOfIteratorHelper(actionGroup.SubMenuGroups);try{for(_iterator10.s();!(_step10=_iterator10.n()).done;){var subMenuGroup=_step10.value;""===subMenuGroup.SubMenuGroupName&&subMenuGroup.ActionList.NotEmpty()&&res.push.apply(res,view_data_service_toConsumableArray(subMenuGroup.ActionList.Actions))}}catch(err){_iterator10.e(err)}finally{_iterator10.f()}}}}catch(err){_iterator9.e(err)}finally{_iterator9.f()}return res}},{key:"ActionGroupForVMClassname",value:function(aVMClassName){var foundAGs=this._actionsRoot.ActionGroups.filter((function(ag){return ag.ActionGroupName===aVMClassName&&"ButtonOnly"!=ag.ActionRenderPosition}));return 0===foundAGs.length?void 0:foundAGs[0]}},{key:"ActionsNotEmpty",value:function(){return this._actionsRoot.NotEmpty()}},{key:"TryToHandleModalNavigationFromButtonAction",value:function(navigate){var _step11,adhocaction,tempAction,_iterator11=view_data_service_createForOfIteratorHelper(this._actionsRoot.ActionGroups);try{for(_iterator11.s();!(_step11=_iterator11.n()).done;){var _step12,_iterator12=view_data_service_createForOfIteratorHelper(_step11.value.AllActions());try{for(_iterator12.s();!(_step12=_iterator12.n()).done;){var action=_step12.value;if(action.ActionName===navigate.ActionName)return void action.Execute()}}catch(err){_iterator12.e(err)}finally{_iterator12.f()}}}catch(err){_iterator11.e(err)}finally{_iterator11.f()}adhocaction=new Action(this.StreamingAppClient,this),(tempAction=new ServerUpdateCommand_Action).Action=navigate.ActionName,tempAction.View=navigate.View,tempAction.VMClassName=this.ViewModelName,tempAction.IsModal=navigate.IsModal,tempAction.IsPopUp=navigate.IsPopUp,tempAction.SortKey="whatever",adhocaction.UpdateFromActionCommand(tempAction),adhocaction.ContextIdIfKnown=navigate.Id,adhocaction.Execute()}},{key:"Clear",value:function(){this.RootVMClassObject.ClearChildObjects(),this._actionsRoot.Clear(),this.ServerMessageCursor=0}},{key:"StateActions",value:function(){return this._stateActionsList.Actions}},{key:"Execute",value:function(vmClassName,actionName,$event){$event&&(this.StreamingAppClient.LastClickEvent=$event);var actions=this.ActionsByGroupAnyRenderPosition(vmClassName).filter((function(a){return a.ActionName===actionName})),actionobject=void 0;if(void 0!==actions){if(0==actions.length&&(actions=this.ActionsByGroupAnyRenderPosition("TheCollectionForToolBarLeft").filter((function(a){return a.ActionName===actionName}))),0==actions.length&&(actions=this.ActionsByGroupAnyRenderPosition("BUTTONONLYGROUP").filter((function(a){return a.ActionName==actionName}))),actions.length>1)throw new RangeError("Multiple actions with name "+actionName+" in class "+vmClassName);actionobject=actions[0]}void 0!==actionobject?(actionobject.Execute($event),this.$scope.$broadcast(AngularEventConstants.$ActionExecute,actionobject)):this.StreamingAppClient.CallServerAction(this.VMId,vmClassName,actionName)}},{key:"CallServerActionRowClick",value:function(vmClassId,actionName){this.StreamingAppClient.CallServerActionRowClick(this.VMId,vmClassId,actionName)}},{key:"DoAfterServerMessages",value:function(){void 0===this.ActionsExist&&(this.ActionsExist=this.ActionsNotEmpty()||this._stateActionsList.NotEmpty())}},{key:"HasThisAttributeBouncedBack",value:function(VmClassId,attribute,value){var filter=VmClassId+"."+attribute+" "+value,pos=this._bouncebackfilter.indexOf(filter);return pos>-1&&(this._bouncebackfilter.splice(pos,1),!0)}},{key:"AddToBounceBackFilter",value:function(VmClassId,member,value){var filter=VmClassId+"."+member+" "+value;this._bouncebackfilter.push(filter)}},{key:"QueueUpdateToServer",value:function(VMClassId,attributeName,value,lag){var key=VMClassId+":"+attributeName;if(this._MessageForServerDict[key])this._MessageForServerDict[key].Value=value;else{var UpdateCommand=new ClientCommand_Update;UpdateCommand.VMClassId=VMClassId,UpdateCommand.Attribute=attributeName,UpdateCommand.Value=value,this._MessageForServerDict[key]=UpdateCommand,this._MessagesForServer.push(UpdateCommand)}this.StreamingAppClient.ScheduleTimerForSending(lag)}},{key:"AddUpdatedForServer",value:function(listToAddTo){for(this._MessageForServerDict={};this._MessagesForServer.length>0;){var oneMessage=this._MessagesForServer.splice(0,1)[0];oneMessage.VMId=this.VMId,oneMessage.InstanceId=this.appInfo.InstanceId,listToAddTo.push(oneMessage),this.AddToBounceBackFilter(oneMessage.VMClassId,oneMessage.Attribute,oneMessage.Value)}}}]),ViewData}(),ViewClient=function(){function ViewClient(appClient,viewData){view_data_service_classCallCheck(this,ViewClient),this.StreamingAppClient=appClient,this.ViewData=viewData,this.VM=this.StreamingAppClient}return view_data_service_createClass(ViewClient,[{key:"Root",value:function(){return this.ViewData.RootVMClassObject}},{key:"VMId",value:function(){return this.ViewData.VMId}},{key:"PublishOnScope",value:function(){this.ViewData.$scope.svmc=this,this.ViewData.$scope.StreamingViewModelClient=this,this.ViewData.$scope.ViewClient=this}},{key:"ReleaseFromScope",value:function(){this.ViewData.$scope.svmc=null,this.ViewData.$scope.StreamingViewModelClient=null,this.ViewData.$scope.ViewClient=null,this.ViewData.ReleaseFromScope(),console.log("scope released")}},{key:"GetIsDirty",value:function(){return this.ViewData.appInfo.isDirty}},{key:"Loading",value:function(){return this.StreamingAppClient.ShowLoading}},{key:"GetRootObjectStatus",value:function(){return this.ViewData.appInfo.RootObjectStatus}},{key:"CallServerActionRowClick",value:function(vmClassId,actionName){this.StreamingAppClient.CallServerActionRowClick(this.ViewData.VMId,vmClassId,actionName)}},{key:"CallServerAction",value:function(vmClassName,actionName){var $event=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;this.StreamingAppClient.CallServerAction(this.ViewData.VMId,vmClassName,actionName,$event)}},{key:"BringUpSeekerGridMoreMenu",value:function(){var $event=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.ViewData.$scope.$broadcast("__BringUpSeekerGridMoreMenu",$event)}},{key:"ExecuteAfterFullRoundtrip",value:function(key,data,callback){this.StreamingAppClient.ExecuteAfterFullRoundtrip(this.ViewData.VMId,key,data,callback)}},{key:"GetVMImageUrl",value:function(theobject,propertyWithImage){return void 0!==this&&void 0!==theobject?this.StreamingAppClient.ServerApiPath+"GetVMImage?vmid="+this.VMId()+"&vmclassid="+theobject.VMClassId.asString+"&col="+propertyWithImage+"&generation="+theobject[propertyWithImage]:""}},{key:"GetExpectedImageUrl",value:function(theobject,propertyWithImage){return void 0!==this&&void 0!==theobject?theobject[propertyWithImage]!==ExternalIdNullString?theobject[propertyWithImage]:"data:image/png;base64,":""}},{key:"GetIFrameUserControlUrl",value:function(theobject,view){return void 0!==this&&void 0!==theobject?"./Turnkey/AngularAppUC#/"+view+"/"+theobject.VMClassId.VMObjectId+"/"+this.VMId():""}},{key:"DropObject",value:function(target,vmclassid,source){this.StreamingAppClient.DropObject(this.ViewData.VMId,target,vmclassid,source)}},{key:"UploadFile",value:function(target,vmclassid,data,filename){this.StreamingAppClient.UploadFile(this.ViewData,target,vmclassid,data,filename)}},{key:"GetBlobDownloadLink",value:function(vmClassId,vcolName){return"api/GetVMFile?vmid=".concat(this.VMId(),"&vmclassid=").concat(vmClassId,"&col=").concat(vcolName)}}]),ViewClient}(),ExternalIdNullString="$null$",ViewDataService=function(){function ViewDataService(injector,$q,viewMetaService){view_data_service_classCallCheck(this,ViewDataService),view_data_service_defineProperty(this,"MinutesToKeepViewData",8),this.viewMetaService=viewMetaService,console.log("ViewDataService"),this.$injector=injector,this.$q=$q,ViewModelDataStore=new Array}return view_data_service_createClass(ViewDataService,[{key:"GetStreamingAppClient",value:function(){return this.$injector.get("StreamingAppClientService")}},{key:"GetAllViews",value:function(){return ViewModelDataStore}},{key:"GetActiveViews",value:function(){return ViewModelDataStore.filter((function(vmd){return void 0!==vmd.$scope}))}},{key:"CleanOutOldViewData",value:function(){var _step13,_iterator13=view_data_service_createForOfIteratorHelper(ViewModelDataStore.filter((function(vmd){return void 0===vmd.$scope})));try{for(_iterator13.s();!(_step13=_iterator13.n()).done;){var viewdata=_step13.value;Date.now()-viewdata.LastUsedByScope>6e4*this.MinutesToKeepViewData&&(console.log("Removing ViewData for "+viewdata.ViewModelName+": "+viewdata.RootId),viewdata.Clear(),ViewModelDataStore.splice(ViewModelDataStore.indexOf(viewdata),1))}}catch(err){_iterator13.e(err)}finally{_iterator13.f()}}},{key:"GetViewDataFor",value:function(rootVMClassId,$scope){var matchingVMD=ViewModelDataStore.filter((function(vmd){return vmd.ViewModelName===rootVMClassId.VMClassName&&vmd.RootId===rootVMClassId.VMObjectId}));if(matchingVMD.length>1)throw new RangeError("Multiple viewmodeldata objects for viewmodel "+rootVMClassId.asPrettyString());var vmd=void 0;return 1===matchingVMD.length&&(vmd=matchingVMD[0]),void 0===vmd?(console.log("ViewDataService creating new viewdata for "+rootVMClassId.asPrettyString()),vmd=new ViewData(this.GetStreamingAppClient(),rootVMClassId),this.viewMetaService.GetViewMetaForCurrentView().then((function(viewMetaObj){vmd.ViewMeta=viewMetaObj,$scope.$broadcast(SystemEvents.$ViewMetaReady)})),ViewModelDataStore.push(vmd),this.GetStreamingAppClient().OpenView(vmd,!1)):(console.log("ViewDataService serving existing viewdata for "+rootVMClassId.asPrettyString()),this.GetStreamingAppClient().PollServerAsSoonAsPossible()),vmd.PublishOnScope($scope),vmd}},{key:"GetViewClientFor",value:function(VMClassId,$scope){var viewData=this.GetViewDataFor(VMClassId,$scope),viewClient=new ViewClient(this.GetStreamingAppClient(),viewData);return viewClient.PublishOnScope(),viewClient}},{key:"IdChange",value:function(serverUpdateCommand){var _step14,_iterator14=view_data_service_createForOfIteratorHelper(this.GetAllViews());try{for(_iterator14.s();!(_step14=_iterator14.n()).done;){_step14.value.ServerUpdateCommand_IdChange(serverUpdateCommand)}}catch(err){_iterator14.e(err)}finally{_iterator14.f()}}},{key:"ClearCache",value:function(){var _step15,_iterator15=view_data_service_createForOfIteratorHelper(ViewModelDataStore);try{for(_iterator15.s();!(_step15=_iterator15.n()).done;){_step15.value.Clear()}}catch(err){_iterator15.e(err)}finally{_iterator15.f()}ViewModelDataStore.splice(0)}},{key:"FindViewDataForVmId",value:function(VmId){var matchingVMD=ViewModelDataStore.filter((function(vmd){return vmd.VMId===VmId}));if(0!==matchingVMD.length)return matchingVMD[0]}}]),ViewDataService}();view_data_service_defineProperty(ViewDataService,"$inject",["$injector","$q","ViewMetaService"]);var DataErrors=function(){function DataErrors(viewData){view_data_service_classCallCheck(this,DataErrors),view_data_service_defineProperty(this,"_dataErrors",{}),view_data_service_defineProperty(this,"_customValidityOutOfDate",!1),this.ViewData=viewData}return view_data_service_createClass(DataErrors,[{key:"DataErrors",value:function(){return this._dataErrors}},{key:"ServerUpdateCommand_DataError",value:function(_ServerUpdateCommand_DataError){function ServerUpdateCommand_DataError(_x5){return _ServerUpdateCommand_DataError.apply(this,arguments)}return ServerUpdateCommand_DataError.toString=function(){return _ServerUpdateCommand_DataError.toString()},ServerUpdateCommand_DataError}((function(dataError){var messages=dataError.Message.split("\n");messages=messages.filter((function(e){return e})),this._dataErrors[dataError.Target]=messages,this.ViewData.$scope.$broadcast("DataErrorsUpdated")}))},{key:"CheckCustomValidity",value:function(){this._customValidityOutOfDate&&(this._customValidityOutOfDate=!1)}}]),DataErrors}();function checkbox_controller_typeof(obj){return checkbox_controller_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},checkbox_controller_typeof(obj)}function checkbox_controller_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,checkbox_controller_toPropertyKey(descriptor.key),descriptor)}}function checkbox_controller_toPropertyKey(arg){var key=function(input,hint){if("object"!==checkbox_controller_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==checkbox_controller_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===checkbox_controller_typeof(key)?key:String(key)}var CheckboxController=function(){function CheckboxController($element,$scope,$attrs){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,CheckboxController),this.$element=$element,this.$scope=$scope,this.$attrs=$attrs}var Constructor,protoProps,staticProps;return Constructor=CheckboxController,(protoProps=[{key:"$onInit",value:function(){this.$parentScope=this.$scope.$parent}},{key:"$postLink",value:function(){var _this=this;this.$element.addClass("n-tk-checkbox"),this.input=this.$element.find("input"),this.rippleRef=MDCRipple.attachTo(this.$element.find(".n-tk-checkbox__ripple-surface")[0]),this.rippleRef.unbounded=!0,this.validationWatcher=this.$parentScope.$watch("ViewData.DataErrors._dataErrors['".concat(this.id,"']"),(function(newVal,oldVal){if((null==newVal?void 0:newVal.length)>0){var message=newVal[0];_this.setValidationError(message)}else _this.removeValidationError()}))}},{key:"$onChanges",value:function(onChangesObj){"ngReadonly"in onChangesObj&&this.readonlyHandler(onChangesObj.ngReadonly.currentValue)}},{key:"$onDestroy",value:function(){this.rippleRef.destroy(),this.validationWatcher()}},{key:"setValidationError",value:function(message){this.$element.addClass("n-tk-checkbox--invalid"),this.validationError=!0,this.validationMessage=message,this.input.attr("aria-invalid","true"),this.input.attr("aria-errormessage","".concat(this.id,".ErrorMessage"))}},{key:"removeValidationError",value:function(){this.validationError&&(this.$element.removeClass("n-tk-checkbox--invalid"),this.validationError=!1,this.validationMessage=null,this.input.attr("aria-invalid","false"),this.input.removeAttr("aria-errormessage"))}},{key:"readonlyHandler",value:function(state){state?this.$element.addClass("n-tk-checkbox--readonly"):this.$element.removeClass("n-tk-checkbox--readonly")}}])&&checkbox_controller_defineProperties(Constructor.prototype,protoProps),staticProps&&checkbox_controller_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),CheckboxController}();!function(obj,key,value){(key=checkbox_controller_toPropertyKey(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}(CheckboxController,"$inject",["$element","$scope","$attrs"]);const checkbox_component={bindings:{ngModel:"=",ngReadonly:"<",ngChecked:"<",ngClass:"<",label:"@",id:"@",indeterminate:"<?",helpertext:"@?"},controller:CheckboxController,templateUrl:"./Content/tmpl/checkbox.tmpl.html"};const checkbox_module=angular.module("checkbox",[]).component("tkCheckbox",checkbox_component).name;function datepicker_controller_typeof(obj){return datepicker_controller_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},datepicker_controller_typeof(obj)}function datepicker_controller_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,datepicker_controller_toPropertyKey(descriptor.key),descriptor)}}function datepicker_controller_toPropertyKey(arg){var key=function(input,hint){if("object"!==datepicker_controller_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==datepicker_controller_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===datepicker_controller_typeof(key)?key:String(key)}var DatepickerController=function(){function DatepickerController($element,$scope,$attrs,$locale){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,DatepickerController),this.$element=$element,this.$scope=$scope,this.$attrs=$attrs,this.$locale=$locale}var Constructor,protoProps,staticProps;return Constructor=DatepickerController,(protoProps=[{key:"$onInit",value:function(){var _this$$scope;this.$parentScope=null===(_this$$scope=this.$scope)||void 0===_this$$scope?void 0:_this$$scope.$parent}},{key:"$postLink",value:function(){var _this=this;this.$element.addClass("n-tk-datepicker"),this.input=this.$element.find("input"),this.input.on("focus",this.handleFocus.bind(this)),this.validationWatcher=this.$parentScope.$watch("ViewData.DataErrors._dataErrors['".concat(this.id,"']"),(function(newVal,oldVal){if((null==newVal?void 0:newVal.length)>0){var message=newVal[0];_this.setValidationError(message)}else _this.removeValidationError()}))}},{key:"$onChanges",value:function(onChangesObj){"ngReadonly"in onChangesObj&&this.handleReadonly(onChangesObj.ngReadonly.currentValue)}},{key:"$onDestroy",value:function(){this.input.off("focus"),this.validationWatcher()}},{key:"handleReadonly",value:function(state){state?this.$element.addClass("n-tk-datepicker--readonly"):this.$element.removeClass("n-tk-datepicker--readonly")}},{key:"handleFocus",value:function(){var _this2=this;this.$element.addClass("n-tk-datepicker--focused"),this.input.on("blur",(function(e){_this2.$element.removeClass("n-tk-datepicker--focused")}))}},{key:"setValidationError",value:function(message){this.$element.addClass("n-tk-datepicker--invalid"),this.validationError=!0,this.validationMessage=message,this.input.attr("aria-invalid","true"),this.input.attr("aria-errormessage","".concat(this.id,".ErrorMessage"))}},{key:"removeValidationError",value:function(){this.$element.removeClass("n-tk-datepicker--invalid"),this.validationError=!1,this.input.removeAttr("aria-invalid"),this.input.removeAttr("aria-errormessage")}}])&&datepicker_controller_defineProperties(Constructor.prototype,protoProps),staticProps&&datepicker_controller_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),DatepickerController}();!function(obj,key,value){(key=datepicker_controller_toPropertyKey(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}(DatepickerController,"$inject",["$element","$scope","$attrs","$locale"]);const datepicker_component={bindings:{ngModel:"=",ngReadonly:"<",ngClass:"<",id:"@?",label:"@?",type:"@?",iconStart:"@?",iconEnd:"@?",iconTarget:"@?",helpertext:"@?"},controller:DatepickerController,templateUrl:"./Content/tmpl/datepicker.tmpl.html"};const datepicker_module=angular_default().module("datepicker",[]).component("tkDatepicker",datepicker_component).name;function file_download_controller_typeof(obj){return file_download_controller_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},file_download_controller_typeof(obj)}function file_download_controller_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,file_download_controller_toPropertyKey(descriptor.key),descriptor)}}function file_download_controller_toPropertyKey(arg){var key=function(input,hint){if("object"!==file_download_controller_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==file_download_controller_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===file_download_controller_typeof(key)?key:String(key)}var FileDownloadController=function(){function FileDownloadController($element,$scope,$attrs,$timeout){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,FileDownloadController),this.$scope=$scope,this.$timeout=$timeout,this.element=$element,this.parentScope=$scope.$parent,this.attrs=$attrs,this.anchorElement=this.element[0].querySelector("a")}var Constructor,protoProps,staticProps;return Constructor=FileDownloadController,(protoProps=[{key:"$onInit",value:function(){this.ripple=null}},{key:"$postLink",value:function(){var _this=this;this.element.addClass("n-tk-file-download");var vmClassId=this.parentScope.ViewModelRoot.VMClassId.asString;this.$timeout((function(){_this.downloadLink=_this.parentScope.StreamingViewModelClient.GetBlobDownloadLink(vmClassId,_this.attrs.vcolname)}),0),this.ripple=this.initRipple()}},{key:"$onChanges",value:function(){}},{key:"$onDestroy",value:function(){this.ripple.destroy()}},{key:"initRipple",value:function(){this.anchorElement.classList.add("mdc-ripple-surface");var color=getComputedStyle(this.element[0]).color;return this.element.attr("style","--mdc-ripple-color:".concat(color)),MDCRipple.attachTo(this.anchorElement)}}])&&file_download_controller_defineProperties(Constructor.prototype,protoProps),staticProps&&file_download_controller_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),FileDownloadController}();!function(obj,key,value){(key=file_download_controller_toPropertyKey(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}(FileDownloadController,"$inject",["$element","$scope","$attrs","$timeout"]);const file_download_component={bindings:{label:"@",name:"@",vmclass:"@",vcolName:"@"},controller:FileDownloadController,templateUrl:"./Content/tmpl/file-download.tmpl.html"};const file_download_module=angular_default().module("fileDownload",[]).component("tkFileDownload",file_download_component).name;function notification_controller_typeof(obj){return notification_controller_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},notification_controller_typeof(obj)}function notification_controller_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,notification_controller_toPropertyKey(descriptor.key),descriptor)}}function notification_controller_toPropertyKey(arg){var key=function(input,hint){if("object"!==notification_controller_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==notification_controller_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===notification_controller_typeof(key)?key:String(key)}var NotificationController=function(){function NotificationController($timeout){var _this=this;!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,NotificationController),this.$timeout=$timeout,this.$timeout((function(){_this.autohide&&_this.closePanel(_this.mdPanelRef)}),2e3)}var Constructor,protoProps,staticProps;return Constructor=NotificationController,(protoProps=[{key:"dismiss",value:function($event){this.closePanel(this.mdPanelRef)}}])&&notification_controller_defineProperties(Constructor.prototype,protoProps),staticProps&&notification_controller_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),NotificationController}();function notification_service_typeof(obj){return notification_service_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},notification_service_typeof(obj)}function notification_service_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function notification_service_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,notification_service_toPropertyKey(descriptor.key),descriptor)}}function notification_service_createClass(Constructor,protoProps,staticProps){return protoProps&&notification_service_defineProperties(Constructor.prototype,protoProps),staticProps&&notification_service_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}function notification_service_toPropertyKey(arg){var key=function(input,hint){if("object"!==notification_service_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==notification_service_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===notification_service_typeof(key)?key:String(key)}!function(obj,key,value){(key=notification_controller_toPropertyKey(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}(NotificationController,"$inject",["$timeout"]);var TurnkeyNotification=function(){function TurnkeyNotification(text){var autohide=arguments.length>1&&void 0!==arguments[1]&&arguments[1],dismissable=arguments.length>2&&void 0!==arguments[2]&&arguments[2],icon=arguments.length>3?arguments[3]:void 0;notification_service_classCallCheck(this,TurnkeyNotification),this.text=text,this.actions=[],this.autohide=autohide,this.dismissable=dismissable,icon&&(this.icon=icon)}return notification_service_createClass(TurnkeyNotification,[{key:"addAction",value:function(action){this.actions.push(action)}}]),TurnkeyNotification}(),TurnkeyNotificationAction=notification_service_createClass((function TurnkeyNotificationAction(actionName,actionFn){notification_service_classCallCheck(this,TurnkeyNotificationAction),this.actionName=actionName,this.fn=actionFn})),MDrivenTurnkeyNotificationService=function(){function MDrivenTurnkeyNotificationService($mdPanel,appClientService,$timeout){notification_service_classCallCheck(this,MDrivenTurnkeyNotificationService),this.$mdPanel=$mdPanel,this.appClientService=appClientService,this.$timeout=$timeout,this.notificationQueue=[],this.openNotificationPanelRef=void 0}return notification_service_createClass(MDrivenTurnkeyNotificationService,[{key:"createAndEnqueue",value:function(text){var notification=new TurnkeyNotification(text,arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3?arguments[3]:void 0);this.notificationQueue.push(notification),this.show()}},{key:"enqueue",value:function(notification){this.notificationQueue.push(notification),this.show()}},{key:"dequeue",value:function(){return this.notificationQueue.shift()}},{key:"clear",value:function(){this.notificationQueue=[]}},{key:"show",value:function(){var _this=this;if(this.appClientService.ShowLoading)this.$timeout((function(){_this.show()}),1e3);else if(!this.openNotificationPanelRef&&this.notificationQueue.length>0){var notification=this.dequeue(),panelPosition=this.$mdPanel.newPanelPosition().absolute().bottom("0").centerHorizontally(),panelAnimation=this.$mdPanel.newPanelAnimation().withAnimation({open:"n-tk-snackbar--visible",close:"n-tk-snackbar--hidden"}).duration(160),panelConfig={attachTo:angular_default().element(document.body),panelClass:"n-tk-snackbar",animation:panelAnimation,position:panelPosition,locals:{notification,autohide:notification.autohide,closePanel:function(mdPanelRef){mdPanelRef.close().then((function(){_this.openNotificationPanelRef=void 0,_this.show()}))}},controller:"MDrivenTurnkeyNotificationController",focusOnOpen:!1,propagateContainerEvents:!0,controllerAs:"$ctrl",templateUrl:"./Content/tmpl/panels/notification-panel.tmpl.html"};this.$mdPanel.open(panelConfig).then((function(mdPanelRef){_this.openNotificationPanelRef=mdPanelRef}))}}}]),MDrivenTurnkeyNotificationService}();function file_upload_controller_typeof(obj){return file_upload_controller_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},file_upload_controller_typeof(obj)}function _slicedToArray(arr,i){return function(arr){if(Array.isArray(arr))return arr}(arr)||function(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||function(o,minLen){if(!o)return;if("string"==typeof o)return file_upload_controller_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return file_upload_controller_arrayLikeToArray(o,minLen)}(arr,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function file_upload_controller_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function file_upload_controller_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,file_upload_controller_toPropertyKey(descriptor.key),descriptor)}}function file_upload_controller_defineProperty(obj,key,value){return(key=file_upload_controller_toPropertyKey(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function file_upload_controller_toPropertyKey(arg){var key=function(input,hint){if("object"!==file_upload_controller_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==file_upload_controller_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===file_upload_controller_typeof(key)?key:String(key)}!function(obj,key,value){(key=notification_service_toPropertyKey(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}(MDrivenTurnkeyNotificationService,"$inject",["$mdPanel","StreamingAppClientService","$timeout"]);var FileUploadController=function(){function FileUploadController($element,$scope,$attrs,notificationService,$timeout){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,FileUploadController),file_upload_controller_defineProperty(this,"fileUploaded",!1),file_upload_controller_defineProperty(this,"uploadProgress",0),this.$element=$element,this.$scope=$scope,this.$attrs=$attrs,this.notificationService=notificationService,this.$timeout=$timeout,this.$parentScope=this.$scope.$parent}var Constructor,protoProps,staticProps;return Constructor=FileUploadController,(protoProps=[{key:"$onInit",value:function(){this.icon="cloud_upload"}},{key:"$postLink",value:function(){var _this=this;if(this.$element.addClass("n-tk-file-upload"),this.$fileInput=this.$element.find("input"),this.$buttonComponent=this.$element.find("tk-button"),this.id){var _this$id$trim$split2=_slicedToArray(this.id.trim().split("."),2);this.vclassName=_this$id$trim$split2[0],this.vcolName=_this$id$trim$split2[1],this.$element.removeAttr("id")}this.$fileInput[0]&&this.$fileInput.on("change",(function(event){var target=event.target;_this.fileName=target.files[0].name,_this.$attrs.$attr.hasOwnProperty("maxsize")?_this.$parentScope.controller.onFileSelect(_this.id,_this.$parentScope.ViewModelRoot.VMClassId,_this.maxsize):_this.$parentScope.controller.onFileSelect(_this.id,_this.$parentScope.ViewModelRoot.VMClassId)})),this.$scope.$on("".concat(this.id,"__uploadIsDone"),(function(){var _this$$buttonComponen;_this.notificationService.createAndEnqueue("".concat(_this.fileName," uploaded"),!1,!0,"attach_file"),null===(_this$$buttonComponen=_this.$buttonComponent)||void 0===_this$$buttonComponen||_this$$buttonComponen.addClass("success"),_this.icon="check_circle",_this.fileUploaded=!0,_this.uploadProgress=0})),this.$scope.$on("StateActionExecute",(function(e,actionName){!_this.fileUploaded||"Save"!==actionName&&"**CANCEL"!==actionName||_this.$timeout((function(){_this.fileName=null,_this.icon="cloud_upload",_this.$buttonComponent.removeClass("success"),_this.$fileInput.val(null)}),1500)})),this.$scope.$on("".concat(this.id,"__uploadProgress"),(function(event,val){_this.uploadProgress=val}))}},{key:"$onDestroy",value:function(){this.$fileInput.unbind()}},{key:"triggerUpload",value:function(){this.$fileInput[0]?this.$fileInput.click():console.warn("Input is not found. Please make sure input element is present in File upload component template.")}}])&&file_upload_controller_defineProperties(Constructor.prototype,protoProps),staticProps&&file_upload_controller_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),FileUploadController}();file_upload_controller_defineProperty(FileUploadController,"$inject",["$element","$scope","$attrs","MDrivenTurnkeyNotificationService","$timeout"]);const file_upload_component={bindings:{ngReadonly:"<",ngClass:"<",label:"@?",id:"@?",vcolname:"@?",vclass:"@?",maxsize:"@?",accept:"@?"},controller:FileUploadController,templateUrl:"./Content/tmpl/file-upload.tmpl.html"};const file_upload_module=angular.module("file-upload",[]).component("tkFileUpload",file_upload_component).name;function icon_controller_typeof(obj){return icon_controller_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},icon_controller_typeof(obj)}function icon_controller_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,icon_controller_toPropertyKey(descriptor.key),descriptor)}}function icon_controller_toPropertyKey(arg){var key=function(input,hint){if("object"!==icon_controller_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==icon_controller_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===icon_controller_typeof(key)?key:String(key)}const icon_component={transclude:!0,controller:function(){function IconController($element,$attrs){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,IconController),this.$element=$element,this.$attrs=$attrs,this.element=$element,this.attrs=$attrs}var Constructor,protoProps,staticProps;return Constructor=IconController,(protoProps=[{key:"$postLink",value:function(){this.element.addClass("n-tk-icon"),this.element.attr("aria-hidden","true")}}])&&icon_controller_defineProperties(Constructor.prototype,protoProps),staticProps&&icon_controller_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),IconController}(),template:"\n    <ng-transclude></ng-transclude>\n  "};function icon_directive_typeof(obj){return icon_directive_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},icon_directive_typeof(obj)}function icon_directive_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,icon_directive_toPropertyKey(descriptor.key),descriptor)}}function icon_directive_toPropertyKey(arg){var key=function(input,hint){if("object"!==icon_directive_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==icon_directive_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===icon_directive_typeof(key)?key:String(key)}const icon_directive=function(){function IconDirective($timeout,$compile){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,IconDirective),this.$timeout=$timeout,this.$compile=$compile,this.restrict="A"}var Constructor,protoProps,staticProps;return Constructor=IconDirective,(protoProps=[{key:"link",value:function($scope,$element,$attrs){var _this=this;this.$timeout((function(){var componentTagName=$element[0].tagName.toLocaleLowerCase(),componentLabel=$element.find("label"),iconName=$attrs.tkIcon,iconPosition=$attrs.tkIconPosition||"leading",attachTo=$attrs.tkIconAttachto||"label",icon=_this.$compile('<tk-icon icon="'.concat(iconName,'"></tk-icon>'))($scope);if("label"===attachTo)componentLabel.addClass("n-".concat(componentTagName,"__label--").concat(iconPosition,"-icon")),componentLabel.append(icon);else if("control"===attachTo){var content=$element.children(".n-".concat(componentTagName,"__content"));content.addClass("n-".concat(componentTagName,"__content--").concat(iconPosition,"-icon")),content.append(icon)}else"button"===componentTagName&&$element.append(icon)}),0)}}])&&icon_directive_defineProperties(Constructor.prototype,protoProps),staticProps&&icon_directive_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),IconDirective}();const icon_module=angular_default().module("icon",[]).component("tkIcon",icon_component).directive("tkIcon",(function($timeout,$compile){return new icon_directive($timeout,$compile)})).name;function image_upload_controller_typeof(obj){return image_upload_controller_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},image_upload_controller_typeof(obj)}function image_upload_controller_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,image_upload_controller_toPropertyKey(descriptor.key),descriptor)}}function image_upload_controller_toPropertyKey(arg){var key=function(input,hint){if("object"!==image_upload_controller_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==image_upload_controller_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===image_upload_controller_typeof(key)?key:String(key)}var ImageUploadController=function(){function ImageUploadController($element,$scope,$attrs,StreamingAppClientService,$mdDialog,$compile){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ImageUploadController),this.$element=$element,this.$scope=$scope,this.StreamingAppClientService=StreamingAppClientService,this.$mdDialog=$mdDialog,this.$compile=$compile,this.inputControl=$element[0].querySelector("input"),this.parentScope=$scope.$parent,this.attrs=$attrs}var Constructor,protoProps,staticProps;return Constructor=ImageUploadController,protoProps=[{key:"$onChanges",value:function(onChangesObj){"ngReadonly"in onChangesObj&&this.handleReadonlyState(onChangesObj.ngReadonly.currentValue)}},{key:"$postLink",value:function(){var _this$imageComponent,_this$imageComponent2;this.$element.removeAttr("id"),this.$element.addClass("n-tk-image-upload"),this.inputControl.addEventListener("change",this.onFileSelect.bind(this)),this.imageComponent=this.$element.find("tk-image"),this.variant&&(null===(_this$imageComponent=this.imageComponent)||void 0===_this$imageComponent||_this$imageComponent.attr("variant",this.variant)),this.size&&(null===(_this$imageComponent2=this.imageComponent)||void 0===_this$imageComponent2||_this$imageComponent2.attr("size",this.size)),this.$compile(this.imageComponent)(this.$scope)}},{key:"handleReadonlyState",value:function(state){state?(this.$element.addClass("n-tk-image-upload--disabled"),this.inputControl.setAttribute("readonly","readonly")):(this.$element.removeClass("n-tk-image-upload--dsiabled"),this.inputControl.removeAttribute("readonly"))}},{key:"onFileSelect",value:function(){var _this=this,id=this.attrs.id,VMObject="Curr_".concat(this.attrs.vmclass),VMClassId=this.parentScope.ViewModelRoot[VMObject]().VMClassId.asString,file=this.inputControl.files[0];if(0!==Number(this.maxsize)&&file.size>Number(this.maxsize)){var alert=this.$mdDialog.alert().textContent("".concat(file.name," is larger than ").concat(this.maxsize," bytes, can't upload.")).ok("Ok");this.$mdDialog.show(alert).then((function(res){return _this.$mdDialog.hide()}))}else{var fileName=this.inputControl.files[0].name,fr=new FileReader;fr.onloadend=function(evt){var data=evt.target.result;_this.isUploaded,_this.StreamingAppClientService.UploadFile(_this.parentScope.ViewData,id,VMClassId,data,fileName),_this.filename=fileName},fr.readAsArrayBuffer(file)}}}],protoProps&&image_upload_controller_defineProperties(Constructor.prototype,protoProps),staticProps&&image_upload_controller_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),ImageUploadController}();!function(obj,key,value){(key=image_upload_controller_toPropertyKey(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}(ImageUploadController,"$inject",["$element","$scope","$attrs","StreamingAppClientService","$mdDialog","$compile"]);const image_upload_component={bindings:{label:"@",id:"@",ngReadonly:"<",vmclass:"@",vcolname:"@",maxsize:"@",imageSrc:"<",variant:"@?",size:"@?"},controller:ImageUploadController,templateUrl:"./Content/tmpl/image-upload.tmpl.html"};const image_upload_module=angular_default().module("imageUpload",[]).component("tkImageUpload",image_upload_component).name;function image_controller_typeof(obj){return image_controller_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},image_controller_typeof(obj)}function image_controller_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,image_controller_toPropertyKey(descriptor.key),descriptor)}}function image_controller_toPropertyKey(arg){var key=function(input,hint){if("object"!==image_controller_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==image_controller_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===image_controller_typeof(key)?key:String(key)}var ImageController=function(){function ImageController($element,$attrs,$scope){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ImageController),this.$element=$element,this.$attrs=$attrs,this.$scope=$scope}var Constructor,protoProps,staticProps;return Constructor=ImageController,(protoProps=[{key:"$onInit",value:function(){console.log(this)}},{key:"$postLink",value:function(){var _this=this;this.$element.addClass("n-tk-image"),this.image=this.$element[0].querySelector("img"),this.$attrs.$observe("variant",(function(val){val&&(console.log(val),_this.image.classList.add("n-tk-image__native--".concat(val)))})),this.size&&this.image.classList.add("n-tk-image__native--".concat(this.size))}}])&&image_controller_defineProperties(Constructor.prototype,protoProps),staticProps&&image_controller_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),ImageController}();!function(obj,key,value){(key=image_controller_toPropertyKey(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}(ImageController,"$inject",["$element","$attrs","$scope"]);const image_component={bindings:{imageSrc:"<",label:"@",variant:"@?",size:"@?"},controller:ImageController,templateUrl:"./Content/tmpl/image.tmpl.html"};const image_module=angular_default().module("image",[]).component("tkImage",image_component).name;function savebar_controller_typeof(obj){return savebar_controller_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},savebar_controller_typeof(obj)}function savebar_controller_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,savebar_controller_toPropertyKey(descriptor.key),descriptor)}}function savebar_controller_toPropertyKey(arg){var key=function(input,hint){if("object"!==savebar_controller_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==savebar_controller_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===savebar_controller_typeof(key)?key:String(key)}const savebar_component={bindings:{},controller:function(){function SavebarCotroller($scope,$element,$attrs){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,SavebarCotroller),this.$scope=$scope.$parent,this.$element=$element,this.$attrs=$attrs,this.actions=this.$scope.ViewData.StateActions(),this.isVisible=!1}var Constructor,protoProps,staticProps;return Constructor=SavebarCotroller,(protoProps=[{key:"$onInit",value:function(){console.log(this),console.log(this.$scope.ViewData,"ViewData"),this.$element.addClass("n-tk-savebar")}},{key:"$doCheck",value:function(){this.isVisible=this.$scope.ViewData.appInfo.isDirty,this.isVisible?(this.$element.hasClass("n-tk-savebar--hidden")&&this.$element.removeClass("n-tk-savebar--hidden"),this.$element.addClass("n-tk-savebar--visible")):(this.$element.hasClass("n-tk-savebar--visible")&&this.$element.removeClass("n-tk-savebar--visible"),this.$element.addClass("n-tk-savebar--hidden"))}},{key:"$onChanges",value:function(changeObj){console.log(changeObj),this.isVisible=this.$scope.ViewData.appInfo.isDirty}}])&&savebar_controller_defineProperties(Constructor.prototype,protoProps),staticProps&&savebar_controller_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),SavebarCotroller}(),templateUrl:"./Content/tmpl/savebar.tmpl.html"};const savebar_module=angular.module("savebar",[]).component("tkSavebar",savebar_component).name;function snackbar_controller_typeof(obj){return snackbar_controller_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},snackbar_controller_typeof(obj)}function snackbar_controller_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,snackbar_controller_toPropertyKey(descriptor.key),descriptor)}}function snackbar_controller_toPropertyKey(arg){var key=function(input,hint){if("object"!==snackbar_controller_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==snackbar_controller_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===snackbar_controller_typeof(key)?key:String(key)}var SnackbarController=function(){function SnackbarController($element,$scope){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,SnackbarController),this.$element=$element,this.$scope=$scope,this.$parentScope=this.$scope.$parent}var Constructor,protoProps,staticProps;return Constructor=SnackbarController,(protoProps=[{key:"dismiss",value:function($event){this.$parentScope.$ctrl.dismiss($event)}}])&&snackbar_controller_defineProperties(Constructor.prototype,protoProps),staticProps&&snackbar_controller_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),SnackbarController}();!function(obj,key,value){(key=snackbar_controller_toPropertyKey(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}(SnackbarController,"$inject",["$element","$scope"]);const snackbar_component={bindings:{notification:"<"},transclude:!0,controller:SnackbarController,templateUrl:"./Content/tmpl/snackbar.tmpl.html"};const snackbar_module=angular_default().module("snackbar",[]).component("tkSnackbar",snackbar_component).name;function switch_controller_typeof(obj){return switch_controller_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},switch_controller_typeof(obj)}function switch_controller_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,switch_controller_toPropertyKey(descriptor.key),descriptor)}}function switch_controller_toPropertyKey(arg){var key=function(input,hint){if("object"!==switch_controller_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==switch_controller_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===switch_controller_typeof(key)?key:String(key)}var SwitchController=function(){function SwitchController($element,$scope,$attrs){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,SwitchController),this.$element=$element,this.$scope=$scope,this.$attrs=$attrs}var Constructor,protoProps,staticProps;return Constructor=SwitchController,(protoProps=[{key:"$onInit",value:function(){var _this$$scope;this.$parentScope=null===(_this$$scope=this.$scope)||void 0===_this$$scope?void 0:_this$$scope.$parent}},{key:"$onChanges",value:function(onChangesObj){"ngReadonly"in onChangesObj&&this.readonlyHandler(onChangesObj.ngReadonly.currentValue)}},{key:"$postLink",value:function(){var _this=this;this.$element.addClass("n-tk-switch"),this.$element.removeAttr("id"),this.input=this.$element.find("input"),this.rippleRef=MDCRipple.attachTo(this.$element.find(".n-tk-switch__ripple-surface")[0]),this.rippleRef.unbounded=!0,this.validationWatcher=this.$parentScope.$watch("ViewData.DataErrors._dataErrors['".concat(this.id,"']"),(function(newVal,oldVal){if((null==newVal?void 0:newVal.length)>0){var message=newVal[0];_this.setValidationError(message)}else _this.removeValidationError()}))}},{key:"$onDestroy",value:function(){this.rippleRef.destroy(),this.validationWatcher()}},{key:"setValidationError",value:function(message){this.$element.addClass("n-tk-switch--invalid"),this.validationError=!0,this.validationMessage=message,this.input.attr("aria-invalid","true"),this.input.attr("aria-errormessage","".concat(this.id,".ErrorMessage")),console.log("Error!")}},{key:"removeValidationError",value:function(){this.validationError&&(this.$element.removeClass("n-tk-switch--invalid"),this.validationError=!1,this.validationMessage=null,this.input.attr("aria-invalid","false"),this.input.removeAttr("aria-errormessage"),console.log("Not an error!"))}},{key:"readonlyHandler",value:function(state){state?this.$element.addClass("n-tk-switch--readonly"):this.$element.removeClass("n-tk-switch--readonly")}}])&&switch_controller_defineProperties(Constructor.prototype,protoProps),staticProps&&switch_controller_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),SwitchController}();!function(obj,key,value){(key=switch_controller_toPropertyKey(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}(SwitchController,"$inject",["$element","$scope","$attrs"]);const switch_component={bindings:{ngModel:"=",ngReadonly:"<",ngClass:"<",ngChecked:"<",label:"@",id:"@",helpertext:"@?"},controller:SwitchController,templateUrl:"./Content/tmpl/switch.tmpl.html"};const switch_module=angular_default().module("switch",[]).component("tkSwitch",switch_component).name;function table_controller_typeof(obj){return table_controller_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},table_controller_typeof(obj)}function table_controller_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,table_controller_toPropertyKey(descriptor.key),descriptor)}}function table_controller_toPropertyKey(arg){var key=function(input,hint){if("object"!==table_controller_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==table_controller_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===table_controller_typeof(key)?key:String(key)}var TableController=function(){function TableController($element,$scope,$attrs,$compile,$mdPanel){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,TableController),this.$compile=$compile,this.$mdPanel=$mdPanel,this.$element=$element,this.$componentScope=$scope,this.$parentScope=$scope.$parent,this.$attrs=$attrs,this.isStripedTable=!1,this.isMultiselectTable=!1,this.BASE_CSS_CLASS="n-tk-table"}var Constructor,protoProps,staticProps;return Constructor=TableController,(protoProps=[{key:"$onInit",value:function(){this.$attrs.$attr.hasOwnProperty("multiselect")&&(this.isMultiselectTable=!0),this.$attrs.$attr.hasOwnProperty("striped")&&(this.isStripedTable=!0),this.isMobileDevice=this.$parentScope.isMobileDevice}},{key:"$postLink",value:function(){var _this$$element$find;this.$element.addClass(this.BASE_CSS_CLASS),null===(_this$$element$find=this.$element.find("table"))||void 0===_this$$element$find||_this$$element$find.addClass(this.BASE_CSS_CLASS+"__root"),this.tableHeaderRow=this.$element.find("thead tr"),this.isMultiselectTable&&this.addMultiselectToTableHeader()}},{key:"$onChanges",value:function(onChangesObj){onChangesObj.tableFor&&!onChangesObj.tableFor.isFirstChange()&&this.updateTableStatus()}},{key:"$doCheck",value:function(){this.updateTableStatus()}},{key:"$onDestroy",value:function(){}},{key:"addMultiselectToTableHeader",value:function(){var tableHeaderCell=document.createElement("th");tableHeaderCell.classList.add(this.BASE_CSS_CLASS+"__cell"),tableHeaderCell.setAttribute("role","columnheader");var checkboxComponent=document.createElement("tk-checkbox");checkboxComponent.setAttribute("ng-click","$ctrl.selectAll($event)"),checkboxComponent.setAttribute("ng-model","$ctrl.allSelected"),checkboxComponent.setAttribute("indeterminate","$ctrl.indeterminate"),tableHeaderCell.appendChild(checkboxComponent),this.tableHeaderRow.prepend(tableHeaderCell),this.$compile(tableHeaderCell)(this.$componentScope)}},{key:"updateTableStatus",value:function(){var _this$tableFor,_this$tableFor2,selectedLength=null===(_this$tableFor=this.tableFor)||void 0===_this$tableFor?void 0:_this$tableFor.filter((function(row){return row.vSelected})).length;this.allSelected=(null===(_this$tableFor2=this.tableFor)||void 0===_this$tableFor2?void 0:_this$tableFor2.length)===selectedLength,this.indeterminate=selectedLength>0&&!this.allSelected}},{key:"selectAll",value:function($event){$event.preventDefault(),$event.stopPropagation(),(this.allSelected||this.indeterminate)&&this.tableFor.map((function(row){return row.vSelected=!1})),this.allSelected||this.indeterminate||this.tableFor.map((function(row){return row.vSelected=!0}))}},{key:"showActionsForTable",value:function(event){var actions=this.$parentScope.ViewData.ActionGroupForVMClassname(this.vclass),contextMenuPosition=this.$mdPanel.newPanelPosition().relativeTo(event.target).addPanelPosition(this.$mdPanel.xPosition.OFFSET_START,this.$mdPanel.yPosition.BELOW),contextMenuAnimation=this.$mdPanel.newPanelAnimation().openFrom(event.target).closeTo(event.target).withAnimation(this.$mdPanel.animation.SCALE).duration({open:80,close:80}),currentRow=this.tableFor.filter((function(row){return row.vCurrent}))[0],contextMenuConfig={attachTo:angular_default().element(document.body),position:contextMenuPosition,animation:contextMenuAnimation,controllerAs:"$ctrl",controller:function(mdPanelRef){this.executeAction=function(action,$event){mdPanelRef.close().then((function(){currentRow?action.ExecuteAfterModal(currentRow[0],$event):console.warn("Action could be executed only the vCurrent for the table is set.")}))}},focusOnOpen:!0,clickOutsideToClose:!0,propagateContainerEvents:!0,locals:{actions},template:'\n        <Menu on-execute="$ctrl.executeAction(action,$event)" actions="$ctrl.actions" />\n      '};this.$mdPanel.open(contextMenuConfig).then((function(mdPanelRef){}))}}])&&table_controller_defineProperties(Constructor.prototype,protoProps),staticProps&&table_controller_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),TableController}();!function(obj,key,value){(key=table_controller_toPropertyKey(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}(TableController,"$inject",["$element","$scope","$attrs","$compile","$mdPanel"]);const table_component={bindings:{tableFor:"<",vclass:"@",vcol:"@",label:"@"},transclude:!0,controller:TableController,controllerAs:"$ctrl",templateUrl:"./Content/tmpl/table.tmpl.html"};const table_module=angular_default().module("table",[]).component("tkTable",table_component).name;function textfield_controller_typeof(obj){return textfield_controller_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},textfield_controller_typeof(obj)}function textfield_controller_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,textfield_controller_toPropertyKey(descriptor.key),descriptor)}}function textfield_controller_defineProperty(obj,key,value){return(key=textfield_controller_toPropertyKey(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function textfield_controller_toPropertyKey(arg){var key=function(input,hint){if("object"!==textfield_controller_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==textfield_controller_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===textfield_controller_typeof(key)?key:String(key)}var TextfieldController=function(){function TextfieldController($scope,$element,$attrs,$compile,$locale){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,TextfieldController),textfield_controller_defineProperty(this,"validationError",!1),this.$scope=$scope,this.$element=$element,this.$attrs=$attrs,this.$compile=$compile,this.$locale=$locale}var Constructor,protoProps,staticProps;return Constructor=TextfieldController,protoProps=[{key:"$onInit",value:function(){this.$parentScope=this.$scope.$parent,this.icon&&(this.iconElement=document.createElement("i"),this.iconElement.classList.add("n-tk-textfield__icon"),this.iconElement.textContent=this.icon.name)}},{key:"$onChanges",value:function(onChangesObj){"ngReadonly"in onChangesObj&&this.handleDisabledState(onChangesObj.ngReadonly.currentValue)}},{key:"$postLink",value:function(){var _this=this;if(this.$element.addClass("n-tk-textfield"),this.input=this.$element.find("input")[0],this.inputContainer=this.$element.find(".n-tk-textfield__container")[0],this.labelEl=this.$element.find(".n-tk-textfield__label"),this.input.addEventListener("focus",(function(){_this.$element.addClass("n-tk-textfield--focused")})),this.input.addEventListener("blur",(function(){_this.$element.removeClass("n-tk-textfield--focused")})),this.iconStart){var iconToPrepend=this.createIcon(this.iconStart);if(this.$compile(iconToPrepend)(this.$scope),"label"===this.iconTarget)this.labelEl.prepend(iconToPrepend);else if("control"===this.iconTarget){var _this$inputContainer;null===(_this$inputContainer=this.inputContainer)||void 0===_this$inputContainer||_this$inputContainer.prepend(iconToPrepend),this.$element.addClass("n-tk-textfield--leading-icon")}}if(this.iconEnd){var iconToAppend=this.createIcon(this.iconEnd);if(this.$compile(iconToAppend)(this.$scope),"label"===this.iconTarget)this.labelEl.append(iconToAppend);else if("control"===this.iconTarget){var _this$inputContainer2;null===(_this$inputContainer2=this.inputContainer)||void 0===_this$inputContainer2||_this$inputContainer2.append(iconToAppend),this.$element.addClass("n-tk-textfield--trailing-icon")}}this.$attrs.$observe("inputPattern",(function(value){if(value){var pattern=_this.$attrs.inputPattern;_this.input.setAttribute("ng-pattern",pattern),_this.$element.removeAttr("input-pattern")}})),this.$attrs.$observe("type",(function(val){val?_this.input.setAttribute("type",val):_this.input.setAttribute("type","text"),_this.$element.removeAttr("type")})),this.validationWatcher=this.$parentScope.$watch("ViewData.DataErrors._dataErrors['".concat(this.id,"']"),(function(newVal,oldVal){if((null==newVal?void 0:newVal.length)>0){var message=newVal[0];_this.setValidationError(message)}else _this.removeValidationError()}))}},{key:"$doCheck",value:function(){var _this$input,_this$input2,_this$input3;this.helpertext&&!this.validationError?null!==(_this$input=this.input)&&void 0!==_this$input&&_this$input.hasAttribute("aria-describedby")||null===(_this$input2=this.input)||void 0===_this$input2||_this$input2.setAttribute("aria-describedby","".concat(this.id,".HelperText")):null===(_this$input3=this.input)||void 0===_this$input3||_this$input3.removeAttribute("aria-describedby")}},{key:"$onDestroy",value:function(){this.validationWatcher()}},{key:"setValidationError",value:function(message){this.$element.addClass("n-tk-textfield--invalid"),this.validationError=!0,this.validationMessage=message,this.input.setAttribute("aria-invalid","true"),this.input.setAttribute("aria-errormessage","".concat(this.id,".ErrorMessage"))}},{key:"removeValidationError",value:function(){this.$element.removeClass("n-tk-textfield--invalid"),this.validationError=!1,this.input.setAttribute("aria-invalid","false"),this.input.removeAttribute("aria-errormessage")}},{key:"handleDisabledState",value:function(state){state?this.$element.addClass("n-tk-textfield--disabled"):this.$element.removeClass("n-tk-textfield--disabled")}},{key:"createIcon",value:function(icon){var iconComponent=document.createElement("tk-icon");return iconComponent.textContent=icon,iconComponent}}],protoProps&&textfield_controller_defineProperties(Constructor.prototype,protoProps),staticProps&&textfield_controller_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),TextfieldController}();textfield_controller_defineProperty(TextfieldController,"$inject",["$scope","$element","$attrs","$compile","$locale"]);const textfield_component={bindings:{ngModel:"=",ngReadonly:"<",ngClass:"<",id:"@?",label:"@",type:"@",inputmode:"@?",placeholder:"@?",helpertext:"@?",autofocus:"<?",autocomplete:"@?",size:"@?",iconStart:"@?",iconEnd:"@?",iconTarget:"@?",inputPattern:"@?"},controller:TextfieldController,templateUrl:"./Content/tmpl/textfield.tmpl.html"};const textfield_module=angular_default().module("textfield",[]).component("tkTextfield",textfield_component).name;function timepicker_controller_typeof(obj){return timepicker_controller_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},timepicker_controller_typeof(obj)}function timepicker_controller_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,timepicker_controller_toPropertyKey(descriptor.key),descriptor)}}function timepicker_controller_toPropertyKey(arg){var key=function(input,hint){if("object"!==timepicker_controller_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==timepicker_controller_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===timepicker_controller_typeof(key)?key:String(key)}var TimepickerController=function(){function TimepickerController($element,$scope){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,TimepickerController),this.$element=$element,this.$scope=$scope,console.log(this)}var Constructor,protoProps,staticProps;return Constructor=TimepickerController,(protoProps=[{key:"$onInit",value:function(){this.$parentScope=this.$scope.$parent}},{key:"$postLink",value:function(){var _this=this;this.$element.addClass("n-tk-timepicker"),this.input=this.$element.find("input"),this.input.on("focus",this.handlerFocus.bind(this)),this.validationWatcher=this.$parentScope.$watch("ViewData.DataErrors._dataErrors['".concat(this.id,"']"),(function(newVal,oldVal){if((null==newVal?void 0:newVal.length)>0){var message=newVal[0];_this.setValidationError(message)}else _this.removeValidationError()}))}},{key:"$onChanges",value:function(onChangesObj){"ngReadonly"in onChangesObj&&this.handleReadonly(onChangesObj.ngReadonly.currentValue)}},{key:"$onDestroy",value:function(){this.input.off("focus"),this.validationWatcher()}},{key:"handlerFocus",value:function(){var _this2=this;this.$element.addClass("n-tk-timepicker--focused"),this.input.on("blur",(function(e){_this2.$element.removeClass("n-tk-timepicker--focused")}))}},{key:"handleReadonly",value:function(state){state?this.$element.addClass("n-tk-timepicker--readonly"):this.$element.removeClass("n-tk-timepicker--readonly")}},{key:"setValidationError",value:function(message){this.$element.addClass("n-tk-timepicker--invalid"),this.validationError=!0,this.validationMessage=message,this.input.attr("aria-invalid","true"),this.input.attr("aria-errormessage","".concat(this.id,".ErrorMessage"))}},{key:"removeValidationError",value:function(){this.$element.removeClass("n-tk-timepicker--invalid"),this.validationError=!1,this.input.removeAttr("aria-invalid"),this.input.removeAttr("aria-errormessage")}}])&&timepicker_controller_defineProperties(Constructor.prototype,protoProps),staticProps&&timepicker_controller_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),TimepickerController}();!function(obj,key,value){(key=timepicker_controller_toPropertyKey(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}(TimepickerController,"$inject",["$element","$scope","$attrs"]);const timepicker_component={bindings:{ngModel:"=",ngReadonly:"<",ngClass:"<",id:"@",label:"@?",helpertext:"@?"},controller:TimepickerController,templateUrl:"./Content/tmpl/timepicker.tmpl.html"};const timepicker_module=angular_default().module("timepicker",[]).component("tkTimepicker",timepicker_component).name;const table_head_module=angular_default().module("tableHead",[]).directive("tableHead",(function(){return{restrict:"A",link:function($scope,$element,$attrs){var _$element$find,_$element$find2;$element.addClass("n-tk-table__head"),null===(_$element$find=$element.find("tr"))||void 0===_$element$find||_$element$find.addClass("n-tk-table__row"),null===(_$element$find2=$element.find("th"))||void 0===_$element$find2||_$element$find2.addClass("n-tk-table__cell")}}})).name;const table_body_module=angular_default().module("tableBody",[]).directive("tableBody",(function(){return{restrict:"A",link:function($scope,$element,$attrs){$element.addClass("n-tk-table__body")}}})).name;var TableRowModule=angular_default().module("tableRow",[]).directive("tableRow",(function($compile,$timeout){return function($compile,$timeout){return{restrict:"A",link:function($scope,$element,$attrs){var _$element$find;$element.addClass("n-tk-table__row"),null===(_$element$find=$element.find("td"))||void 0===_$element$find||_$element$find.addClass("n-tk-table__cell"),$element[0];var tableCtrl=$scope.$parent.$parent.$ctrl,row=null;for(var key in $scope)if(key.startsWith("row")){row=$scope[key];break}if(tableCtrl.isMultiselectTable){var tableHeaderCell=document.createElement("td");tableHeaderCell.classList.add(tableCtrl.BASE_CSS_CLASS+"__cell"),tableHeaderCell.setAttribute("role","columnheader");var checkboxComponent=document.createElement("tk-checkbox");checkboxComponent.setAttribute("ng-model","row.vSelected"),checkboxComponent.setAttribute("ng-checked","row.vSelected"),checkboxComponent.setAttribute("ng-click","row.handleMultiRowSelect($event, $index)"),tableHeaderCell.appendChild(checkboxComponent),$element.prepend(tableHeaderCell),$compile(tableHeaderCell)($scope)}var timer,selectedStateWatcher=$scope.$watch("row.vSelected",(function(isSelected){isSelected?$element.addClass(tableCtrl.BASE_CSS_CLASS+"__row--selected"):$element.removeClass(tableCtrl.BASE_CSS_CLASS+"__row--selected")})),currentStateWatcher=$scope.$watch("row.vCurrent",(function(isCurrent){isCurrent?$element.addClass(tableCtrl.BASE_CSS_CLASS+"__row--current"):$element.removeClass(tableCtrl.BASE_CSS_CLASS+"__row--current")}));$element.on("click",(function($event){"INPUT"!==$event.target.nodeName?row.ClickDispatcher($event,$scope.$index):row.vCurrent=!0})),$element.on("dblclick",(function($event){"INPUT"!==$event.target.nodeName&&($event.preventDefault(),row.DblClickDispatcher($event)),window.getSelection()&&window.getSelection().removeAllRanges()})),$element.on("contextmenu",(function($event){$event.preventDefault(),$event.stopPropagation(),row.RightClickDispatcher($event)})),$element.on("touchstart",(function($event){timer=$timeout((function(){row.RightClickDispatcher($event),window.getSelection().removeAllRanges()}),300)})),$element.on("touchend",(function($event){$timeout.cancel(timer)})),$element.on("touchcancel",(function($event){$timeout.cancel(timer)})),$scope.$on("$destroy",(function(e){$element.unbind(),selectedStateWatcher(),currentStateWatcher()}))}}}($compile,$timeout)})).name;const table_row_module=TableRowModule;const menu_component={bindings:{onExecute:"&",actions:"<"},template:'\n    <div class="n-tk-menu">\n      <div ng-repeat="group in $ctrl.actions.SubMenuGroups | orderBy: \'SubMenuGroupSortKey\'" class="n-tk-menu__group">\n        <button ng-repeat="action in group.ActionList.Actions | orderBy: \'ActionSortKey\'" ng-click="$ctrl.onExecute({action})" class="n-tk-menu__action" ripple>\n          {{action.Presentation}}\n        </button>\n      </div>\n    </div>\n  '};const menu_module=angular_default().module("context-menu",[]).component("menu",menu_component).name;function sidebar_controller_typeof(obj){return sidebar_controller_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},sidebar_controller_typeof(obj)}function sidebar_controller_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,sidebar_controller_toPropertyKey(descriptor.key),descriptor)}}function sidebar_controller_toPropertyKey(arg){var key=function(input,hint){if("object"!==sidebar_controller_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==sidebar_controller_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===sidebar_controller_typeof(key)?key:String(key)}const sidebar_component={bindings:{stateActions:"<",actionsGroup:"<"},controller:function(){function SidebarController($scope,$element,$attrs){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,SidebarController),this.$scope=$scope,this.$element=$element,this.$parentScope=this.$scope.$parent}var Constructor,protoProps,staticProps;return Constructor=SidebarController,(protoProps=[{key:"$onInit",value:function(){}},{key:"$postLink",value:function(){this.$element.addClass("n-tk-sidebar")}},{key:"$onChanges",value:function(onChangesObj){}},{key:"$onDestroy",value:function(){}}])&&sidebar_controller_defineProperties(Constructor.prototype,protoProps),staticProps&&sidebar_controller_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),SidebarController}(),templateUrl:"./Content/tmpl/sidebar.tmpl.html"};const sidebar_module=angular_default().module("sidebar",[]).component("tkSidebar",sidebar_component).name;function sidebar_group_controller_typeof(obj){return sidebar_group_controller_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},sidebar_group_controller_typeof(obj)}function sidebar_group_controller_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,sidebar_group_controller_toPropertyKey(descriptor.key),descriptor)}}function sidebar_group_controller_defineProperty(obj,key,value){return(key=sidebar_group_controller_toPropertyKey(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function sidebar_group_controller_toPropertyKey(arg){var key=function(input,hint){if("object"!==sidebar_group_controller_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==sidebar_group_controller_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===sidebar_group_controller_typeof(key)?key:String(key)}var SidebarGroupController=function(){function SidebarGroupController($element,$timeout){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,SidebarGroupController),sidebar_group_controller_defineProperty(this,"actionsRipple",[]),this.$element=$element,this.$timeout=$timeout,this.visible=!0}var Constructor,protoProps,staticProps;return Constructor=SidebarGroupController,(protoProps=[{key:"$onInit",value:function(){}},{key:"$postLink",value:function(){var _this=this;this.$timeout((function(){_this.header=_this.$element[0].querySelector(".n-tk-sidebar-group__header"),_this.actions=_this.$element[0].querySelectorAll(".n-tk-sidebar__action"),_this.header&&(_this.headerRipple=_this.initRipple())}),0)}},{key:"toggleVisibility",value:function($event){this.visible=!this.visible}},{key:"initRipple",value:function(){var _this2=this;return this.header.classList.add("mdc-ripple-surface"),this.$timeout((function(){_this2.header.setAttribute("style","--mdc-ripple-color: ".concat(getComputedStyle(_this2.header).color))}),0),MDCRipple.attachTo(this.header)}},{key:"$onDestroy",value:function(){var _this$headerRipple;null===(_this$headerRipple=this.headerRipple)||void 0===_this$headerRipple||_this$headerRipple.destroy()}}])&&sidebar_group_controller_defineProperties(Constructor.prototype,protoProps),staticProps&&sidebar_group_controller_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),SidebarGroupController}();sidebar_group_controller_defineProperty(SidebarGroupController,"$inject",["$element","$timeout"]);const sidebar_group_component={bindings:{group:"<"},controller:SidebarGroupController,templateUrl:"./Content/tmpl/sidebar-group.tmpl.html"};const sidebar_group_module=angular_default().module("sidebarGroup",[]).component("tkSidebarGroup",sidebar_group_component).name;function sidebar_action_controller_typeof(obj){return sidebar_action_controller_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},sidebar_action_controller_typeof(obj)}function sidebar_action_controller_toConsumableArray(arr){return function(arr){if(Array.isArray(arr))return sidebar_action_controller_arrayLikeToArray(arr)}(arr)||function(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function(o,minLen){if(!o)return;if("string"==typeof o)return sidebar_action_controller_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sidebar_action_controller_arrayLikeToArray(o,minLen)}(arr)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sidebar_action_controller_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function sidebar_action_controller_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,sidebar_action_controller_toPropertyKey(descriptor.key),descriptor)}}function sidebar_action_controller_toPropertyKey(arg){var key=function(input,hint){if("object"!==sidebar_action_controller_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==sidebar_action_controller_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===sidebar_action_controller_typeof(key)?key:String(key)}var SidebarActionController=function(){function SidebarActionController($element,$scope,$timeout,$animate,$compile){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,SidebarActionController),this.$element=$element,this.$scope=$scope,this.$timeout=$timeout,this.$animate=$animate,this.$compile=$compile}var Constructor,protoProps,staticProps;return Constructor=SidebarActionController,(protoProps=[{key:"$onInit",value:function(){this.hintWhenDisabled=this.action.HintWhenDisabled,this.hintWhenEnabled=this.action.HintWhenEnabled,(this.hintWhenDisabled||this.hintWhenEnabled)&&(this.tooltipComponent=document.createElement("tk-tooltip"),this.tooltipComponent.setAttribute("text",this.hintWhenDisabled?this.hintWhenDisabled:this.hintWhenEnabled),this.tooltipComponent.setAttribute("position","right"),this.$element.append(this.tooltipComponent),this.$compile(this.tooltipComponent)(this.$scope))}},{key:"$postLink",value:function(){this.button=this.$element.find("button")[0],this.ripple=this.initRipple()}},{key:"initRipple",value:function(){var _this=this,primaryColorVal=getComputedStyle(document.documentElement).getPropertyValue("--primary-color").split(",").map((function(channel){return Number(channel)})),colorDeclaration="rgb(".concat(sidebar_action_controller_toConsumableArray(primaryColorVal),")");return this.$timeout((function(){_this.button.classList.add("mdc-ripple-surface"),_this.button.setAttribute("style","--mdc-ripple-color: ".concat(colorDeclaration))}),0),MDCRipple.attachTo(this.button)}},{key:"$onDestroy",value:function(){this.ripple.destroy()}}])&&sidebar_action_controller_defineProperties(Constructor.prototype,protoProps),staticProps&&sidebar_action_controller_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),SidebarActionController}();!function(obj,key,value){(key=sidebar_action_controller_toPropertyKey(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}(SidebarActionController,"$inject",["$element","$scope","$timeout","$animate","$compile"]);const sidebar_action_component={bindings:{action:"<"},controller:SidebarActionController,templateUrl:"./Content/tmpl/sidebar-action.tmpl.html"};const sidebar_action_module=angular_default().module("sidebar-action",[]).component("tkSidebarAction",sidebar_action_component).name;function tooltip_controller_typeof(obj){return tooltip_controller_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},tooltip_controller_typeof(obj)}function tooltip_controller_regeneratorRuntime(){tooltip_controller_regeneratorRuntime=function(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==tooltip_controller_typeof(value)&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName,nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function tooltip_controller_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function tooltip_controller_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,tooltip_controller_toPropertyKey(descriptor.key),descriptor)}}function tooltip_controller_defineProperty(obj,key,value){return(key=tooltip_controller_toPropertyKey(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function tooltip_controller_toPropertyKey(arg){var key=function(input,hint){if("object"!==tooltip_controller_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==tooltip_controller_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===tooltip_controller_typeof(key)?key:String(key)}var TooltipPosition=function(TooltipPosition){return TooltipPosition.RIGHT="right",TooltipPosition.LEFT="left",TooltipPosition.BOTTOM="bottom",TooltipPosition.TOP="top",TooltipPosition}(TooltipPosition||{}),TooltipController=function(){function TooltipController($scope,$element,$rootScope,$rootElement){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,TooltipController),tooltip_controller_defineProperty(this,"minTooltipWidth",80),tooltip_controller_defineProperty(this,"minTooltipHeight",30),this.$scope=$scope,this.$element=$element,this.$parentScope=this.$scope.$parent,this.$rootScope=$rootScope,this.$rootElement=$rootElement}var Constructor,protoProps,staticProps,fn,_setTooltipPosition;return Constructor=TooltipController,protoProps=[{key:"$onInit",value:function(){}},{key:"$postLink",value:function(){this.$element.addClass("n-tk-tooltip"),this.$element.attr("role","tooltip"),this.parentElement=this.$element.parent(),this.setTooltipPosition(),this.parentElement&&(this.parentElement[0].addEventListener("mouseover",this.handleParentHover.bind(this)),this.parentElement[0].addEventListener("focusin ",this.handleParentFocus.bind(this)))}},{key:"$onDestroy",value:function(){this.parentElement[0].removeEventListener("mouseover",this.handleParentHover),this.parentElement[0].removeEventListener("focusin",this.handleParentFocus)}},{key:"handleParentHover",value:function(evt){var _this=this;evt.preventDefault(),this.$element.addClass("n-tk-tooltip--visible"),this.parentElement[0].addEventListener("mouseleave",(function(evt){_this.$element.removeClass("n-tk-tooltip--visible")}))}},{key:"handleParentFocus",value:function(evt){var _this2=this;evt.preventDefault(),this.$element.addClass("n-tk-tooltip--visible"),this.parentElement[0].addEventListener("focusout",(function(evt){_this2.$element.removeClass("n-tk-tooltip--visible")}))}},{key:"positioningOfTooltip",value:function(){var _this3=this;return new Promise((function(resolve,reject){var _this3$parentElement$2;_this3.parentElement[0]||reject(new Error("Tooltip must to have parent component."));var _this3$parentElement$=null===(_this3$parentElement$2=_this3.parentElement[0])||void 0===_this3$parentElement$2?void 0:_this3$parentElement$2.getBoundingClientRect(),x=_this3$parentElement$.x,y=_this3$parentElement$.y,windowWidth=window.innerWidth,windowHeight=window.innerHeight,enoughSpaceLeft=x>_this3.minTooltipWidth,enoughSpaceRight=x<windowWidth-_this3.minTooltipWidth,enoughSpaceTop=y>_this3.minTooltipHeight,enoughSpaceBottom=y<windowHeight-_this3.minTooltipHeight;_this3.position!==TooltipPosition.LEFT||enoughSpaceLeft||resolve(TooltipPosition.RIGHT),_this3.position!==TooltipPosition.TOP||enoughSpaceTop||resolve(TooltipPosition.BOTTOM),_this3.position!==TooltipPosition.RIGHT||enoughSpaceRight||resolve(TooltipPosition.LEFT),_this3.position!==TooltipPosition.BOTTOM||enoughSpaceBottom||resolve(TooltipPosition.TOP),resolve(_this3.position)}))}},{key:"setTooltipPosition",value:(fn=tooltip_controller_regeneratorRuntime().mark((function _callee(){var position;return tooltip_controller_regeneratorRuntime().wrap((function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,this.positioningOfTooltip();case 2:position=_context.sent,this.$element.addClass("n-tk-tooltip--".concat(position)),this.$element.attr("style","display: inline-block");case 5:case"end":return _context.stop()}}),_callee,this)})),_setTooltipPosition=function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){tooltip_controller_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){tooltip_controller_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))},function(){return _setTooltipPosition.apply(this,arguments)})}],protoProps&&tooltip_controller_defineProperties(Constructor.prototype,protoProps),staticProps&&tooltip_controller_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),TooltipController}();tooltip_controller_defineProperty(TooltipController,"$inject",["$scope","$element","$rootScope","$rootElement"]);const tooltip_component={bindings:{text:"@",position:"@"},controller:TooltipController,templateUrl:"./Content/tmpl/tooltip.tmpl.html"};const tooltip_module=angular_default().module("tooltip",[]).component("tkTooltip",tooltip_component).name;function fab_controller_typeof(obj){return fab_controller_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},fab_controller_typeof(obj)}function fab_controller_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,fab_controller_toPropertyKey(descriptor.key),descriptor)}}function fab_controller_defineProperty(obj,key,value){return(key=fab_controller_toPropertyKey(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function fab_controller_toPropertyKey(arg){var key=function(input,hint){if("object"!==fab_controller_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==fab_controller_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===fab_controller_typeof(key)?key:String(key)}var FabController=function(){function FabController($element,$attrs,$timeout,$window,$animate,eventEmitter){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,FabController),fab_controller_defineProperty(this,"rippleRef",null),this.$element=$element,this.$attrs=$attrs,this.$timeout=$timeout,this.$window=$window,this.$animate=$animate,this.eventEmitter=eventEmitter}var Constructor,protoProps,staticProps;return Constructor=FabController,(protoProps=[{key:"$postLink",value:function(){var _this=this;if(this.$element.addClass("n-tk-fab"),this.button=this.$element.find("button"),!this.button)return console.warn(FabComponentErrors.buttonNotDefined,this.$element[0]);this.button.addClass("mdc-ripple-surface"),this.$timeout((function(){_this.$element.attr("style","--mdc-ripple-color: ".concat(_this.$window.getComputedStyle(_this.button[0]).color))})),this.rippleRef=MDCRipple.attachTo(this.button[0]);var variant=this.$attrs.$attr.hasOwnProperty("variant")?this.$attrs.variant:null,size=this.$attrs.$attr.hasOwnProperty("size")?this.$attrs.size:"small";if(variant&&this.button.addClass("n-tk-fab__button--".concat(variant)),size&&this.button.addClass("n-tk-fab__button--".concat(size)),"extended"===variant){var buttonText=this.$attrs.$attr.hasOwnProperty("label")?this.$attrs.label:null;if(!buttonText)return console.warn(FabComponentErrors.missingLabel,this.$element[0]);var span=$("<span>");span.addClass("n-tk-fab__button-text"),span.text(buttonText),this.$animate.enter(span,this.button,$("tk-icon"))}}},{key:"$onChanges",value:function(onChangesObj){var _this2=this;"ngDisabled"in onChangesObj&&this.$timeout((function(){return _this2.rippleRef.disabled=onChangesObj.ngDisabled.currentValue}),0),"ariaExpanded"in onChangesObj&&this.$timeout((function(){return _this2.button.attr("aria-expanded",String(onChangesObj.ariaExpanded.currentValue))}),0),"ariaPressed"in onChangesObj&&this.$timeout((function(){return _this2.button.attr("aria-pressed",String(onChangesObj.ariaPressed.currentValue))}),0)}},{key:"$onDestroy",value:function(){this.rippleRef.destroy()}}])&&fab_controller_defineProperties(Constructor.prototype,protoProps),staticProps&&fab_controller_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),FabController}();fab_controller_defineProperty(FabController,"$inject",["$element","$attrs","$timeout","$window","$animate","EventEmitter"]);var FabComponentErrors=function(FabComponentErrors){return FabComponentErrors.missingLabel="'Extended' varaint of Fab component requires label text. Use label=\"<LABEL_TEXT>\" attribute on the parent element <tk-fab>",FabComponentErrors.buttonNotDefined="Fab component missing button element. Please have a look into the source code.",FabComponentErrors}(FabComponentErrors||{});const fab_component={bindings:{clickHandler:"&",onClick:"&",ngDisabled:"<",ngClass:"<",label:"@",size:"@",variant:"@",ariaExpanded:"<?",ariaControls:"@?",ariaPressed:"<?"},transclude:!0,controller:FabController,templateUrl:"./Content/tmpl/fab.tmpl.html"};function event_typeof(obj){return event_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},event_typeof(obj)}function event_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,event_toPropertyKey(descriptor.key),descriptor)}}function event_createClass(Constructor,protoProps,staticProps){return protoProps&&event_defineProperties(Constructor.prototype,protoProps),staticProps&&event_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}function event_toPropertyKey(arg){var key=function(input,hint){if("object"!==event_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==event_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===event_typeof(key)?key:String(key)}var Event=event_createClass((function Event($event){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Event),this.$event=$event}));const fab_module=angular_default().module("fab",[]).component("tkFab",fab_component).value("EventEmitter",(function(payload){return new Event(payload)})).name;function debug_info_controller_typeof(obj){return debug_info_controller_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},debug_info_controller_typeof(obj)}function debug_info_controller_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,debug_info_controller_toPropertyKey(descriptor.key),descriptor)}}function _classPrivateMethodInitSpec(obj,privateSet){!function(obj,privateCollection){if(privateCollection.has(obj))throw new TypeError("Cannot initialize the same private elements twice on an object")}(obj,privateSet),privateSet.add(obj)}function debug_info_controller_toPropertyKey(arg){var key=function(input,hint){if("object"!==debug_info_controller_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==debug_info_controller_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===debug_info_controller_typeof(key)?key:String(key)}function _classPrivateMethodGet(receiver,privateSet,fn){if(!privateSet.has(receiver))throw new TypeError("attempted to get private field on non-instance");return fn}var _elementOutsideTarget=new WeakSet,_resetServer=new WeakSet,_openAppInfo=new WeakSet,_navigateToDebug=new WeakSet,_navigateToDevelopment=new WeakSet,_navigateToServerInfo=new WeakSet,DebugInfoController=function(){function DebugInfoController($scope,$element,$location,$window,$route){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,DebugInfoController),_classPrivateMethodInitSpec(this,_navigateToServerInfo),_classPrivateMethodInitSpec(this,_navigateToDevelopment),_classPrivateMethodInitSpec(this,_navigateToDebug),_classPrivateMethodInitSpec(this,_openAppInfo),_classPrivateMethodInitSpec(this,_resetServer),_classPrivateMethodInitSpec(this,_elementOutsideTarget),this.$scope=$scope,this.$element=$element,this.$location=$location,this.$window=$window,this.$route=$route}var Constructor,protoProps,staticProps;return Constructor=DebugInfoController,(protoProps=[{key:"$onInit",value:function(){this.initDebugOptions(),this.$parentScope=this.$scope.$parent}},{key:"$postLink",value:function(){this.$element.addClass("n-tk-debug-info"),this.$window.addEventListener("keydown",this.closeMenuOnEsc.bind(this)),this.$window.addEventListener("mousedown",this.closeMenuOnOutsideClick.bind(this))}},{key:"$onDestroy",value:function(){this.$window.removeEventListener("keydown",this.closeMenuOnEsc),this.$window.removeEventListener("mousedown",this.closeMenuOnOutsideClick)}},{key:"initDebugOptions",value:function(){var _this=this;this.debugOptions=[{action:function(props){return _classPrivateMethodGet(_this,_navigateToDebug,_navigateToDebug2).call(_this,props)},name:"Navigate to the debug page",icon:"data_object"},{action:function(props){return _classPrivateMethodGet(_this,_navigateToDevelopment,_navigateToDevelopment2).call(_this,props)},name:"Navigate to the development page",icon:"developer_mode"},{action:function(props){return _classPrivateMethodGet(_this,_navigateToServerInfo,_navigateToServerInfo2).call(_this,props)},name:"Navigate to server information page",icon:"dns"},{action:function(props){return _classPrivateMethodGet(_this,_resetServer,_resetServer2).call(_this,props)},name:"Reset server",icon:"restart_alt"},{action:function($event){return _classPrivateMethodGet(_this,_openAppInfo,_openAppInfo2).call(_this,$event)},name:"Open application info dialog",icon:"info"}]}},{key:"closeMenuOnOutsideClick",value:function(event){var target=$(event.target);this.visible&&_classPrivateMethodGet(this,_elementOutsideTarget,_elementOutsideTarget2).call(this,this.$element,target)&&(this.triggerVisibility(),this.$scope.$parent.$apply())}},{key:"closeMenuOnEsc",value:function(event){this.visible&&"Escape"===event.code&&(this.triggerVisibility(),this.$scope.$parent.$apply())}}])&&debug_info_controller_defineProperties(Constructor.prototype,protoProps),staticProps&&debug_info_controller_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),DebugInfoController}();function _elementOutsideTarget2(target,element){return 0===target.find(element).length}function _resetServer2(props){this.$parentScope.controller.resetServer()}function _openAppInfo2($event){this.$scope.$parent.controller.showAppInfoDialog($event),this.triggerVisibility()}function _navigateToDebug2(props){var currentUrl=this.$location.path();this.$location.path("".concat(currentUrl,"/debug"))}function _navigateToDevelopment2(props){var rawUrl=/^.*\App#/.exec(window.location.href),viewName=(rawUrl[0].substring(0,rawUrl[0].length-5),this.$route.current.params.name);window.location.href="".concat(getRootUrl(window.location.href),"/Turnkey/Development?view=").concat(viewName)}function _navigateToServerInfo2(props){var rawUrl=/^.*\App#/.exec(window.location.href);rawUrl[0].substring(0,rawUrl[0].length-5);window.location.href="".concat(getRootUrl(window.location.href),"/Developer/ServerInfo")}!function(obj,key,value){(key=debug_info_controller_toPropertyKey(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}(DebugInfoController,"$inject",["$scope","$element","$location","$window","$route"]);const debug_info_component={bindings:{triggerVisibility:"&",visible:"<"},controller:DebugInfoController,templateUrl:"./Content/tmpl/panels/debug-info.tmpl.html"};const debug_info_module=angular_default().module("debugInfo",[]).component("tkDebugInfo",debug_info_component).name;function button_controller_typeof(obj){return button_controller_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},button_controller_typeof(obj)}function button_controller_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,button_controller_toPropertyKey(descriptor.key),descriptor)}}function button_controller_toPropertyKey(arg){var key=function(input,hint){if("object"!==button_controller_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==button_controller_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===button_controller_typeof(key)?key:String(key)}var ButtonController=function(){function ButtonController($scope,$element,$timeout,$compile){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ButtonController),this.$scope=$scope,this.$element=$element,this.$timeout=$timeout,this.$compile=$compile}var Constructor,protoProps,staticProps;return Constructor=ButtonController,(protoProps=[{key:"$postLink",value:function(){var _this=this;if(this.$element.addClass("n-tk-button"),this.$button=this.$element.find("button"),this.$button&&(this.$button.addClass("n-tk-button__base"),this.$button.addClass("mdc-ripple-surface"),this.$timeout((function(){_this.$button.attr("style","--mdc-ripple-color: ".concat(getComputedStyle(_this.$button[0]).color)),_this.rippleRef=MDCRipple.attachTo(_this.$button[0])}),0)),this.variant&&(this.$element.addClass(this.variant),this.$button.addClass(this.variant)),this.size&&(this.$element.addClass(this.size),this.$button.addClass(this.size)),this.iconStart){var iconToAppend=this.createIcon("iconStart");this.$compile(iconToAppend)(this.$scope),this.$button.prepend(iconToAppend),this.$button.addClass("n-tk-button__base--leading-icon")}if(this.iconEnd){var _iconToAppend=this.createIcon("iconEnd");this.$compile(_iconToAppend)(this.$scope),this.$button.append(_iconToAppend),this.$button.addClass("n-tk-button__base--trailing-icon")}}},{key:"$onChanges",value:function(onChangesObj){"ngDisabled"in onChangesObj&&(onChangesObj.ngDisabled.isFirstChange()||(this.rippleRef.disabled=onChangesObj.ngDisabled.currentValue)),"ngClass"in onChangesObj&&/text|outlined/.test(onChangesObj.ngClass.currentValue)&&(this.$element.removeClass("contained"),this.$button.removeClass("contained"))}},{key:"$onDestroy",value:function(){this.rippleRef.destroy()}},{key:"createIcon",value:function(iconPosition){var iconComponent=document.createElement("tk-icon");return iconComponent.textContent="{{$ctrl.".concat(iconPosition,"}}"),this.iconShowExp&&iconComponent.setAttribute("ng-show","$ctrl.iconShowExp"),iconComponent}}])&&button_controller_defineProperties(Constructor.prototype,protoProps),staticProps&&button_controller_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),ButtonController}();!function(obj,key,value){(key=button_controller_toPropertyKey(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}(ButtonController,"$inject",["$scope","$element","$timeout","$compile"]);const button_component={bindings:{onClick:"&",ngDisabled:"<",ngClass:"<",size:"@",variant:"@",iconStart:"@?",iconEnd:"@?",iconShowExp:"<?"},transclude:!0,controller:ButtonController,templateUrl:"./Content/tmpl/button.tmpl.html"};const button_module=angular_default().module("button",[]).component("tkButton",button_component).name;function select_controller_typeof(obj){return select_controller_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},select_controller_typeof(obj)}function select_controller_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,select_controller_toPropertyKey(descriptor.key),descriptor)}}function select_controller_defineProperty(obj,key,value){return(key=select_controller_toPropertyKey(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function select_controller_toPropertyKey(arg){var key=function(input,hint){if("object"!==select_controller_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==select_controller_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===select_controller_typeof(key)?key:String(key)}var SelectController=function(){function SelectController($element,$scope,$compile){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,SelectController),select_controller_defineProperty(this,"validationError",!1),this.$element=$element,this.$scope=$scope,this.$compile=$compile,this.$parentScope=this.$scope.$parent,console.log(this)}var Constructor,protoProps,staticProps;return Constructor=SelectController,(protoProps=[{key:"$postLink",value:function(){var _this=this;if(this.$element.addClass("n-tk-select"),this.$mdSelect=this.$element.find("md-select"),this.labelEl=this.$element.find("label"),this.$mdSelect&&(this.$mdSelect.on("focus",(function(event){_this.$element.addClass("n-tk-select--focused")})),this.$mdSelect.on("blur",(function(event){_this.$element.removeClass("n-tk-select--focused")}))),this.id&&(this.validationWatcher=this.$parentScope.$watch("ViewData.DataErrors._dataErrors['".concat(this.id,"']"),(function(newVal){if((null==newVal?void 0:newVal.length)>0){var message=newVal[0];_this.setValidationError(message)}else _this.removeValidationError()}))),this.iconStart){var iconToPrepend=this.createIcon(this.iconStart);this.$compile(iconToPrepend)(this.$scope),this.labelEl.prepend(iconToPrepend)}if(this.iconEnd){var iconToAppend=this.createIcon(this.iconEnd);this.$compile(iconToAppend)(this.$scope),this.labelEl.append(iconToAppend)}}},{key:"$onChanges",value:function(onChangesObj){"ngReadonly"in onChangesObj&&this.handleDisabledState(onChangesObj.ngReadonly.currentValue)}},{key:"$doCheck",value:function(){var _this$$mdSelect;this.helperText&&!this.validationError?this.$mdSelect.attr("aria-describedby")&&this.$mdSelect.attr("aria-describedby","".concat(this.id,".HelperText")):null===(_this$$mdSelect=this.$mdSelect)||void 0===_this$$mdSelect||_this$$mdSelect.removeAttr("aria-describedby")}},{key:"$onDestroy",value:function(){this.validationWatcher()}},{key:"setValidationError",value:function(message){this.$element.addClass("n-tk-select--invalid"),this.validationError=!0,this.validationMessage=message,this.$mdSelect.attr("aria-invalid","true"),this.$mdSelect.attr("aria-errormessage","".concat(this.id,".ErrorMessage"))}},{key:"removeValidationError",value:function(){this.$element.removeClass("n-tk-select--invalid"),this.validationError=!1,this.$mdSelect.attr("aria-invalid","false"),this.$mdSelect.removeAttr("aria-errormessage")}},{key:"handleDisabledState",value:function(state){state?this.$element.addClass("n-tk-select--disabled"):this.$element.removeClass("n-tk-select--disabled")}},{key:"createIcon",value:function(icon){var iconComponent=document.createElement("tk-icon");return iconComponent.textContent=icon,iconComponent}}])&&select_controller_defineProperties(Constructor.prototype,protoProps),staticProps&&select_controller_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),SelectController}();select_controller_defineProperty(SelectController,"$inject",["$element","$scope","$compile"]);const select_component={bindings:{ngModel:"=",ngClass:"<",ngReadonly:"<",options:"<",labelExp:"@",label:"@",id:"@",size:"@?",iconStart:"@?",iconEnd:"@?",iconTarget:"@?",placeholder:"@?",helpertext:"@?"},controller:SelectController,templateUrl:"./Content/tmpl/select.tmpl.html"};const select_module=angular_default().module("select",[]).component("tkSelect",select_component).name;function validation_card_controller_typeof(obj){return validation_card_controller_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},validation_card_controller_typeof(obj)}function validation_card_controller_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,validation_card_controller_toPropertyKey(descriptor.key),descriptor)}}function validation_card_controller_toPropertyKey(arg){var key=function(input,hint){if("object"!==validation_card_controller_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==validation_card_controller_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===validation_card_controller_typeof(key)?key:String(key)}const validation_card_component={bindings:{errorCount:"<",sidebarVisible:"<",onClick:"&",context:"<"},controller:function(){function ValidationCardController($element,$timeout){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ValidationCardController),this.$element=$element,this.$timeout=$timeout}var Constructor,protoProps,staticProps;return Constructor=ValidationCardController,(protoProps=[{key:"$postLink",value:function(){var _this=this;this.button=this.$element.find("button"),this.button.addClass("mdc-ripple-surface"),this.$timeout((function(){_this.button.attr("style","--mdc-ripple-color: ".concat(getComputedStyle(_this.button[0]).color)),_this.rippleRef=MDCRipple.attachTo(_this.button[0])}),0)}}])&&validation_card_controller_defineProperties(Constructor.prototype,protoProps),staticProps&&validation_card_controller_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),ValidationCardController}(),templateUrl:"./Content/tmpl/validation-card.tmpl.html"};const validation_card_module=angular_default().module("validation-card",[]).component("tkValidationCard",validation_card_component).name;function typoggraphy_controller_typeof(obj){return typoggraphy_controller_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},typoggraphy_controller_typeof(obj)}function typoggraphy_controller_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,typoggraphy_controller_toPropertyKey(descriptor.key),descriptor)}}function typoggraphy_controller_toPropertyKey(arg){var key=function(input,hint){if("object"!==typoggraphy_controller_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==typoggraphy_controller_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===typoggraphy_controller_typeof(key)?key:String(key)}var TypographyController=function(){function TypographyController($element,$scope,$attrs,$timeout){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,TypographyController),this.$element=$element,this.$scope=$scope,this.$attrs=$attrs,this.$timeout=$timeout}var Constructor,protoProps,staticProps;return Constructor=TypographyController,(protoProps=[{key:"$postLink",value:function(){var _this=this;this.$element.addClass("n-tk-typography"),this.$timeout((function(){_this.label=_this.$element.find("label"),_this.label&&_this.label.addClass("n-tk-typography__label")}))}}])&&typoggraphy_controller_defineProperties(Constructor.prototype,protoProps),staticProps&&typoggraphy_controller_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),TypographyController}();!function(obj,key,value){(key=typoggraphy_controller_toPropertyKey(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}(TypographyController,"$inject",["$element","$scope","$attrs","$timeout"]);const typography_component={controller:TypographyController,transclude:!0,template:"<ng-transclude></ng-transclude>"};const typography_module=angular_default().module("typogrpahy",[]).component("tkTypography",typography_component).name;function textarea_controller_typeof(obj){return textarea_controller_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},textarea_controller_typeof(obj)}function textarea_controller_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,textarea_controller_toPropertyKey(descriptor.key),descriptor)}}function textarea_controller_toPropertyKey(arg){var key=function(input,hint){if("object"!==textarea_controller_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==textarea_controller_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===textarea_controller_typeof(key)?key:String(key)}var TextareaController=function(){function TextareaController($element,$scope,$attrs){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,TextareaController),this.$element=$element,this.$scope=$scope,this.$attrs=$attrs}var Constructor,protoProps,staticProps;return Constructor=TextareaController,(protoProps=[{key:"$onInit",value:function(){this.$parentScope=this.$scope.$parent}},{key:"$postLink",value:function(){var _this=this;this.$element.addClass("n-tk-textarea"),this.textarea=this.$element.find("textarea"),this.textarea.on("focus",this.handleFocus.bind(this)),this.$parentScope.$watch("ViewData.DataErrors._dataErrors['".concat(this.id,"']"),(function(newVal,oldVal){if((null==newVal?void 0:newVal.length)>0){var message=newVal[0];_this.setValidationError(message)}else _this.removeValidationError()})),this.$attrs.$attr.hasOwnProperty("resizable")&&this.textarea.addClass("n-tk-textarea__input--resizable")}},{key:"$onChanges",value:function(onChangesObj){"ngReadonly"in onChangesObj&&this.hanldeReadonly(onChangesObj.ngReadonly.currentValue)}},{key:"$onDestroy",value:function(){}},{key:"handleFocus",value:function(){var _this$textarea,_this2=this;this.$element.addClass("n-tk-textarea--focused"),null===(_this$textarea=this.textarea)||void 0===_this$textarea||_this$textarea.on("blur",(function(e){_this2.$element.removeClass("n-tk-textarea--focused")}))}},{key:"hanldeReadonly",value:function(state){state?this.$element.addClass("n-tk-textarea--readonly"):this.$element.removeClass("n-tk-textarea--readonly")}},{key:"setValidationError",value:function(message){this.$element.addClass("n-tk-textarea--invalid"),this.validationError=!0,this.validationMessage=message,this.textarea.attr("aria-invalid","true"),this.textarea.attr("aria-errormessage","".concat(this.id,".ErrorMessage"))}},{key:"removeValidationError",value:function(){this.$element.removeClass("n-tk-textarea--invalid"),this.validationError=!1,this.textarea.attr("aria-invalid","false"),this.textarea.removeAttr("aria-errormessage")}}])&&textarea_controller_defineProperties(Constructor.prototype,protoProps),staticProps&&textarea_controller_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),TextareaController}();!function(obj,key,value){(key=textarea_controller_toPropertyKey(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}(TextareaController,"$inject",["$element","$scope","$attrs"]);const textarea_component={bindings:{ngModel:"=",ngReadonly:"<",ngClass:"<",helpertext:"@?",label:"@?",minSize:"<",id:"@?",resizable:"<?"},controller:TextareaController,templateUrl:"./Content/tmpl/textarea.tmpl.html"};const textarea_module=angular_default().module("textarea",[]).component("tkTextarea",textarea_component).name;const components=angular_default().module("turnkey.ui.components",[checkbox_module,datepicker_module,file_upload_module,file_download_module,icon_module,image_module,image_upload_module,switch_module,textfield_module,timepicker_module,snackbar_module,savebar_module,table_module,table_head_module,table_body_module,table_row_module,menu_module,sidebar_module,sidebar_group_module,sidebar_action_module,tooltip_module,fab_module,button_module,debug_info_module,select_module,validation_card_module,typography_module,textarea_module]).name;function dialog_controller_typeof(obj){return dialog_controller_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},dialog_controller_typeof(obj)}function dialog_controller_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,dialog_controller_toPropertyKey(descriptor.key),descriptor)}}function dialog_controller_toPropertyKey(arg){var key=function(input,hint){if("object"!==dialog_controller_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==dialog_controller_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===dialog_controller_typeof(key)?key:String(key)}var MDrivenTurnkeyDialogController=function(){function MDrivenTurnkeyDialogController($mdDialog,$timeout,appInfo,$mdPanel,reset){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,MDrivenTurnkeyDialogController),this.$mdDialog=$mdDialog,this.$timeout=$timeout,this.appInfo=appInfo,this.$mdPanel=$mdPanel,this.reset=reset,console.log(this)}var Constructor,protoProps,staticProps;return Constructor=MDrivenTurnkeyDialogController,protoProps=[{key:"hide",value:function(){this.$mdDialog.hide()}},{key:"copyToClipboard",value:function($event,option){var _this=this,name=option.name,value=option.value;navigator.clipboard&&navigator.clipboard.writeText("".concat(name,": ").concat(value).trim()).then((function(){var target=$event.target,panelPosition=_this.$mdPanel.newPanelPosition().relativeTo($event.target).addPanelPosition(_this.$mdPanel.xPosition.CENTER,_this.$mdPanel.yPosition.ABOVE).withOffsetY("-10px"),panelAnimation=_this.$mdPanel.newPanelAnimation().openFrom(target).closeTo(target).withAnimation(_this.$mdPanel.animation.FADE).duration(120),panelConfig={attachTo:angular.element(document.body),origin:$event.target,position:panelPosition,animation:panelAnimation,controllerAs:"$ctrl",controller:function(){},template:'<div class="n-tk-tooltip">Copied!</div>'};_this.$mdPanel.open(panelConfig).then((function(mdPanelRef){_this.$timeout((function(){mdPanelRef.hide()}),300)})).catch((function(error){return console.warn("Copy to clipboard failed",error)}))}),(function(error){console.warn("Copying failed.",error)}))}}],protoProps&&dialog_controller_defineProperties(Constructor.prototype,protoProps),staticProps&&dialog_controller_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),MDrivenTurnkeyDialogController}();function popup_controller_typeof(obj){return popup_controller_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},popup_controller_typeof(obj)}function popup_controller_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,popup_controller_toPropertyKey(descriptor.key),descriptor)}}function popup_controller_toPropertyKey(arg){var key=function(input,hint){if("object"!==popup_controller_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==popup_controller_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===popup_controller_typeof(key)?key:String(key)}!function(obj,key,value){(key=dialog_controller_toPropertyKey(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}(MDrivenTurnkeyDialogController,"$inject",["$mdDialog","$timeout","appInfo","$mdPanel","reset"]);var MDrivenTurnkeyPopupController_IID="MDrivenTurnkeyPopupController",MDrivenTurnkeyPopupController=function(){function MDrivenTurnkeyPopupController($scope,appClient,viewDataService,$location,modalStartParams,$timeout,$mdPanel,$window,NotificationService){var _this=this;!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,MDrivenTurnkeyPopupController),this.$timeout=$timeout,this.$mdPanel=$mdPanel,this.$window=$window,this.NotificationService=NotificationService,this.StreamingAppClient=appClient,this.viewClient=viewDataService.GetViewClientFor(new VMClassId(modalStartParams.ModalVMObjectId,modalStartParams.StartingAction.View),$scope),this.viewData=this.viewClient.ViewData,this.$scope=$scope,this.showLoading=!0;var lastClickEvent=this.$scope.StreamingViewModelClient.StreamingAppClient.LastClickEvent,unregisterListenerForFirstLoad=this.$scope.$on(AngularEventConstants.$ProcessingServerMessagesComplete,(function(){console.log("Received data from server"),_this.showLoading=!1,_this.mdPanelRef.VMId=_this.viewData.VMId,_this.$timeout((function(){var outOfBoundsX=_this.$window.innerWidth-lastClickEvent.pageX<_this.mdPanelRef.panelEl.width(),outOfBoundY=_this.$window.innerHeight-lastClickEvent.pageY<_this.mdPanelRef.panelEl.height();(outOfBoundsX||outOfBoundY)&&_this.mdPanelRef.updatePosition(_this.mdPanelRef.config.position)}),95),unregisterListenerForFirstLoad()}));this.$scope.$on("$destroy",(function(event){console.log("popup $scope is destroying"),_this.viewClient.ReleaseFromScope(),document.documentElement.removeAttribute("turnkeyviewmodal")})),this.$scope.$on("$locationChangeStart",(function(event){event.preventDefault(),console.log("popup: $locationChangeStart")})),this.$scope.$on(AngularEventConstants.$NavigateWithinApp,(function(event,sourceVMClassId,name,id,isModal){var newURL=$location.absUrl().substr(0,$location.absUrl().indexOf("#")+1)+"/".concat(name,"/").concat(id);console.log("Modal window opening new tab with URL: "+newURL),void 0===window.open(newURL,"_blank")&&window.alert("The new window was blocked by your browser. Turn of pop-up blocker for this site and then try again.")})),this.$scope.$on(AngularEventConstants.$OpenModalWindow,(function(event,modalStartParams){_this.mdPanelRef.close(),_this.StreamingAppClient.OpenModalOnClose=modalStartParams})),this.$scope.onFileSelect=function(target,vmclassid){var file=document.getElementById(target).files[0],r=new FileReader,filename=file.name;r.onloadend=function(loadEndEvent){var data=loadEndEvent.target.result;$scope.StreamingViewModelClient.UploadFile(target,vmclassid.asString,data,filename)},r.readAsArrayBuffer(file)},this.$scope.onFileSelectCustom=function(file,target,vmclassid,maxsizeinbytes){var r=new FileReader,filename=file.name;r.onloadend=function(loadEndEvent){var data=loadEndEvent.target.result;$scope.StreamingViewModelClient.UploadFile(target,vmclassid.asString,data,filename)},r.readAsArrayBuffer(file)},this.$scope.$on("__vClipbookDataChanged",(function(e){if($scope&&$scope.ViewModelRoot&&$scope.ViewModelRoot.VM_Variables){var notserv=_this.NotificationService;navigator.clipboard.writeText($scope.ViewModelRoot.VM_Variables.vClipbookData).then((function(){console.log("Copied to clipboard successfully!"),notserv.createAndEnqueue("Added to clipboard",!0,!1,"content_copy"),$scope.ViewModelRoot.VM_Variables.vClipbookData=""}),(function(err){console.error("Could not copy text: ",err),$scope.ViewModelRoot.VM_Variables.vClipbookData=""}))}})),this.$scope.$on("__vClientScriptExecuteDataChanged",(function(e){if($scope&&$scope.ViewModelRoot&&$scope.ViewModelRoot.VM_Variables){var scripttoexecute=$scope.ViewModelRoot.VM_Variables.vClientScriptExecute;$scope.ViewModelRoot.VM_Variables.vClientScriptExecute="",window.MDrivenClientScriptExecute(scripttoexecute)}}))}var Constructor,protoProps,staticProps;return Constructor=MDrivenTurnkeyPopupController,(protoProps=[{key:"close",value:function(){this.mdPanelRef.close()}},{key:"closePopup",value:function(){this.mdPanelRef.close()}}])&&popup_controller_defineProperties(Constructor.prototype,protoProps),staticProps&&popup_controller_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),MDrivenTurnkeyPopupController}();function menu_controller_typeof(obj){return menu_controller_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},menu_controller_typeof(obj)}function menu_controller_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,menu_controller_toPropertyKey(descriptor.key),descriptor)}}function menu_controller_toPropertyKey(arg){var key=function(input,hint){if("object"!==menu_controller_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==menu_controller_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===menu_controller_typeof(key)?key:String(key)}!function(obj,key,value){(key=popup_controller_toPropertyKey(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}(MDrivenTurnkeyPopupController,"$inject",["$scope","StreamingAppClientService","ViewDataService","$location","dataToModal","$timeout","$mdPanel","$window","MDrivenTurnkeyNotificationService"]);var MDrivenTurnkeyContextMenuController=function(){function MDrivenTurnkeyContextMenuController(mdPanelRef){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,MDrivenTurnkeyContextMenuController),this.mdPanelRef=mdPanelRef}var Constructor,protoProps,staticProps;return Constructor=MDrivenTurnkeyContextMenuController,(protoProps=[{key:"execute",value:function(action,$event){this.closeAndExecuteAction(action,$event)}},{key:"closeAndExecuteAction",value:function(action,$event){var _this=this;this.mdPanelRef.close().then((function(res){action.ExecuteAfterModal(_this.row,$event)}))}}])&&menu_controller_defineProperties(Constructor.prototype,protoProps),staticProps&&menu_controller_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),MDrivenTurnkeyContextMenuController}();function constraints_controller_typeof(obj){return constraints_controller_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},constraints_controller_typeof(obj)}function constraints_controller_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,constraints_controller_toPropertyKey(descriptor.key),descriptor)}}function constraints_controller_defineProperty(obj,key,value){return(key=constraints_controller_toPropertyKey(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function constraints_controller_toPropertyKey(arg){var key=function(input,hint){if("object"!==constraints_controller_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==constraints_controller_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===constraints_controller_typeof(key)?key:String(key)}var ConstraintsPanelController=function(){function ConstraintsPanelController($scope,$window,$mdPanel,$timeout){var _this=this;!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ConstraintsPanelController),constraints_controller_defineProperty(this,"isMobileDevice",isMobileDevice()),this.$scope=$scope,this.$window=$window,this.$mdPanel=$mdPanel,this.$timeout=$timeout;var updatePosition=function(target){var _target$getBoundingCl=target.getBoundingClientRect(),bottom=_target$getBoundingCl.bottom,left=_target$getBoundingCl.left,enoughSpaceBottom=_this.$window.innerHeight-bottom>200,enoughSpaceLeft=left>300,newPanelPosition=_this.$mdPanel.newPanelPosition().relativeTo(_this.target);enoughSpaceBottom&&newPanelPosition.addPanelPosition(_this.$mdPanel.xPosition.ALIGN_START,_this.$mdPanel.yPosition.BELOW).withOffsetY("20px"),!enoughSpaceBottom&&enoughSpaceLeft&&newPanelPosition.addPanelPosition(_this.$mdPanel.xPosition.OFFSET_START,_this.$mdPanel.yPosition.ALIGN_BOTTOMS).withOffsetX("-15px"),enoughSpaceBottom||enoughSpaceLeft||newPanelPosition.addPanelPosition(_this.$mdPanel.xPosition.OFFSET_END,_this.$mdPanel.yPosition.ALIGN_BOTTOMS).withOffsetX("10px"),_this.mdPanelRef.updatePosition(newPanelPosition)};this.$timeout((function(){_this.target=_this.mdPanelRef.config.origin;var targetModalPanel=$(_this.target).closest("md-dialog"),sizeObserver=new ResizeObserver((function(entries){entries.forEach((function(entry){updatePosition(_this.target)}))}));_this.$window.addEventListener("resize",(function(){updatePosition(_this.target)})),targetModalPanel[0]&&sizeObserver.observe(targetModalPanel[0])}))}var Constructor,protoProps,staticProps;return Constructor=ConstraintsPanelController,(protoProps=[{key:"close",value:function(){this.mdPanelRef.close()}}])&&constraints_controller_defineProperties(Constructor.prototype,protoProps),staticProps&&constraints_controller_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),ConstraintsPanelController}();constraints_controller_defineProperty(ConstraintsPanelController,"$inject",["$scope","$window","$mdPanel","$timeout"]);const constraints_controller=ConstraintsPanelController;function modal_controller_typeof(obj){return modal_controller_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},modal_controller_typeof(obj)}function modal_controller_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,modal_controller_toPropertyKey(descriptor.key),descriptor)}}function modal_controller_toPropertyKey(arg){var key=function(input,hint){if("object"!==modal_controller_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==modal_controller_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===modal_controller_typeof(key)?key:String(key)}var MDrivenTurnkeyModalController_IID="MDrivenTurnkeyModalController",MDrivenTurnkeyModalController=function(){function MDrivenTurnkeyModalController($scope,appClient,viewDataService,$location,$mdDialog,modalStartParams,$mdPanel,$window,NotificationService){var _this=this;!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,MDrivenTurnkeyModalController),this.$mdDialog=$mdDialog,this.$mdPanel=$mdPanel,this.$window=$window,this.NotificationService=NotificationService,this.StreamingAppClient=appClient,this.viewClient=viewDataService.GetViewClientFor(new VMClassId(modalStartParams.ModalVMObjectId,modalStartParams.StartingAction.View),$scope),this.viewData=this.viewClient.ViewData,this.$scope=$scope,document.documentElement.setAttribute("turnkeyviewmodal",modalStartParams.StartingAction.View),this.$scope.$on(AngularEventConstants.$WindowHeaderName,(function(event,headerName){document.title=headerName})),this.countErrors();var boundCloseOnEsc=this.closeOnEsc.bind(this);this.$window.addEventListener("keydown",boundCloseOnEsc),this.$scope.$on("$destroy",(function(event){console.log("modal $scope is destroying"),_this.viewClient.ReleaseFromScope(),document.documentElement.removeAttribute("turnkeyviewmodal"),_this.$window.removeEventListener("keydown",boundCloseOnEsc)})),this.$scope.$on("$locationChangeStart",(function(event){event.preventDefault(),console.log("modal: $locationChangeStart"),_this.cancelModal()})),this.$scope.$on(AngularEventConstants.$NavigateWithinApp,(function(event,sourceVMClassId,name,id,isModal){var newURL=$location.absUrl().substr(0,$location.absUrl().indexOf("#")+1)+"/".concat(name,"/").concat(id);console.log("Modal window opening new tab with URL: "+newURL),void 0===window.open(newURL,"_blank")&&window.alert("The new window was blocked by your browser. Turn of pop-up blocker for this site and then try again.")})),this.$scope.onFileSelect=function(target,vmClassId){var file=document.getElementById(target).files[0],r=new FileReader,filename=file.name;r.onloadend=function(loadEndEvent){var data=loadEndEvent.target.result;_this.$scope.StreamingViewModelClient.UploadFile(target,vmClassId.asString,data,filename)},r.readAsArrayBuffer(file)},this.$scope.onFileSelect=function(target,vmclassid){_this.onFileSelect(target,vmclassid)},this.$scope.onFileSelectCustom=function(file,target,vmclassid,maxsizeinbytes){_this.onFileSelectCustom(file,target,vmclassid,maxsizeinbytes)},this.$scope.selectAllRows=function(vclassName,vcolName){$scope.ViewModelRoot[vcolName+"_isAllSelected"]=!$scope.ViewModelRoot[vcolName+"_isAllSelected"];var table=$scope.ViewModelRoot["Curr_".concat(vclassName)]()["".concat(vcolName)];angular.forEach(table,(function(row){row.vSelected=$scope.ViewModelRoot[vcolName+"_isAllSelected"]}))},this.$scope.orderBy=function(vclassName,vcolName,$event){var resizer=$event.delegateTarget.querySelector(".resizer");$event.originalEvent.target!==resizer&&$event.target!==resizer&&($scope[vclassName+"_OrderColumnReverseState"]?($scope[vclassName+"_OrderColumnName"]=null,$scope[vclassName+"_OrderColumnReverseState"]=!1):($scope[vclassName+"_OrderColumnReverseState"]=null!==vcolName&&$scope[vclassName+"_OrderColumnName"]===vcolName&&!$scope[vclassName+"_OrderColumnReverseState"],$scope[vclassName+"_OrderColumnName"]=vcolName),window.MDrivenCellSelectClear&&window.MDrivenCellSelectClear($event.delegateTarget))},this.$scope.reQuery=function(vclassName,vcolName){$scope.ViewModelRoot.VM_Variables.vSeekerOrderReverseState?($scope.ViewModelRoot.VM_Variables.vSeekerOrderColumnName=null,$scope.ViewModelRoot.VM_Variables.vSeekerOrderReverseState=!1):($scope.ViewModelRoot.VM_Variables.vSeekerOrderReverseState=null!==vcolName&&$scope.ViewModelRoot.VM_Variables.vSeekerOrderColumnName===vcolName&&!$scope.ViewModelRoot.VM_Variables.vSeekerOrderReverseState,$scope.ViewModelRoot.VM_Variables.vSeekerOrderColumnName=vcolName);var unRegisterScopeOn=$scope.$on(AngularEventConstants.$ProcessingServerMessagesComplete,(function(){console.log("ReQuery"),$scope.ViewClient.CallServerAction($scope.ViewData.ViewModelName,"ReQuery"),unRegisterScopeOn()}))},this.$scope.getListForPageSize=function(){var result=[50,100,200,500];if($scope.ViewModelRoot.VM_Variables&&$scope.ViewModelRoot.VM_Variables.vSeekerPageLength){var current=Number($scope.ViewModelRoot.VM_Variables.vSeekerPageLength);-1===result.indexOf(current)&&(result.push(current),result=result.sort((function(a,b){return a-b})))}return result},this.$scope.getPageInfoText=function(){var varvm=$scope.ViewModelRoot.VM_Variables;if(varvm){var aTotalCount=varvm.vSeekerResultCount,aPage=varvm.vSeekerPage,aPageSize=varvm.vSeekerPageLength;if(aTotalCount>0&&aPageSize>0&&aPage>=0){var firstonpage=aPageSize*aPage+1,lastonpage=Math.min(firstonpage+aPageSize-1,aTotalCount);return"".concat(firstonpage,"-").concat(lastonpage," of ").concat(aTotalCount)}if(0==aTotalCount)return"No results"}return""},this.$scope.$on(TableEventConstants.$ClickedRow,(function(e,row,$event,index){row.SetCurrentOnRowClick($event,index)})),this.$scope.$on(TableEventConstants.$DblClickedRow,(function(e,row){row.vCurrent=!0,_this.$scope.ViewModelRoot.VM_Status.ModalOk_Enable&&_this.okModal()})),this.$scope.$on(TableEventConstants.$RightClickedRow,(function(e,row,event){if(row.SetCurrentOnRowClick(event),!1===row.vCurrentChanging)console.log("RightClickDispatcher:Show context menu"),_this.createAndShowContextMenu(row,event);else var unregisterListener=$scope.$on(AngularEventConstants.$ProcessingServerMessagesComplete,(function(){console.log("RightClickDispatcher:MsgProcessingServerMessagesComplete");var targetElement=event.target;targetElement.style.cursor="wait",row.vCurrentChanging||(unregisterListener(),targetElement.style.cursor="pointer",console.log("RightClickDispatcher:Show context menu"),_this.createAndShowContextMenu(row,event))}))})),this.$scope.$on("DataErrorsUpdated",(function(e){_this.countErrors()})),this.$scope.$on("__vClipbookDataChanged",(function(e){if($scope&&$scope.ViewModelRoot&&$scope.ViewModelRoot.VM_Variables){var notserv=_this.NotificationService;navigator.clipboard.writeText($scope.ViewModelRoot.VM_Variables.vClipbookData).then((function(){console.log("Copied to clipboard successfully!"),notserv.createAndEnqueue("Added to clipboard",!0,!1,"content_copy"),$scope.ViewModelRoot.VM_Variables.vClipbookData=""}),(function(err){console.error("Could not copy text: ",err),$scope.ViewModelRoot.VM_Variables.vClipbookData=""}))}})),this.$scope.$on("__vClientScriptExecuteDataChanged",(function(e){if($scope&&$scope.ViewModelRoot&&$scope.ViewModelRoot.VM_Variables){var scriptref=$scope.ViewModelRoot.VM_Variables.vClientScriptExecute;$scope.ViewModelRoot.VM_Variables.vClientScriptExecute="",window.MDrivenClientScriptExecute(scriptref)}}))}var Constructor,protoProps,staticProps;return Constructor=MDrivenTurnkeyModalController,(protoProps=[{key:"closeOnEsc",value:function(event){event.stopImmediatePropagation(),"Escape"===event.key&&this.cancelModal()}},{key:"okModal",value:function(){this.$mdDialog.hide(this.viewData.VMId)}},{key:"closePopup",value:function(){this.$mdDialog.hide(this.viewData.VMId)}},{key:"cancelModal",value:function(){this.viewClient.GetIsDirty()&&!window.confirm("Are you sure you want to cancel changes?")||this.$mdDialog.cancel(this.viewData.VMId)}},{key:"openStandaloneModal",value:function(){var id=this.$scope.ViewModelRoot.VMClassId,url=getRootUrl(this.$window.location.href)+"/App#/"+id.VMClassName+"/"+id.VMObjectId;this.$window.open(url,"_blank")}},{key:"createAndShowContextMenu",value:function(row,event){var _this2=this,activeActions=row.GetActiveActions(),contextMenuPosition=this.$mdPanel.newPanelPosition();contextMenuPosition.relativeTo(event.target),contextMenuPosition.top("".concat(event.pageY,"px")),contextMenuPosition.left("".concat(event.pageX,"px"));var contextMenuAnimation=this.$mdPanel.newPanelAnimation();contextMenuAnimation.openFrom({top:event.pageY,left:event.pageX}),contextMenuAnimation.closeTo(event.target),contextMenuAnimation.withAnimation(this.$mdPanel.animation.SCALE),contextMenuAnimation.duration({open:80,close:80});var contextMenuConfig={attachTo:angular.element(document.body),position:contextMenuPosition,animation:contextMenuAnimation,panelClass:"tk-context-menu",controller:"MDrivenTurnkeyContextMenuController",controllerAs:"$ctrl",templateUrl:"./Content/tmpl/panels/context-menu.tmpl.html",focusOnOpen:!0,clickOutsideToClose:!0,propagateContainerEvents:!0,locals:{actionGroup:this.$scope.ViewData.ActionGroupForVMClassname(row.VMClassId.VMClassName),row}};activeActions.length>=1&&(this.contextMenuInstance?(this.contextMenuInstance.close().then((function(res){return res.destroy()})),this.$mdPanel.open(contextMenuConfig).then((function(res){_this2.contextMenuInstance=res}))):this.$mdPanel.open(contextMenuConfig).then((function(res){_this2.contextMenuInstance=res})))}},{key:"onFileSelect",value:function(target,vmclassid){var _this3=this,file=document.getElementById(target).files[0],r=new FileReader,filename=file.name;r.onloadend=function(loadEndEvent){var data=loadEndEvent.target.result;_this3.$scope.StreamingViewModelClient.UploadFile(target,vmclassid.asString,data,filename)},r.readAsArrayBuffer(file)}},{key:"onFileSelectCustom",value:function(file,target,vmclassid,maxsizeinbytes){var _this4=this,r=new FileReader,filename=file.name;r.onloadend=function(loadEndEvent){var data=loadEndEvent.target.result;_this4.$scope.StreamingViewModelClient.UploadFile(target,vmclassid.asString,data,filename)},r.readAsArrayBuffer(file)}},{key:"showConstraints",value:function($event){var _this5=this,target=$event.target.closest(".validation-card"),_target$getBoundingCl=target.getBoundingClientRect(),bottom=_target$getBoundingCl.bottom,left=_target$getBoundingCl.left,enoughSpaceBottom=window.innerHeight-bottom>200,enoughSpaceLeft=left>300,panelPosition=this.$mdPanel.newPanelPosition().relativeTo(target);enoughSpaceBottom&&panelPosition.addPanelPosition(this.$mdPanel.xPosition.ALIGN_START,this.$mdPanel.yPosition.BELOW).withOffsetY("20px"),!enoughSpaceBottom&&enoughSpaceLeft&&panelPosition.addPanelPosition(this.$mdPanel.xPosition.OFFSET_START,this.$mdPanel.yPosition.ALIGN_BOTTOMS).withOffsetX("-15px"),enoughSpaceBottom||enoughSpaceLeft||panelPosition.addPanelPosition(this.$mdPanel.xPosition.OFFSET_END,this.$mdPanel.yPosition.ALIGN_BOTTOMS).withOffsetX("10px");var panelClass=isMobileDevice()?"n-tk-constraints-panel n-tk-constraints-panel--mobile":"n-tk-constraints-panel",panelAnimation=this.$mdPanel.newPanelAnimation().openFrom(target).closeTo(target).duration(100),panelConfiguration={attachTo:angular.element(document.body),clickOutsideToClose:!0,position:panelPosition,animation:panelAnimation,controllerAs:"$ctrl",controller:constraints_controller,origin:target,panelClass,hasBackdrop:isMobileDevice(),disableParentScroll:isMobileDevice(),locals:{dataErrors:this.$scope.ViewData.DataErrors.DataErrors()},onCloseSuccess:function(){_this5.constraintsPanelIsOpen=!1,_this5.constraintsPanelRef=void 0},templateUrl:"./Content/tmpl/panels/constraints.tmpl.html"};this.constraintsPanelIsOpen||this.$mdPanel.open(panelConfiguration).then((function(panelRef){_this5.constraintsPanelRef=panelRef,_this5.constraintsPanelIsOpen=!0}))}},{key:"countErrors",value:function(){var errorSum,warningSum,infoSum,dataErrors=this.$scope.ViewData.DataErrors.DataErrors(),sum=0;for(var category in dataErrors)"Errors"===category&&(errorSum=dataErrors[category].length,sum+=dataErrors[category].length),"Warnings"===category&&(warningSum=dataErrors[category].length,sum+=dataErrors[category].length),"Infos"===category&&(infoSum=dataErrors[category].length,sum+=dataErrors[category].length);this.errorCount=sum,errorSum>0?this.validationCardCssClass="error":warningSum>0?this.validationCardCssClass="warning":infoSum>0&&(this.validationCardCssClass="info")}}])&&modal_controller_defineProperties(Constructor.prototype,protoProps),staticProps&&modal_controller_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),MDrivenTurnkeyModalController}();function main_controller_typeof(obj){return main_controller_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},main_controller_typeof(obj)}function main_controller_createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=function(o,minLen){if(!o)return;if("string"==typeof o)return main_controller_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return main_controller_arrayLikeToArray(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function(){};return{s:F,n:function(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function(){it=it.call(o)},n:function(){var step=it.next();return normalCompletion=step.done,step},e:function(_e2){didErr=!0,err=_e2},f:function(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function main_controller_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function main_controller_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,main_controller_toPropertyKey(descriptor.key),descriptor)}}function main_controller_classPrivateMethodInitSpec(obj,privateSet){!function(obj,privateCollection){if(privateCollection.has(obj))throw new TypeError("Cannot initialize the same private elements twice on an object")}(obj,privateSet),privateSet.add(obj)}function main_controller_defineProperty(obj,key,value){return(key=main_controller_toPropertyKey(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function main_controller_toPropertyKey(arg){var key=function(input,hint){if("object"!==main_controller_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==main_controller_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===main_controller_typeof(key)?key:String(key)}function main_controller_classPrivateMethodGet(receiver,privateSet,fn){if(!privateSet.has(receiver))throw new TypeError("attempted to get private field on non-instance");return fn}!function(obj,key,value){(key=modal_controller_toPropertyKey(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}(MDrivenTurnkeyModalController,"$inject",["$scope","StreamingAppClientService","ViewDataService","$location","$mdDialog","dataToModal","$mdPanel","$window","MDrivenTurnkeyNotificationService"]);var theGlobalVarOnIsSidebarVisibleToAvoidBlink=!0,_updateTimeout=new WeakSet,MDrivenTurnkeyMainController=function(){function MDrivenTurnkeyMainController($scope,$routeParams,$location,$timeout,$document,$window,appClient,viewDataService,$mdDialog,$mdPanel,$anchorScroll,$rootElement,NotificationService){var _this=this;!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,MDrivenTurnkeyMainController),main_controller_classPrivateMethodInitSpec(this,_updateTimeout),main_controller_defineProperty(this,"autobackOnDeleted",!1),main_controller_defineProperty(this,"isDragging",!1),main_controller_defineProperty(this,"modalIsOpen",!1),main_controller_defineProperty(this,"isContextMenuOpen",!1),main_controller_defineProperty(this,"isDebugMenuOpen",!1),main_controller_defineProperty(this,"isSidebarVisible",theGlobalVarOnIsSidebarVisibleToAvoidBlink),main_controller_defineProperty(this,"isModalWindowOpen",!1),main_controller_defineProperty(this,"isMobileDevice",isMobileDevice()),main_controller_defineProperty(this,"constraintsPanelIsOpen",!1),this.$location=$location,this.$timeout=$timeout,this.$document=$document,this.$window=$window,this.$mdDialog=$mdDialog,this.$mdPanel=$mdPanel,this.$anchorScroll=$anchorScroll,this.$rootElement=$rootElement,this.NotificationService=NotificationService,this.StreamingAppClient=appClient,null!=$routeParams.ucparentid&&"debug"!=$routeParams.ucparentid&&(document.documentElement.setAttribute("uc","true"),appClient.RenderAsUserControl=!0,appClient.RenderAsUserControlParentId=$routeParams.ucparentid),null==$routeParams.id&&($routeParams.id="$null$"),this.viewClient=viewDataService.GetViewClientFor(new VMClassId($routeParams.id,$routeParams.name),$scope),this.$scope=$scope,this.$scope.debugMenuIsOpen=!1,this.$scope.modalIsOpen=!1,this.isSidebarVisible=theGlobalVarOnIsSidebarVisibleToAvoidBlink,document.documentElement.setAttribute("turnkeyview",$routeParams.name);var viewmodelWrapper=document.getElementById("viewmodelWrapper");this.$scope.isMobileDevice=isMobileDevice(),this.$scope.leftMenuOpen_olddeprecated=this.$window.innerWidth>768,this.$document.find("#LeftMenuButton").on("click",(function(e){_this.isSidebarVisible=!_this.isSidebarVisible,theGlobalVarOnIsSidebarVisibleToAvoidBlink=_this.isSidebarVisible,$scope&&$scope.ViewModelRoot&&$scope.ViewModelRoot.VM_Variables&&($scope.ViewModelRoot.VM_Variables.__UserSidebarShowMemory=_this.isSidebarVisible),_this.$scope.$apply()})),this.$scope.$on("__UserSidebarShowMemoryServerChange",(function(e){$scope&&$scope.ViewModelRoot&&$scope.ViewModelRoot.VM_Variables&&(_this.isSidebarVisible=$scope.ViewModelRoot.VM_Variables.__UserSidebarShowMemory),theGlobalVarOnIsSidebarVisibleToAvoidBlink=_this.isSidebarVisible})),this.$scope.$on("__vClipbookDataChanged",(function(e){if($scope&&$scope.ViewModelRoot&&$scope.ViewModelRoot.VM_Variables){var notserv=_this.NotificationService;navigator.clipboard.writeText($scope.ViewModelRoot.VM_Variables.vClipbookData).then((function(){console.log("Copied to clipboard successfully!"),notserv.createAndEnqueue("Added to clipboard",!0,!1,"content_copy"),$scope.ViewModelRoot.VM_Variables.vClipbookData=""}),(function(err){console.error("Could not copy text: ",err),$scope.ViewModelRoot.VM_Variables.vClipbookData=""}))}})),this.$scope.$on("__vClientScriptExecuteDataChanged",(function(e){if($scope&&$scope.ViewModelRoot&&$scope.ViewModelRoot.VM_Variables){var scriptref=$scope.ViewModelRoot.VM_Variables.vClientScriptExecute;$scope.ViewModelRoot.VM_Variables.vClientScriptExecute="",window.MDrivenClientScriptExecute(scriptref)}})),this.$scope.$on("DataErrorsUpdated",(function(e){_this.countErrors()})),this.$scope.$on("__BringUpSeekerGridMoreMenu",(function(e,$event){_this.showContextMenu_SeekerGridMore($event)})),this.$scope.$on("$viewContentLoaded",(function(e){if(_this.$timeout((function(){var _$scope$StreamingView,_$scope$StreamingView2,_vmsec$attributes$get;if(!_this.isMobileDevice){var autofocused=$("[autofocus]:visible:enabled");0===autofocused.length?$("input:visible:enabled:first").focus():autofocused[0].focus()}null===(_$scope$StreamingView=$scope.StreamingViewModelClient.StreamingAppClient)||void 0===_$scope$StreamingView||_$scope$StreamingView.UpdateVarsForScreenWidth(),null===(_$scope$StreamingView2=$scope.StreamingViewModelClient.StreamingAppClient)||void 0===_$scope$StreamingView2||_$scope$StreamingView2.UpdateVarForMobileDevice(),$scope.ViewModelRoot.VM_Variables&&!1===$scope.ViewModelRoot.VM_Variables.__UserSidebarShowMemory&&(_this.isSidebarVisible=!1),theGlobalVarOnIsSidebarVisibleToAvoidBlink=_this.isSidebarVisible;var vmsec=document.querySelector("#viewmodelSection");$scope.ViewData&&"true"==(null===(_vmsec$attributes$get=vmsec.attributes.getNamedItem("skipwhenbacking"))||void 0===_vmsec$attributes$get?void 0:_vmsec$attributes$get.value)&&($scope.ViewData.IsSkipWhenBacking=!0)}),300),_this.$timeout((function(){var _$scope$ViewData,_$scope$ViewData2;(null===(_$scope$ViewData=$scope.ViewData)||void 0===_$scope$ViewData?void 0:_$scope$ViewData.scrollPosition.windowScrollY)>0&&_this.$window.scrollTo(0,$scope.ViewData.scrollPosition.windowScrollY),viewmodelWrapper&&(null===(_$scope$ViewData2=$scope.ViewData)||void 0===_$scope$ViewData2?void 0:_$scope$ViewData2.scrollPosition.vmSectionScrollY)>0&&viewmodelWrapper.scrollTo(0,$scope.ViewData.scrollPosition.vmSectionScrollY)}),500),_this.countErrors(),_this.$scope.hideSidebar(),_this.$scope.StreamingViewModelClient.StreamingAppClient.RenderAsUserControl){var iframe=_this.$window.frameElement,vmsec=document.querySelector("#viewmodelSection");null!=iframe&&(iframe.height=String(vmsec.scrollHeight)+"px")}})),this.$scope.$on(AngularEventConstants.$StateActionExecute,(function(event,actionName){if("Save"===actionName||"**EXTRASAVEANDKEEPOPEN"===actionName)var unregisterListenerForSave=$scope.$on(AngularEventConstants.$ProcessingServerMessagesComplete,(function(event){$scope.ViewData.appInfo.isDirty||(unregisterListenerForSave(),_this.NotificationService.createAndEnqueue("Changes saved",!0,!1,"save"))}));else"Undo"===actionName?_this.NotificationService.createAndEnqueue("Changes undone",!0,!1,"undo"):"Redo"===actionName?_this.NotificationService.createAndEnqueue("Changes redone",!0,!1,"redo"):"SpecialAction__SeekerGridMore_ExportAsFile"===actionName?_this.NotificationService.createAndEnqueue("Export file ordered",!0,!1,"attach_file"):"SpecialAction__SeekerGridMore_ImportClipbook"===actionName&&_this.NotificationService.createAndEnqueue("Import in progress",!0,!1,"content_copy")})),this.$scope.$on("saveShortcut",(function(){_this.EmptyQueueAndThen("saveIfDirty",(function(){_this.viewClient.GetIsDirty()&&_this.SaveAndKeepOpenAndThen((function(){}))}))})),this.$scope.$on("editShortcut",(function(){_this.$scope.modalIsOpen||$scope.ViewClient.CallServerAction("GLOBAL","**READONLYUNLOCK")})),this.$scope.$on("saveAndLockShortcut",(function(){_this.$scope.modalIsOpen||_this.EmptyQueueAndThen("SaveAndLock",(function(){_this.viewClient.GetIsDirty()&&_this.SaveAndThen((function(){$scope.ViewClient.CallServerAction("GLOBAL","**READONLYLOCK")}))}))})),this.$scope.$on("undoShortcut",(function(){_this.EmptyQueueAndThen("Undo",(function(){$scope.ViewClient.CallServerAction("GLOBAL","Undo")}))})),this.$scope.$on("redoShortcut",(function(){_this.EmptyQueueAndThen("Redo",(function(){$scope.ViewClient.CallServerAction("GLOBAL","Redo")}))})),this.$scope.$on("selectallfirsttable",(function(){var gridControl=_this.viewClient.ViewData.ViewMeta.Controls.find((function(control){return"grid"===control.type}));gridControl&&_this.$scope.selectAllRows(gridControl.owner,gridControl.name)})),this.$scope.$on("cancelAndLockShortcut",(function(){_this.$scope.modalIsOpen||_this.EmptyQueueAndThen("CancelAndLock",(function(){if(_this.viewClient.GetIsDirty()){var confirm=_this.StreamingAppClient.$mdDialog.confirm().textContent("Are you sure it is OK to lose changes?").ok("OK").cancel("Cancel").multiple(!0);_this.StreamingAppClient.$mdDialog.show(confirm).then((function(value){$scope.ViewClient.CallServerAction("GLOBAL","**CANCEL"),$scope.ViewClient.CallServerAction("GLOBAL","**READONLYLOCK")}),(function(){}))}else $scope.ViewClient.CallServerAction("GLOBAL","**CANCEL"),$scope.ViewClient.CallServerAction("GLOBAL","**READONLYLOCK")}))})),this.$scope.$on(SystemEvents.$ViewMetaReady,(function(e){main_controller_classPrivateMethodGet(_this,_updateTimeout,_updateTimeout2).call(_this),_this.$scope.ViewData.ViewMeta.getValueForTaggedValueNameAsBool("HideSidebar")&&(_this.isSidebarVisible=!1,theGlobalVarOnIsSidebarVisibleToAvoidBlink=_this.isSidebarVisible)})),this.$scope.$on(SystemEvents.$ViewDataReady,(function(e){$scope.ViewData.ViewMeta&&main_controller_classPrivateMethodGet(_this,_updateTimeout,_updateTimeout2).call(_this)})),this.$scope.$on("MainMenuClick",(function(event,nameofGlobalAction,targetWhenCtrlPressed){if(console.log("MainMenuClick:"+nameofGlobalAction),!_this.viewClient.GetIsDirty()||_this.StreamingAppClient.RenderAsUserControl||targetWhenCtrlPressed)targetWhenCtrlPressed?$window.open(targetWhenCtrlPressed,"_blank"):_this.StreamingAppClient.HandleMainMenuAction(nameofGlobalAction);else{var confirm=$mdDialog.confirm().textContent("You have unsaved changes.").ok("Save and continue").cancel("Cancel");$mdDialog.show(confirm).then((function(){$scope.ViewData.StateActions().filter((function(action){return"Save"===action.ActionName}))[0].Execute(),_this.viewClient.ExecuteAfterFullRoundtrip("Waiting for save",nameofGlobalAction,(function(data){_this.StreamingAppClient.HandleMainMenuAction(nameofGlobalAction)}))}))}})),this.$scope.scrollTo=function(scrollPoint){var newHash=scrollPoint;$location.hash()!==newHash?$location.hash(scrollPoint):$anchorScroll()},this.$scope.errorHandler=$scope.$on("errorOccured",(function(e){$scope.errorHandler();var notification=new TurnkeyNotification("Server error occured.");notification.addAction(new TurnkeyNotificationAction("Show details",_this.showAppInfoDialog.bind(_this))),notification.addAction(new TurnkeyNotificationAction("Reset",_this.resetServer.bind(_this))),_this.NotificationService.enqueue(notification)})),this.$scope.hideSidebar=function(){var bodyWrapper=document.querySelector("#bodyWrapper"),vmWrapper=document.querySelector("#viewmodelSection"),sbToggler=document.querySelector("#LeftMenuButton");null!=vmWrapper&&vmWrapper.classList.contains("sidebar-hidden")?bodyWrapper.classList.add("sb-hidden"):(bodyWrapper.classList.remove("sb-hidden"),sbToggler.classList.add("active"))},this.$window.onbeforeunload=function(event){if(_this.viewClient.GetIsDirty())return"You have unsaved information!"},this.$window.onresize=function(event){_this.StreamingAppClient.UpdateVarsForScreenWidth()},this.$scope.$on("$locationChangeStart",(function(e,currentLocation,previousLocation){if(console.log("$locationChangeStart"),$scope.ViewData.scrollPosition.windowScrollY=$window.scrollY,viewmodelWrapper&&($scope.ViewData.scrollPosition.vmSectionScrollY=viewmodelWrapper.scrollTop),_this.viewClient.GetIsDirty()&&!_this.StreamingAppClient.RenderAsUserControl){e.preventDefault();var alert=$mdDialog.alert().textContent("You have unsaved changes. Please Save or Cancel before leaving.").ok("Ok");$mdDialog.show(alert).then((function(res){return $mdDialog.hide()}))}})),this.$scope.$on(AngularEventConstants.$ShowActionMenu,(function(e,row,$event){_this.ExecuteOrShowMenu(row,$event,!1,!1)})),this.$scope.$on(AngularEventConstants.$NavigateWithinApp,(function(e,theSourceVMClassId,theName,theId,IsModal){console.log("Navigating to: "+theName),_this.viewClient.ExecuteAfterFullRoundtrip("Waiting for server repsone","/".concat(theName,"/").concat(theId),(function(data){if(_this.viewClient.GetIsDirty()&&!_this.StreamingAppClient.RenderAsUserControl){var confirm=$mdDialog.confirm().textContent("You have unsaved changes.").ok("Save and continue").cancel("Cancel");$mdDialog.show(confirm).then((function(result){$mdDialog.hide(),$scope.ViewData.StateActions().filter((function(action){return"Save"===action.ActionName}))[0].Execute(),_this.viewClient.ExecuteAfterFullRoundtrip("Waiting for save","/".concat(theName,"/").concat(theId),(function(data){_this.$scope.ViewData.IsSkipWhenBacking?$location.path(data).replace():$location.path(data)}))}),(function(){$mdDialog.cancel(),e.preventDefault()}))}else _this.$scope.ViewData.IsSkipWhenBacking?$location.path(data).replace():$location.path(data)}))})),this.$scope.$on(AngularEventConstants.$ProcessingServerMessagesComplete,(function(event){"isnew"===_this.viewClient.GetRootObjectStatus()&&!0===_this.viewClient.GetIsDirty()&&(_this.autobackOnDeleted=!0),"isdeleted"===_this.viewClient.GetRootObjectStatus()&&!1===_this.viewClient.GetIsDirty()&&(!0===_this.autobackOnDeleted||window.alert("Page object is deleted, going back to previous page."),window.history.back()),$("#viewmodelSection > .vmGridboxInbetween").outerHeight()!==$("#contentWrapper").outerHeight()-$("#viewmodelSection > .vmGridboxAtTop").outerHeight()-$("#viewmodelSection > .vmGridboxAtBottom").outerHeight()&&$("#viewmodelSection > .vmGridboxInbetween").css("max-height",$("#contentWrapper").outerHeight()-$("#viewmodelSection > .vmGridboxAtTop").outerHeight()-$("#viewmodelSection > .vmGridboxAtBottom").outerHeight())})),this.$scope.onFileSelect=this.onFileSelect,this.$scope.onFileSelectCustom=this.onFileSelectCustom,this.$scope.selectAllRows=function(vclassName,vcolName){$scope.ViewModelRoot[vcolName+"_isAllSelected"]=!$scope.ViewModelRoot[vcolName+"_isAllSelected"];var table=$scope.ViewModelRoot["Curr_".concat(vclassName)]()["".concat(vcolName)];angular_default().forEach(table,(function(row){row.vSelected=$scope.ViewModelRoot[vcolName+"_isAllSelected"]}))},this.$scope.orderBy=function(vclassName,vcolName,$event){var resizer=$event.delegateTarget.querySelector(".resizer");$event.originalEvent.target!==resizer&&$event.target!==resizer&&($scope[vclassName+"_OrderColumnReverseState"]?($scope[vclassName+"_OrderColumnName"]=null,$scope[vclassName+"_OrderColumnReverseState"]=!1):($scope[vclassName+"_OrderColumnReverseState"]=null!==vcolName&&$scope[vclassName+"_OrderColumnName"]===vcolName&&!$scope[vclassName+"_OrderColumnReverseState"],$scope[vclassName+"_OrderColumnName"]=vcolName),window.MDrivenCellSelectClear&&window.MDrivenCellSelectClear($event.delegateTarget))},this.$scope.reQuery=function(vclassName,vcolName){$scope.ViewModelRoot.VM_Variables.vSeekerOrderReverseState?($scope.ViewModelRoot.VM_Variables.vSeekerOrderColumnName=null,$scope.ViewModelRoot.VM_Variables.vSeekerOrderReverseState=!1):($scope.ViewModelRoot.VM_Variables.vSeekerOrderReverseState=null!==vcolName&&$scope.ViewModelRoot.VM_Variables.vSeekerOrderColumnName===vcolName&&!$scope.ViewModelRoot.VM_Variables.vSeekerOrderReverseState,$scope.ViewModelRoot.VM_Variables.vSeekerOrderColumnName=vcolName);var unregisterListener=$scope.$on(AngularEventConstants.$ProcessingServerMessagesComplete,(function(){console.log("ReQuery"),$scope.ViewClient.CallServerAction($scope.ViewData.ViewModelName,"ReQuery"),unregisterListener()}))},this.$scope.getListForPageSize=function(){var result=[50,100,200,500];if($scope.ViewModelRoot.VM_Variables&&$scope.ViewModelRoot.VM_Variables.vSeekerPageLength){var current=Number($scope.ViewModelRoot.VM_Variables.vSeekerPageLength);-1===result.indexOf(current)&&(result.push(current),result=result.sort((function(a,b){return a-b})))}return result},this.$scope.getPageInfoText=function(){var varvm=$scope.ViewModelRoot.VM_Variables;if(varvm){var aTotalCount=varvm.vSeekerResultCount,aPage=varvm.vSeekerPage,aPageSize=varvm.vSeekerPageLength;if(aTotalCount>0&&aPageSize>0&&aPage>=0){var firstonpage=aPageSize*aPage+1,lastonpage=Math.min(firstonpage+aPageSize-1,aTotalCount);return"".concat(firstonpage,"-").concat(lastonpage," of ").concat(aTotalCount)}if(0==aTotalCount)return"No results"}return""},this.$scope.$on(TableEventConstants.$ClickedRow,(function(e,row,$event,index,isOldMenuPrefered){row.SetCurrentOnRowClick($event,index);var navigateOnRowSelectEnabled=_this.checkForTaggedValueBool(row.VMClassParentListAttribute,"NavigateOnSingleClickEnable"),activeActions=row.GetActiveActions();if(!1===row.vCurrentChanging)console.log("ClickDispatcher:ExecuteOrShowMenu, directexecute"),1===activeActions.length&&null!==activeActions[0].View&&navigateOnRowSelectEnabled&&activeActions[0].Execute();else var unregisterListener=$scope.$on(AngularEventConstants.$ProcessingServerMessagesComplete,(function(){console.log("ClickDispatcher:MsgProcessingServerMessagesComplete"),!1===row.vCurrentChanging&&(unregisterListener(),console.log("ClickDispatcher:ExecuteOrShowMenu"),1===activeActions.length&&null!==activeActions[0].View&&navigateOnRowSelectEnabled&&activeActions[0].Execute())}))})),this.$scope.$on(TableEventConstants.$DblClickedRow,(function(e,row,$event,isOldMenuPrefered){if(row.SetCurrentOnRowClick(event),!1===row.vCurrentChanging)console.log("DblClickDispatcher:ExecuteOrShowMenu, directexecute"),_this.ExecuteOrShowMenu(row,$event,isOldMenuPrefered,!0);else var unregisterListener=$scope.$on(AngularEventConstants.$ProcessingServerMessagesComplete,(function(){console.log("DblClickDispatcher:MsgProcessingServerMessagesComplete"),!1===row.vCurrentChanging&&(unregisterListener(),console.log("DblClickDispatcher:ExecuteOrShowMenu"),_this.ExecuteOrShowMenu(row,$event,isOldMenuPrefered,!0))}))})),this.$scope.$on(TableEventConstants.$RightClickedRow,(function(e,row,$event){if(row.SetCurrentOnRowClick($event),!1===row.vCurrentChanging)console.log("RightClickDispatcher:Show context menu"),_this.showContextMenu($event,row);else var unregisterListener=$scope.$on(AngularEventConstants.$ProcessingServerMessagesComplete,(function(){console.log("RightClickDispatcher:MsgProcessingServerMessagesComplete");var targetElement=$event.target;targetElement.style.cursor="wait",row.vCurrentChanging||(unregisterListener(),targetElement.style.cursor="pointer",console.log("RightClickDispatcher:Show context menu"),_this.showContextMenu($event,row))}))})),this.$scope.$on(AngularEventConstants.$WindowHeaderName,(function(e,headerName){_this.modalIsOpen||(_this.$document[0].title=headerName)})),this.$scope.$on(AngularEventConstants.$GlobalMenuEnableVisible,(function(e,globalActionEorVName,globalActionEorVEnable,globalActionEorVVisible){var globalmenus=document.querySelectorAll("[glaction]");if(null!=globalmenus)for(var i=0,len=globalmenus.length;i<len;i++){var glactionattr=globalmenus[i].attributes.getNamedItem("glaction");if(null!=glactionattr&&null!=glactionattr.value){var index=globalActionEorVName.indexOf(glactionattr.value);-1!=index&&(globalActionEorVVisible[index]?globalmenus[i].classList.remove("hidden"):globalmenus[i].classList.add("hidden"),globalActionEorVEnable[index]?globalmenus[i].removeAttribute("disabled"):globalmenus[i].setAttribute("disabled","disabled"))}}for(var dropdowns=document.querySelectorAll(".dropdown__menu"),_i=0;_i<dropdowns.length;_i++){var prevsibclasslist=dropdowns[_i].previousSibling.classList;if(prevsibclasslist){var actions=Array.prototype.slice.call(dropdowns[_i].querySelectorAll("[glaction]"));actions.length===actions.filter((function(action){return action.classList.contains("hidden")})).length?prevsibclasslist.add("hidden"):prevsibclasslist.contains("hidden")&&prevsibclasslist.remove("hidden")}}})),this.$scope.$on(AngularEventConstants.$OpenModalWindow,(function(event,modalStartParams){var lastClickEvent=_this.$scope.StreamingViewModelClient.StreamingAppClient.LastClickEvent;if(modalStartParams.IsPopUp){if(!lastClickEvent)return console.warn("Popups couldn't be called from sidebar action.");var popupWindowPosition=_this.$mdPanel.newPanelPosition(),popupWidnowAnimation=_this.$mdPanel.newPanelAnimation().openFrom({top:lastClickEvent.pageY,left:lastClickEvent.pageX}).closeTo(lastClickEvent.target).withAnimation(_this.$mdPanel.animation.SCALE).duration({open:80,close:80}),centeredPopup=!1;$scope.ViewData.ViewMeta&&(centeredPopup="true"==_this.$scope.ViewData.ViewMeta.getValueForGlobalSettingName("GlobalCenteredPopUp").toLowerCase()),centeredPopup?(popupWindowPosition=null,popupWidnowAnimation=null):(popupWindowPosition.relativeTo(lastClickEvent.target),popupWindowPosition.top("".concat(lastClickEvent.pageY,"px")),popupWindowPosition.left("".concat(lastClickEvent.pageX,"px")));var popupWindowConfiguration={attachTo:angular_default().element(document.body),position:popupWindowPosition,animation:popupWidnowAnimation,panelClass:"n-tk-popup",focusOnOpen:!0,clickOutsideToClose:!0,propagateContainerEvents:!0,resolve:{dataToModal:function(){return new Promise((function(resovle,reject){modalStartParams?resovle(modalStartParams):reject(new Error("modalStartParams are missing"))}))}},onCloseSuccess:function(panelRef){if(_this.$scope.modalIsOpen=!1,_this.popupWidnowInstance=void 0,_this.$scope.currentIsPopUp=!1,modalStartParams.ModalVMId=panelRef.VMId,_this.StreamingAppClient.ModalHasClosed(modalStartParams,!0),panelRef.destroy(),_this.StreamingAppClient.OpenModalOnClose){var params=_this.StreamingAppClient.OpenModalOnClose;_this.StreamingAppClient.OpenModalOnClose=null,$scope.$emit(AngularEventConstants.$OpenModalWindow,params)}},origin:lastClickEvent.currentTarget,controller:MDrivenTurnkeyPopupController_IID,controllerAs:"controller",templateUrl:"./Turnkey/AngularModalPage?name=".concat(modalStartParams.StartingAction.View,"&id=").concat(ExternalIdNullString,"&isPopUp=").concat(modalStartParams.IsPopUp.toString())};_this.$mdPanel.open(popupWindowConfiguration).then((function(popupRef){if(_this.popupWidnowInstance=popupRef,_this.$scope.modalIsOpen=!0,centeredPopup){var panelOuterWrapper=document.querySelector(".md-panel-outer-wrapper");panelOuterWrapper&&(panelOuterWrapper.style.display="flex",panelOuterWrapper.style.justifyContent="center",panelOuterWrapper.style.alignItems="center")}}))}else{var modalWindowConfiguration={controller:MDrivenTurnkeyModalController_IID,controllerAs:"controller",hasBackdrop:!0,escapeToClose:!1,onComplete:function(){_this.$scope.modalIsOpen=!0},resolve:{dataToModal:function(){return new Promise((function(resovle,reject){modalStartParams?resovle(modalStartParams):reject(new Error("modalStartParams are missing."))}))}},templateUrl:"./Turnkey/AngularModalPage?name=".concat(modalStartParams.StartingAction.View,"&id=").concat(ExternalIdNullString,"&isPopUp=").concat(modalStartParams.IsPopUp.toString())};if(_this.$scope.modalIsOpen)return;$mdDialog.show(modalWindowConfiguration).then((function(VMId){_this.$scope.modalIsOpen=!1,modalStartParams.ModalVMId=VMId,_this.StreamingAppClient.ModalHasClosed(modalStartParams,!0)}),(function(VMId){_this.$scope.modalIsOpen=!1,modalStartParams.ModalVMId=VMId,_this.StreamingAppClient.ModalHasClosed(modalStartParams,!1)}))}})),this.$scope.onDropSuccess=function(obj,evt,droptarget){_this.viewClient.DropObject(droptarget,$scope.ViewModelRoot.VMClassId.asString,obj)},this.isDragging=!1,this.$scope.$on("draggable:start",(function(data){_this.isDragging=!0,$("[drop-target]").attr("drop-target","true")})),this.$scope.$on("draggable:end",(function(data){_this.isDragging=!0,$("[drop-target]").attr("drop-target","false")})),this.$scope.scroll=0,this.$scope.$on("$destroy",(function(e){console.log("$scope -> $destroy"),$window.onbeforeunload=void 0,$window.onresize=void 0,_this.viewClient.ReleaseFromScope(),$scope.hideSidebar()}))}var Constructor,protoProps,staticProps;return Constructor=MDrivenTurnkeyMainController,protoProps=[{key:"ExecuteOrShowMenu",value:function(row,$event,isOldMenuPrefered,wasdoubleclick){var activeActions=row.GetActiveActions();if(wasdoubleclick&&this.$scope.ViewData.ViewMeta&&"true"==this.$scope.ViewData.ViewMeta.getValueForGlobalSettingName("GlobalNavigateOnDoubleClickWithoutMenu").toLowerCase()){var _step,_iterator=main_controller_createForOfIteratorHelper(activeActions);try{for(_iterator.s();!(_step=_iterator.n()).done;){var a=_step.value;if(null!=a.View)return void a.Execute($event)}}catch(err){_iterator.e(err)}finally{_iterator.f()}}0===activeActions.length?console.warn("activeActions.length === 0"):1===activeActions.length&&null!==activeActions[0].View?activeActions[0].Execute($event):activeActions.length>=1&&this.showContextMenu($event,row)}},{key:"toggleDebugMenu",value:function(){return this.isDebugMenuOpen=!this.isDebugMenuOpen,this.isDebugMenuOpen}},{key:"SaveAndThen",value:function(andThenDoAction){this.$scope.ViewData.StateActions().filter((function(action){return"Save"===action.ActionName}))[0].Execute(),this.EmptyQueueAndThen("Save",andThenDoAction)}},{key:"SaveAndKeepOpenAndThen",value:function(andThenDoAction){var actlist=this.$scope.ViewData.StateActions().filter((function(action){return"**EXTRASAVEANDKEEPOPEN"===action.ActionName}));actlist.length>0?(actlist[0].Execute(),this.EmptyQueueAndThen("Save",andThenDoAction)):this.SaveAndThen(andThenDoAction)}},{key:"EmptyQueueAndThen",value:function(queueKey,andThenDoAction){this.viewClient.ExecuteAfterFullRoundtrip(queueKey+" Working","",(function(p){return null!=andThenDoAction&&andThenDoAction(null),null}))}},{key:"showContextMenu_SeekerGridMore",value:function($event){var actionGroup=new ActionGroup("","","",""),submenugroup=actionGroup.EnsureSubMenuGroupByName("","");if("true"==this.$scope.ViewData.ViewMeta.getValueForGlobalSettingName("GlobalSeekerGridShowImport")){var actionone=new Action(this.$scope.ViewClient.StreamingAppClient,this.$scope.ViewData);actionone.ActionName="SpecialAction__SeekerGridMore_ImportClipbook",actionone.Presentation="Import from clipboard",actionone.Enable=!0,actionone.IsPurelyLocalAction=!0,submenugroup.ActionList.Actions.push(actionone)}var actiontwo=new Action(this.$scope.ViewClient.StreamingAppClient,this.$scope.ViewData);actiontwo.ActionName="SpecialAction__SeekerGridMore_ExportAsFile",actiontwo.Presentation="Export to file",actiontwo.Enable=!0,actiontwo.IsPurelyLocalAction=!0,submenugroup.ActionList.Actions.push(actiontwo),this.showContextMenu_Actions($event,submenugroup.ActionList.Actions,actionGroup,null)}},{key:"showContextMenu",value:function($event,row){var activeActionsForRow=row.GetActiveActions();if(0===activeActionsForRow.length)return console.warn("No active actions to show for this row");var actionGroup=this.$scope.ViewData.ActionGroupForVMClassname(row.VMClassId.VMClassName);this.showContextMenu_Actions($event,activeActionsForRow,actionGroup,row)}},{key:"showContextMenu_Actions",value:function($event,activeActionsForRow,actionGroup,row){var _this2=this,contextMenuConfiguration={position:this.$mdPanel.newPanelPosition().relativeTo($event.target).top("".concat($event.pageY,"px")).left("".concat($event.pageX,"px")),animation:this.$mdPanel.newPanelAnimation().openFrom({top:$event.pageY,left:$event.pageX}).closeTo($event.target).withAnimation(this.$mdPanel.animation.SCALE).duration({open:80,close:80}),attachTo:angular_default().element(document.body),panelClass:"tk-context-menu",focusOnOpen:!0,clickOutsideToClose:!0,propagateContainerEvents:!0,locals:{actionGroup,row},controller:"MDrivenTurnkeyContextMenuController",controllerAs:"$ctrl",templateUrl:"./Content/tmpl/panels/context-menu.tmpl.html"};this.isDragging&&(this.isDragging=!1),this.contextMenuInstance&&(this.contextMenuInstance.close().then((function(ref){return ref.destroy()})),this.contextMenuInstance=null),this.$mdPanel.open(contextMenuConfiguration).then((function(ref){return _this2.contextMenuInstance=ref})).catch((function(error){return console.log("Error occured during opening of context menu.",error)}))}},{key:"showAppInfoDialog",value:function($event){var _this3=this,dilaogOptions={escapeToClose:!0,openFrom:$event?$event.target:this.$rootElement,closeTo:$event?$event.target:this.$rootElement,onShowing:function(){_this3.modalIsOpen=!0,_this3.isModalWindowOpen=!0},onRemoving:function(){_this3.modalIsOpen=!1,_this3.isModalWindowOpen=!1},resolve:{appInfo:function(){return new Promise((function(resolve,reject){if(_this3.$scope.ViewData.appInfo){var appInfo=[];for(var option in _this3.$scope.ViewData.appInfo)"ViewData"!==option&&appInfo.push({name:option,value:_this3.$scope.ViewData.appInfo[option],id:"".concat(option,"_id")});resolve(appInfo)}else reject(new Error("Something went wrong. Can't find the application info data from server."))}))}},locals:{reset:this.resetServer.bind(this)},controller:"MDrivenTurnkeyDialogController",controllerAs:"$ctrl",templateUrl:"./Content/tmpl/panels/appinfo-dialog.tmpl.html"};this.$mdDialog.show(dilaogOptions)}},{key:"onFileSelect",value:function(target,vmClassId,maxSizeInBytes){var _this4=this,targetInput=document.getElementById(target);if(!targetInput)return console.warn("Input with id: ".concat(target," is not found."));var file=targetInput.files[0];if(0!==Number(maxSizeInBytes)&&file.size>Number(maxSizeInBytes)){var alert=this.$mdDialog.alert().textContent("".concat(file.name," is larger than ").concat(maxSizeInBytes," bytes, can't upload.")).ok("Ok");this.$mdDialog.show(alert).then((function(res){return _this4.$mdDialog.hide()}))}else{var fr=new FileReader,fileName=file.name;fr.onloadend=function(loadEndEvent){var data=loadEndEvent.target.result;_this4.$scope.StreamingViewModelClient.UploadFile(target,vmClassId.asString,data,fileName)},fr.readAsArrayBuffer(file)}}},{key:"onFileSelectCustom",value:function(file,target,vmClassId,maxSizeInBytes){var _this5=this;if(0!==maxSizeInBytes&&file.size>maxSizeInBytes){var alert=this.$mdDialog.alert().textContent("".concat(file.name," is larger than ").concat(maxSizeInBytes," bytes, can't upload.")).ok("Ok");this.$mdDialog.show(alert).then((function(res){return _this5.$mdDialog.hide()}))}else{var r=new FileReader,filename=file.name;r.onloadend=function(loadEndEvent){var data=loadEndEvent.target.result;_this5.$scope.StreamingViewModelClient.UploadFile(target,vmClassId.asString,data,filename)},r.readAsArrayBuffer(file)}}},{key:"toggleSidebar",value:function(){return this.isSidebarVisible=!this.isSidebarVisible,this.$scope&&this.$scope.ViewModelRoot&&this.$scope.ViewModelRoot.VM_Variables&&(this.$scope.ViewModelRoot.VM_Variables.__UserSidebarShowMemory=this.isSidebarVisible),theGlobalVarOnIsSidebarVisibleToAvoidBlink=this.isSidebarVisible,this.isSidebarVisible}},{key:"hideSidebar",value:function(){this.$window.innerWidth<768&&(this.isSidebarVisible=!1,theGlobalVarOnIsSidebarVisibleToAvoidBlink=this.isSidebarVisible,this.$scope.$applyAsync())}},{key:"inPlacePopupCloseWhenClickOutside",value:function($event,inplacepopupSelector){var _this6=this;$event.preventDefault();var initialClickTarget=$event.target,inPlacePopup=document.querySelectorAll(inplacepopupSelector)[0],middle=window.innerWidth/2;initialClickTarget.getBoundingClientRect().x>middle?inPlacePopup.classList.add("right-aligned"):inPlacePopup.classList.add("left-aligned"),inPlacePopup.classList.remove("hidden"),this.$window.addEventListener("click",(function clickhandler(e){console.log(initialClickTarget===e.target),console.log("considering closing inplacepopup "+inplacepopupSelector),inPlacePopup.contains(e.target)||initialClickTarget==e.target||(console.log("closing inplacepopup "+inplacepopupSelector),inPlacePopup.classList.add("hidden"),_this6.$window.removeEventListener("click",clickhandler))}))}},{key:"findElementAndFocus",value:function(selector,inElement){var elementToFocus;if(inElement){var whereToSearch=this.$document.find(inElement);elementToFocus=whereToSearch.find(selector)}else elementToFocus=this.$document.find(selector);this.$timeout((function(){elementToFocus.length>0?elementToFocus[0].focus():console.warn("findElementAndFocus method: element to focus not found.")}))}},{key:"scrollTo",value:function(scrollPoint){this.$location.hash()!==scrollPoint?this.$location.hash(scrollPoint):this.$anchorScroll()}},{key:"handleLeavingPageWihoutSaving",value:function(){if(this.viewClient.GetIsDirty())return"You have unsaved information! Save before leaving the page."}},{key:"resetServer",value:function(){this.viewClient.StreamingAppClient.SendResetToServer(this.$scope.ViewData)}},{key:"showConstraints",value:function($event){var _this7=this,target=$event.target.closest(".validation-card"),panelPosition=this.$mdPanel.newPanelPosition();isMobileDevice()&&panelPosition.absolute().centerHorizontally().centerVertically(),!isMobileDevice()&&this.isSidebarVisible&&panelPosition.relativeTo(target).addPanelPosition(this.$mdPanel.xPosition.OFFSET_END,this.$mdPanel.yPosition.ALIGN_BOTTOMS).withOffsetY("-10px"),isMobileDevice()||this.isSidebarVisible||panelPosition.relativeTo(target).addPanelPosition(this.$mdPanel.xPosition.OFFSET_END,this.$mdPanel.yPosition.ALIGN_BOTTOMS).withOffsetX("10px");var panelClass=isMobileDevice()?"n-tk-constraints-panel n-tk-constraints-panel--mobile":"n-tk-constraints-panel",panelAnimation=this.$mdPanel.newPanelAnimation().openFrom(target).closeTo(target).duration(100),panelConfiguration={attachTo:angular_default().element(document.body),clickOutsideToClose:!0,position:panelPosition,animation:panelAnimation,controllerAs:"$ctrl",controller:constraints_controller,origin:target,panelClass,hasBackdrop:isMobileDevice(),disableParentScroll:isMobileDevice(),locals:{dataErrors:this.$scope.ViewData.DataErrors.DataErrors()},onCloseSuccess:function(){_this7.constraintsPanelIsOpen=!1,_this7.constraintsPanelRef=void 0},templateUrl:"./Content/tmpl/panels/constraints.tmpl.html"};this.constraintsPanelIsOpen||this.$mdPanel.open(panelConfiguration).then((function(panelRef){_this7.constraintsPanelRef=panelRef,_this7.constraintsPanelIsOpen=!0}))}},{key:"countErrors",value:function(){var errorSum,warningSum,infoSum,dataErrors=this.$scope.ViewData.DataErrors.DataErrors(),sum=0;for(var category in dataErrors)"Errors"===category&&(errorSum=dataErrors[category].length,sum+=dataErrors[category].length),"Warnings"===category&&(warningSum=dataErrors[category].length,sum+=dataErrors[category].length),"Infos"===category&&(infoSum=dataErrors[category].length,sum+=dataErrors[category].length);this.errorCount=sum,errorSum>0?this.validationCardCssClass="error":warningSum>0?this.validationCardCssClass="warning":infoSum>0&&(this.validationCardCssClass="info")}},{key:"checkForTaggedValueBool",value:function(control,value){var targetControl=this.$scope.ViewData.ViewMeta.getControls().filter((function(c){return c.name===control}));if(targetControl[0])return targetControl[0].getTaggedValueByNameAsBool(value)}}],protoProps&&main_controller_defineProperties(Constructor.prototype,protoProps),staticProps&&main_controller_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),MDrivenTurnkeyMainController}();function _updateTimeout2(){var timeoutDelayGlobal=Number(this.$scope.ViewData.ViewMeta.getValueForGlobalSettingName("TurnkeyTimeoutMinutes")),timeoutDelayVM=this.$scope.ViewData.ViewMeta.getValueForTaggedValueNameAsNumber("TurnkeyTimeoutMinutes");angular_default().isDefined(timeoutDelayVM)&&0!==timeoutDelayVM?this.StreamingAppClient.UpdateTimeoutTimer(timeoutDelayVM):this.StreamingAppClient.UpdateTimeoutTimer(timeoutDelayGlobal)}main_controller_defineProperty(MDrivenTurnkeyMainController,"$inject",["$scope","$routeParams","$location","$timeout","$document","$window","StreamingAppClientService","ViewDataService","$mdDialog","$mdPanel","$anchorScroll","$rootElement","MDrivenTurnkeyNotificationService"]);const numberhash_filter=["$locale",function($locale){return function(input,decimals){if(isNaN(input))return input;void 0===decimals&&(decimals=2);var userLocale=$locale.id,parsed=parseFloat(input);return isNaN(parsed)||null==input?"":parsed.toLocaleString(userLocale,{maximumFractionDigits:8,minimumFractionDigits:decimals})}}];window.MDrivenAngularAppModule="MDrivenAngularApp";angular_default().module("MDrivenAngularApp",[angular_route_default(),angular_animate_default(),angular_aria_default(),angular_messages_default(),angular_ui_bootstrap_default(),angular_material_default(),"ngDraggable",directives,components]).config(["$routeProvider",function($routeProvider){$routeProvider.when("/:name/:id",{templateUrl:function(urlattr){return"./Turnkey/AngularPage?name=".concat(urlattr.name,"&id=").concat(urlattr.id)},controller:"MDrivenTurnkeyMainController as controller"}).when("/:name",{templateUrl:function(urlattr){return"./Turnkey/AngularPage?name=".concat(urlattr.name,"&id=%24null%24")},controller:"MDrivenTurnkeyMainController as controller"}).when("/:name/:id/:ucparentid",{templateUrl:function(urlattr){return"debug"==urlattr.ucparentid?"./Turnkey/AngularPageDebug?name=".concat(urlattr.name,"&id=").concat(urlattr.id,"&debug=debug"):"./Turnkey/AngularPage?name=".concat(urlattr.name,"&id=").concat(urlattr.id)},controller:"MDrivenTurnkeyMainController as controller"}).otherwise({template:"",controller:["$location",function($location){$location.path("/Index")}]})}]).config(["$locationProvider",function($locationProvider){$locationProvider.hashPrefix("")}]).config(["$mdThemingProvider",function($mdThemingProvider){$mdThemingProvider.disableTheming(!0)}]).filter("valueDecoder",(function($filter){return function(text,format){var dateFormat=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}Z$/;if(null!=text){var _value=JSON.parse(text,(function(key,value){return"string"==typeof value&&dateFormat.test(value)?new Date(value):value})).value;return _value instanceof Date&&(_value=$filter("date")(_value,format)),_value}return""}})).filter("rawHtml",(function($sce){return function(value){return $sce.trustAsHtml(value)}})).filter("numberhash",numberhash_filter).filter("unique",(function(){return function(items,filterOn){if(!1===filterOn)return items;if((filterOn||angular_default().isUndefined(filterOn))&&angular_default().isArray(items)){var newItems=[],extractValueToCompare=function(item){return angular_default().isObject(item)&&angular_default().isString(filterOn)?item[filterOn]:item};angular_default().forEach(items,(function(item){for(var isDuplicate=!1,i=0;i<newItems.length;i++)if(angular_default().equals(extractValueToCompare(newItems[i]),extractValueToCompare(item))){isDuplicate=!0;break}isDuplicate||newItems.push(item)})),items=newItems}return items}})).service("ViewDataService",ViewDataService).service("StreamingAppClientService",StreamingAppClient).service("MDrivenTurnkeyNotificationService",MDrivenTurnkeyNotificationService).service("ViewMetaService",ViewMetaService).controller("MDrivenTurnkeyMainController",MDrivenTurnkeyMainController).controller(MDrivenTurnkeyModalController_IID,MDrivenTurnkeyModalController).controller("MDrivenTurnkeyDialogController",MDrivenTurnkeyDialogController).controller("MDrivenTurnkeyContextMenuController",MDrivenTurnkeyContextMenuController).controller("MDrivenTurnkeyNotificationController",NotificationController).controller(MDrivenTurnkeyPopupController_IID,MDrivenTurnkeyPopupController).controller("MDrivenTimeoutDialogController",MDrivenTurnkeyTimeoutDialogController).run((function($rootScope,$animate,$document){$animate.enabled(!0),$("a[glaction]").click((function(e){var _e$target$getAttribut,targetWhenCtrlPressed="",newtab="true"==(null===(_e$target$getAttribut=e.target.getAttribute("newtab"))||void 0===_e$target$getAttribut?void 0:_e$target$getAttribut.toLowerCase());if(e.ctrlKey||newtab){var href=e.currentTarget.attributes.getNamedItem("href");href&&href.value&&(targetWhenCtrlPressed=href.value)}return $rootScope.$broadcast("MainMenuClick",e.target.getAttribute("glaction"),targetWhenCtrlPressed),$(".dropdown").removeClass("open"),$(".navbar-collapse").removeClass("in"),!1})),$document.on("keydown",(function(event){var theshortcut="";if(event.ctrlKey||event.metaKey){if("s"===event.key)theshortcut="saveShortcut";else if("e"===event.key)theshortcut="editShortcut";else if("Enter"===event.key)theshortcut="saveAndLockShortcut";else if("z"===event.key)theshortcut="undoShortcut";else if("y"===event.key)theshortcut="redoShortcut";else if("a"===event.key){var active=document.activeElement;if(!(active&&("INPUT"===active.tagName||"TEXTAREA"===active.tagName)))document.querySelector("table")&&(theshortcut="selectallfirsttable")}}else if("Escape"===event.key)theshortcut="cancelAndLockShortcut";else if(event.altKey){var firstMenuItem=document.querySelector(".tk-toolbar__button:first-child:not([disabled])");null===firstMenuItem&&(firstMenuItem=document.querySelector(".tk-state-action:first-child:not([disabled])")),null!==firstMenuItem&&firstMenuItem!=document.activeElement||(firstMenuItem=document.querySelector(".navbar__link:first-child")),firstMenuItem&&(firstMenuItem.focus(),event.preventDefault())}""!=theshortcut&&(event.preventDefault(),$rootScope.$broadcast(theshortcut))}))})).name}},__webpack_require__=>{__webpack_require__.O(0,[497,458],(()=>{return moduleId=794,__webpack_require__(__webpack_require__.s=moduleId);var moduleId}));__webpack_require__.O()}]);